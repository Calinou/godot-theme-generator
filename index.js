var Godot=function(){var a=typeof document!='undefined'&&document.currentScript?document.currentScript.src:void 0;return function(aL){var f,c_,aq,ad,bg,aZ,bd,aj,P,av,bh,cV,Y,aR,bm,aO,cM,aJ,t,bq,be,cB,ar,af,ai,ct,ab,bz,bC,co,bE,nA,bL,bX,ax,s,m,I,aF,e,E,h,z,bT,aY,bO,bf,bN,bY,a$,bK,b_,cc,Q,O,N,R,ag,aP,am,br,ae,k,r,bn,p,X,aa,n,u,A,b,i,v,w,G,bZ,g,U,j,aM,aT,C,c,ac,cS,cQ,T,aI,cj,J,bR,x,aE,aA,d,a_,bQ,bP,bS,mk,ml,mm,mn,mo,mp,mq,mr,ms,B,ah,mv,bc,aN,bI,b$,mA,mB,mC,mD,mE,mF,mG,mH,mI,mJ,mK,mL,mM,mN,aw,ce,cg,H,cp,cA,cU,cX,K,ch,cZ,cW,cT,cr,cP,cO,cL,cG,cx,cv,F,_,D,au,cf,bJ;aL=aL||{},f=typeof aL!="undefined"?aL:{},c_=function(){var a={},b=0;this.has=function(b){return a.hasOwnProperty(b)},this.add=function(d){b+=1;var c=crypto.getRandomValues(new Int32Array(32))[0];return a[c]=d,c},this.get=function(b){return a[b]},this.remove=function(c){b-=1,delete a[c]},this.size=function(){return b},this.ids=a},f.IDHandler=new c_,f.copyToFS=function(a,d){var e=a.lastIndexOf("/"),c="/";e>0&&(c=a.slice(0,a.lastIndexOf("/")));try{b.stat(c)}catch(a){if(a.errno!==v.ENOENT)throw a;b.mkdirTree(c)}b.writeFile(a,new Uint8Array(d),{flags:"wx+"})},f.drop_handler=function(){var c=[],a=[],i=null;function d(a,b){return new Promise(function(d,b){a.file(function(a){var e=new FileReader;e.onload=function(){var b={path:a.relativePath||a.webkitRelativePath,name:a.name,type:a.type,size:a.size,data:e.result};b.path||(b.path=b.name),c.push(b),d()},e.onerror=function(){console.log("Error reading file"),b()},e.readAsArrayBuffer(a)},function(a){console.log("Error!"),b()})})}function g(b){return new Promise(function(c,f){var e=b.createReader();e.readEntries(function(f){for(var e=0,b;e<f.length;e++)b=f[e],b.isDirectory?a.push(g(b)):b.isFile&&a.push(d(b));c()})})}function h(b,c){if(a.length==0){b();return}a.pop().then(function(){setTimeout(function(){h(b,c)},0)})}function j(f){for(var d=f||[],a=d.length,c=_((a+1)*4),b=0;b<a;b++)e[(c>>2)+b]=bF(d[b]);e[(c>>2)+a]=0,y("_drop_files_callback","void",["number","number"],[c,a])}return function(k){var l,e;if(k.preventDefault(),k.dataTransfer.items)for(l=0;l<k.dataTransfer.items.length;l++){const b=k.dataTransfer.items[l];e=null,"getAsEntry"in b?e=b.getAsEntry():"webkitGetAsEntry"in b&&(e=b.webkitGetAsEntry()),e?e.isDirectory?a.push(g(e)):e.isFile?a.push(d(e)):console.error("Unrecognized entry...",e):console.error("File upload not supported")}else console.error("File upload not supported");i=new Promise(h).then(function(){var g,h,e;const d="/tmp/drop-"+parseInt(Math.random()*Math.pow(2,31))+"/";g=[],h=[],c.forEach(e=>{var a=e.path,b,c;f.copyToFS(d+a,e.data),b=a.indexOf("/"),b==-1?g.push(d+a):(c=a.substr(0,b),b=c.indexOf("/"),b<0&&g.indexOf(d+c)==-1&&g.push(d+c)),h.push(d+a)}),a=[],c=[],j(g),e=[d.substr(0,d.length-1)],h.forEach(function(f){var a,c;for(b.unlink(f),a=f.replace(d,""),c=a.lastIndexOf("/");c>0;)a=a.substr(0,c),e.indexOf(d+a)==-1&&e.push(d+a),c=a.lastIndexOf("/")}),e=e.sort(function(c,d){var a=(c.match(/\//g)||[]).length,b=(d.match(/\//g)||[]).length;return a>b?-1:a<b?1:0}),e.forEach(function(a){b.rmdir(a)})})}}(),aq={};for(ad in f)f.hasOwnProperty(ad)&&(aq[ad]=f[ad]);bg=[],aZ="./this.program",bd=function(b,a){throw a},aj=!1,P=!1,av=!1,bh=!1,cV=!1,aj=typeof window=="object",P=typeof importScripts=="function",bh=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",av=bh&&!aj&&!P,cV=!aj&&!av&&!P,Y="";function nD(a){return f.locateFile?f.locateFile(a,Y):Y+a}(aj||P)&&(P?Y=self.location.href:document.currentScript&&(Y=document.currentScript.src),a&&(Y=a),Y.indexOf("blob:")!==0?Y=Y.substr(0,Y.lastIndexOf("/")+1):Y="",aR=function(b){var a=new XMLHttpRequest;return a.open("GET",b,!1),a.send(null),a.responseText},P&&(aO=function(b){var a=new XMLHttpRequest;return a.open("GET",b,!1),a.responseType="arraybuffer",a.send(null),new Uint8Array(a.response)}),bm=function(c,d,b){var a=new XMLHttpRequest;a.open("GET",c,!0),a.responseType="arraybuffer",a.onload=function(){if(a.status==200||a.status==0&&a.response){d(a.response);return}b()},a.onerror=b,a.send(null)},cM=function(a){document.title=a}),aJ=f.print||console.log.bind(console),t=f.printErr||console.warn.bind(console);for(ad in aq)aq.hasOwnProperty(ad)&&(f[ad]=aq[ad]);aq=null,f.arguments&&(bg=f.arguments),f.thisProgram&&(aZ=f.thisProgram),f.quit&&(bd=f.quit);function nC(c){var a=e[aY>>2],b=a+c+15&-16;return b>cR()&&o(),e[aY>>2]=b,a}function nB(a){switch(a){case"i1":case"i8":return 1;case"i16":return 2;case"i32":return 4;case"i64":return 8;case"float":return 4;case"double":return 8;default:{if(a[a.length-1]==="*")return 4;if(a[0]==="i"){var b=parseInt(a.substr(1));return M(b%8===0,"getNativeTypeSize invalid bits "+b+", type "+a),b/8}return 0}}}function aH(a){aH.shown||(aH.shown={}),aH.shown[a]||(aH.shown[a]=1,t(a))}function cH(a,b,c){return c?+(a>>>0)+ +(b>>>0)*4294967296:+(a>>>0)+ +(b|0)*4294967296}bq=0,be=function(a){bq=a},cB=function(){return bq},f.wasmBinary&&(ar=f.wasmBinary),f.noExitRuntime&&(af=f.noExitRuntime),typeof WebAssembly!="object"&&t("no native wasm support detected");function aB(a,b,c,d){switch(c=c||"i8",c.charAt(c.length-1)==="*"&&(c="i32"),c){case"i1":s[a>>0]=b;break;case"i8":s[a>>0]=b;break;case"i16":I[a>>1]=b;break;case"i32":e[a>>2]=b;break;case"i64":r=[b>>>0,(k=b,+Q(k)>=1?k>0?(R(+N(k/4294967296),4294967295)|0)>>>0:~~+O((k-+(~~k>>>0))/4294967296)>>>0:0)],e[a>>2]=r[0],e[a+4>>2]=r[1];break;case"float":h[a>>2]=b;break;case"double":z[a>>3]=b;break;default:o("invalid type for setValue: "+c)}}function cu(a,b,c){switch(b=b||"i8",b.charAt(b.length-1)==="*"&&(b="i32"),b){case"i1":return s[a>>0];case"i8":return s[a>>0];case"i16":return I[a>>1];case"i32":return e[a>>2];case"i64":return e[a>>2];case"float":return h[a>>2];case"double":return z[a>>3];default:o("invalid type for getValue: "+b)}return null}ct=new WebAssembly.Table({initial:34062,maximum:34062+0,element:"anyfunc"}),ab=!1,bz=0;function M(a,b){a||o("Assertion failed: "+b)}function cq(a){var b=f["_"+a];return M(b,"Cannot call unknown function "+a+", make sure it is exported"),b}function y(m,f,k,b,n){var j={string:function(a){var b=0,c;return a!==null&&a!==void 0&&a!==0&&(c=(a.length<<2)+1,b=_(c),q(a,b,c)),b},array:function(a){var b=_(a.length);return cd(a,b),b}},i,d,c,a,g,e;function h(a){return f==="string"?l(a):f==="boolean"?Boolean(a):a}if(i=cq(m),d=[],c=0,b)for(a=0;a<b.length;a++)g=j[k[a]],g?(c===0&&(c=F()),d[a]=g(b[a])):d[a]=b[a];return e=i.apply(null,d),e=h(e),c!==0&&D(c),e}function aW(b,c,a,d){var e,f;return a=a||[],e=a.every(function(a){return a==="number"}),f=c!=="string",f&&e&&!d?cq(b):function(){return y(b,c,a,arguments,d)}}bC=0,co=3;function cm(c,h,l,d){var k,f,j,a,i,g,b,n,o,p;if(typeof c=="number"?(k=!0,f=c):(k=!1,f=c.length),j=typeof h=="string"?h:null,l==co?a=d:a=[B,_,nC][l](Math.max(f,j?1:h.length)),k){for(d=a,M((a&3)==0),i=a+(f&~3);d<i;d+=4)e[d>>2]=0;for(i=a+f;d<i;)s[d++>>0]=0;return a}if(j==="i8")return c.subarray||c.slice?m.set(c,a):m.set(new Uint8Array(c),a),a;for(g=0,b,n,o;g<f;){if(p=c[g],b=j||h[g],b===0){g++;continue}b=="i64"&&(b="i32"),aB(a+g,p,b),o!==b&&(n=nB(b),o=b),g+=n}return a}function cl(c){for(var a="",b;1;){if(b=m[c++>>0],!b)return a;a+=String.fromCharCode(b)}}bE=typeof TextDecoder!="undefined"?new TextDecoder("utf8"):void 0;function an(c,b,i){for(var j=b+i,d=b,e,a,f,g,h;c[d]&&!(d>=j);)++d;if(d-b>16&&c.subarray&&bE)return bE.decode(c.subarray(b,d));for(e="";b<d;){if(a=c[b++],!(a&128)){e+=String.fromCharCode(a);continue}if(f=c[b++]&63,(a&224)==192){e+=String.fromCharCode((a&31)<<6|f);continue}g=c[b++]&63,(a&240)==224?a=(a&15)<<12|f<<6|g:a=(a&7)<<18|f<<12|g<<6|c[b++]&63,a<65536?e+=String.fromCharCode(a):(h=a-65536,e+=String.fromCharCode(55296|h>>10,56320|h&1023))}return e}function l(a,b){return a?an(m,a,b):""}function ay(f,c,b,g){var h,e,d,a,i;if(!(g>0))return 0;h=b,e=b+g-1;for(d=0;d<f.length;++d)if(a=f.charCodeAt(d),a>=55296&&a<=57343&&(i=f.charCodeAt(++d),a=65536+((a&1023)<<10)|i&1023),a<=127){if(b>=e)break;c[b++]=a}else if(a<=2047){if(b+1>=e)break;c[b++]=192|a>>6,c[b++]=128|a&63}else if(a<=65535){if(b+2>=e)break;c[b++]=224|a>>12,c[b++]=128|a>>6&63,c[b++]=128|a&63}else{if(b+3>=e)break;c[b++]=240|a>>18,c[b++]=128|a>>12&63,c[b++]=128|a>>6&63,c[b++]=128|a&63}return c[b]=0,b-h}function q(a,b,c){return ay(a,m,b,c)}function V(d){for(var b=0,c=0,a;c<d.length;++c)a=d.charCodeAt(c),a>=55296&&a<=57343&&(a=65536+((a&1023)<<10)|d.charCodeAt(++c)&1023),a<=127?++b:a<=2047?b+=2:a<=65535?b+=3:b+=4;return b}nA=typeof TextDecoder!="undefined"?new TextDecoder("utf-16le"):void 0;function bF(a){var b=V(a)+1,c=_(b);return ay(a,s,c,b),c}function cd(a,b){s.set(a,b)}function ca(b,c,d){for(var a=0;a<b.length;++a)s[c++>>0]=b.charCodeAt(a);d||(s[c>>0]=0)}bL=16384,bX=65536;function bW(a,b){return a%b>0&&(a+=b-a%b),a}function bV(a){ax=a,f.HEAP8=s=new Int8Array(a),f.HEAP16=I=new Int16Array(a),f.HEAP32=e=new Int32Array(a),f.HEAPU8=m=new Uint8Array(a),f.HEAPU16=aF=new Uint16Array(a),f.HEAPU32=E=new Uint32Array(a),f.HEAPF32=h=new Float32Array(a),f.HEAPF64=z=new Float64Array(a)}bT=7297360,aY=2054288,bO=f.TOTAL_MEMORY||16777216,f.wasmMemory?ai=f.wasmMemory:ai=new WebAssembly.Memory({initial:bO/bX}),ai&&(ax=ai.buffer),bO=ax.byteLength,bV(ax),e[aY>>2]=bT;function aC(c){for(var a,b;c.length>0;){if(a=c.shift(),typeof a=="function"){a();continue}b=a.func,typeof b=="number"?a.arg===void 0?f.dynCall_v(b):f.dynCall_vi(b,a.arg):b(a.arg===void 0?null:a.arg)}}bf=[],bN=[],bY=[],a$=[],bK=[],b_=!1,cc=!1;function nz(){if(f.preRun)for(typeof f.preRun=="function"&&(f.preRun=[f.preRun]);f.preRun.length;)nf(f.preRun.shift());aC(bf)}function ny(){b_=!0,!f.noFSInit&&!b.init.initialized&&b.init(),aa.init(),w.root=b.mount(w,{},null),aC(bN)}function ni(){b.ignorePermissions=!1,aC(bY)}function nh(){aC(a$),b.quit(),aa.shutdown(),cc=!0}function ng(){if(f.postRun)for(typeof f.postRun=="function"&&(f.postRun=[f.postRun]);f.postRun.length;)ne(f.postRun.shift());aC(bK)}function nf(a){bf.unshift(a)}function ne(a){bK.unshift(a)}Q=Math.abs,O=Math.ceil,N=Math.floor,R=Math.min,ag=0,aP=null,am=null;function cz(a){return a}function bt(a){ag++,f.monitorRunDependencies&&f.monitorRunDependencies(ag)}function aQ(b){if(ag--,f.monitorRunDependencies&&f.monitorRunDependencies(ag),ag==0)if(aP!==null&&(clearInterval(aP),aP=null),am){var a=am;am=null,a()}}f.preloadedImages={},f.preloadedAudios={};function o(a){throw f.onAbort&&f.onAbort(a),a+="",aJ(a),t(a),ab=!0,bz=1,"abort("+a+"). Build with -s ASSERTIONS=1 for more info."}br="data:application/octet-stream;base64,";function cI(a){return String.prototype.startsWith?a.startsWith(br):a.indexOf(br)===0}ae="godot.javascript.opt.wasm",cI(ae)||(ae=nD(ae));function cC(){try{if(ar)return new Uint8Array(ar);if(aO)return aO(ae);throw"both async and sync fetching of the wasm failed"}catch(a){o(a)}}function nd(){return!ar&&(aj||P)&&typeof fetch=="function"?fetch(ae,{credentials:"same-origin"}).then(function(a){if(!a.ok)throw"failed to load wasm binary file at '"+ae+"'";return a.arrayBuffer()}).catch(function(){return cC()}):new Promise(function(a,b){a(cC())})}function nc(){var a={env:bQ,wasi_unstable:bQ},g;function c(a,c){var b=a.exports;f.asm=b,aQ("wasm-instantiate")}bt("wasm-instantiate");function b(a){c(a.instance)}function d(b){return nd().then(function(b){return WebAssembly.instantiate(b,a)}).then(b,function(a){t("failed to asynchronously prepare wasm: "+a),o(a)})}function e(){if(!ar&&typeof WebAssembly.instantiateStreaming=="function"&&!cI(ae)&&typeof fetch=="function")fetch(ae,{credentials:"same-origin"}).then(function(c){var e=WebAssembly.instantiateStreaming(c,a);return e.then(b,function(a){t("wasm streaming compile failed: "+a),t("falling back to ArrayBuffer instantiation"),d(b)})});else return d(b)}if(f.instantiateWasm)try{return g=f.instantiateWasm(a,c),g}catch(a){return t("Module.instantiateWasm callback failed with error: "+a),!1}return e(),{}}bn=[function(){return window.AudioContext||window.webkitAudioContext?1:0},function(a,b){const c=a,d=b/1e3;return f.IDHandler.add({context:new(window.AudioContext||window.webkitAudioContext)({sampleRate:c,latencyHint:d}),input:null,stream:null,script:null})},function(d,i,e){var b=f.IDHandler.get(d),a;const c=b.context,g=i,h=e;return a=c.createScriptProcessor(g,2,h),a.connect(c.destination),b.script=a,a.bufferSize},function(e,g){var a,d,b;const c=f.IDHandler.get(e);a=g,d=aW("audio_driver_js_mix"),b=aW("audio_driver_process_capture",null,["number"]),c.script.onaudioprocess=function(m){var j,e,o,i,k,f,l,n,g;d(),j=m.inputBuffer,e=m.outputBuffer,o=h.subarray(a/h.BYTES_PER_ELEMENT,a/h.BYTES_PER_ELEMENT+e.length*e.numberOfChannels);for(i=0;i<e.numberOfChannels;i++){k=e.getChannelData(i);for(f=0;f<k.length;f++)k[f]=o[f*e.numberOfChannels+i]}if(c.input){l=j.getChannelData(0),n=j.getChannelData(1);for(g=0;g<l.length;g++)b(l[g]),b(n[g])}}},function(b){const a=f.IDHandler.get(b);a&&a.context&&a.context.resume&&a.context.resume()},function(c){const a=f.IDHandler.get(c);var b=0;if(a&&a.context){const c=a.context;c.baseLatency&&(b+=c.baseLatency),c.outputLatency&&(b+=c.outputLatency)}return b},function(b){const a=f.IDHandler.get(b);return a&&a.context?a.context.sampleRate:0},function(b){const a=f.IDHandler.get(b);return a&&a.context?a.context.destination.channelCount:0},function(c){const b=c;var a=f.IDHandler.get(b);f.async_finish.push(new Promise(function(c,d){if(a){f.IDHandler.remove(b);const d=a.context;a.script.disconnect(),a.input&&a.input.disconnect(),a=null,d.close().then(function(){c()}).catch(function(a){c()})}else console.log("Ref not found!",b,f.IDHandler),setTimeout(c,0)}))},function(c){function a(b){var a=f.IDHandler.get(c);a.stream=b,a.input=a.context.createMediaStreamSource(b),a.input.connect(a.script)}function b(a){aJ(a)}navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia({audio:!0}).then(a,b):(navigator.getUserMedia||(navigator.getUserMedia=navigator.webkitGetUserMedia||navigator.mozGetUserMedia),navigator.getUserMedia({audio:!0},a,b))},function(c){var a=f.IDHandler.get(c),b;if(a.stream){const c=a.stream.getTracks();for(b=0;b<c.length;b++)c[b].stop();a.stream=null}a.input&&(a.input.disconnect(),a.input=null)},function(r,p,o,n,k){var a,e,d,b,g;const f=r,h=p,c=o,i=n,j=k;try{h?(e=eval,a=e(l(f))):a=eval(l(f))}catch(b){t(b),a=null}switch(typeof a){case"boolean":return aB(c,a,"i32"),1;case"number":return aB(c,a,"double"),3;case"string":d=V(a)+1,b=B(d);try{if(b===0)throw new Error("String allocation failed (probably out of memory)");return aB(c,b,"*"),q(a,b,d),4}catch(a){b!==0&&ah(b),t(a)}break;case"object":if(a===null)break;if(ArrayBuffer.isView(a)&&!(a instanceof Uint8Array)?a=new Uint8Array(a.buffer):a instanceof ArrayBuffer&&(a=new Uint8Array(a)),a instanceof Uint8Array)return g=y("resize_poolbytearray_and_open_write","number",["number","number","number"],[i,j,a.length]),m.set(a,g),20;break}return 0},function(a){ah(a)},function(){f.async_finish=[new Promise(function(a,b){setTimeout(a,0)})]},function(){Promise.all(f.async_finish).then(function(){f.async_finish=[],y("cleanup_after_sync",null,[])})},function(a){q("#"+f.canvas.id,a,255)},function(a){q(f.locale,a,16)},function(){b.mkdir("/userfs"),b.mount(u,{},"/userfs")},function(){b.syncfs(!0,function(a){requestAnimationFrame(function(){y("main_after_fs_sync",null,["string"],[a?a.message:""])})})},function(){return f.canvas.getBoundingClientRect().x},function(){return f.canvas.getBoundingClientRect().y},function(){f.canvas.focus()},function(a){f.canvas.style.cursor=l(a)},function(e,i,j){var c=e,f=i,g=j,h=new Blob([m.slice(c,c+f)],{type:"image/png"}),a=URL.createObjectURL(h),b=V(a)+1,d=B(b);aB(g,d,"*"),q(a,d,b)},function(a){URL.revokeObjectURL(l(a).split("?")[0])},function(){return f.canvas.style.cursor==="none"},function(){return document.activeElement==f.canvas},function(){return"ontouchstart"in window},function(a){var b=l(a);return!navigator.clipboard||!navigator.clipboard.writeText?1:(navigator.clipboard.writeText(b).catch(function(a){console.error("Setting OS clipboard is only possible from an input callback for the HTML5 plafrom. Exception:",a)}),0)},function(){try{navigator.clipboard.readText().then(function(a){y("update_clipboard","void",["string"],[a])}).catch(function(a){})}catch(a){}},function(){const a=["Windows","Win64","Win32","WinCE"],b=navigator.platform||"";return a.indexOf(b)!==-1?1:0},function(){const a=f.canvas;(a.requestFullscreen||a.msRequestFullscreen||a.mozRequestFullScreen||a.mozRequestFullscreen||a.webkitRequestFullscreen).call(a)},function(){return f.resizeCanvasOnStart},function(){f.listeners={};const a=f.canvas,c=aW("send_notification",null,["number"]),b=arguments;["mouseover","mouseleave","focus","blur"].forEach(function(d,e){f.listeners[d]=c.bind(null,b[e]),a.addEventListener(d,f.listeners[d])});const d=aW("update_clipboard",null,["string"]);f.listeners.paste=function(a){d(a.clipboardData.getData("text"))},window.addEventListener("paste",f.listeners.paste,!0),f.listeners.dragover=function(a){a.preventDefault()},f.listeners.drop=f.drop_handler,a.addEventListener("dragover",f.listeners.dragover,!1),a.addEventListener("drop",f.listeners.drop,!1),f.request_quit=function(){c(b[b.length-1])}},function(){b.syncfs(function(a){a&&t("Failed to save IDB file system: "+a.message)})},function(){const a=f.canvas;Object.entries(f.listeners).forEach(function(b){b[0]=="paste"?window.removeEventListener(b[0],b[1],!0):a.removeEventListener(b[0],b[1])}),f.listeners={}},function(a){const b=l(a),c=JSON.parse(b);return f.onExecute?(f.onExecute(c),0):1},function(a){window.alert(l(a))},function(a){document.title=l(a)},function(g,c){var b=g,d=c,e=new Blob([m.slice(b,b+d)],{type:"image/png"}),f=URL.createObjectURL(e),a=document.getElementById("-gd-engine-icon");a===null&&(a=document.createElement("link"),a.rel="icon",a.id="-gd-engine-icon",document.head.appendChild(a)),a.href=f},function(a){window.open(l(a),"_blank")},function(c){var b=f.IDHandler.get(c),a;if(!b)return;a=b.channel,a.onopen=null,a.onclose=null,a.onerror=null,a.onmessage=null,a.close()},function(b){var a=f.IDHandler.get(b),c;if(!a)return 3;switch(c=a.channel,c.readyState){case"connecting":return 0;case"open":return 1;case"closing":return 2;case"closed":return 3}return 3},function(h,i,c,e){var g=f.IDHandler.get(h),d=g.channel,b=new Uint8Array(c),a=0,j;for(a=0;a<c;a++)b[a]=cu(i+a,"i8");e?d.send(b.buffer):(j=new TextDecoder("utf-8").decode(b),d.send(j))},function(c){var a=f.IDHandler.get(c),b;return!!(!a||!a.channel)||(b=a.channel.ordered,b===null||b)},function(c){var a=f.IDHandler.get(c),b;return!a||!a.channel?65535:(b=a.channel.id,b===null?65535:b)},function(c){var a=f.IDHandler.get(c),b;return!a||!a.channel?65535:a.channel.maxRetransmitTime!==void 0?a.channel.maxRetransmitTime:(b=a.channel.maxPacketLifeTime,b===null?65535:b)},function(c){var a=f.IDHandler.get(c),b;return!a||!a.channel?65535:(b=a.channel.maxRetransmits,b===null?65535:b)},function(c){var a=f.IDHandler.get(c),b;return!(!a||!a.channel)&&(b=a.channel.negotiated,b!==null&&b)},function(d,e){var a=d,c=f.IDHandler.get(e),b;if(!c)return;b=c.channel,c.ptr=a,b.binaryType="arraybuffer",b.onopen=function(b){y("_emrtc_on_ch_open","void",["number"],[a])},b.onclose=function(b){y("_emrtc_on_ch_close","void",["number"],[a])},b.onerror=function(b){y("_emrtc_on_ch_error","void",["number"],[a])},b.onmessage=function(b){var e=0,c,g,f,d;if(b.data instanceof ArrayBuffer)c=new Uint8Array(b.data);else if(b.data instanceof Blob){console.error("Blob type not supported");return}else if(typeof b.data=="string")e=1,g=new TextEncoder("utf-8"),c=new Uint8Array(g.encode(b.data));else{console.error("Unknown message type");return}f=c.length*c.BYTES_PER_ELEMENT,d=B(f),m.set(c,d),y("_emrtc_on_ch_message","void",["number","number","number","number"],[a,d,f,e]),ah(d)}},function(d){var a=f.IDHandler.get(d),b,e,c;return!a||!a.channel?0:(b=a.channel.label,e=V(b)+1,c=B(b),q(b,c,e+1),c)},function(a){ah(a)},function(d){var a=f.IDHandler.get(d),b,e,c;return!a||!a.channel?0:(b=a.channel.protocol,e=V(b)+1,c=B(b),q(b,c,e+1),c)},function(a){f.IDHandler.remove(a)},function(b){var a=f.IDHandler.get(b),c;if(!a)return 5;switch(c=a.conn,c.iceConnectionState){case"new":return 0;case"checking":return 1;case"connected":case"completed":return 2;case"disconnected":return 3;case"failed":return 4;case"closed":return 5}return 5},function(b,e){var d=f.IDHandler.get(b),c=d.ptr,g=JSON.parse(l(e)),a=null;try{a=new RTCPeerConnection(g)}catch(a){console.log(a);return}a.oniceconnectionstatechange=function(a){if(!f.IDHandler.get(b))return;y("_emrtc_on_connection_state_changed","void",["number"],[c])},a.onicecandidate=function(d){if(!f.IDHandler.get(b))return;if(!d.candidate)return;var a=d.candidate;y("_emrtc_on_ice_candidate","void",["number","string","number","string"],[c,a.sdpMid,a.sdpMLineIndex,a.candidate])},a.ondatachannel=function(a){var d=f.IDHandler.get(b),e;if(!d)return;e=f.IDHandler.add({channel:a.channel,ptr:null}),y("_emrtc_emit_channel","void",["number","number"],[c,e])},d.conn=a},function(b){var a=f.IDHandler.get(b);if(!a)return;a.conn&&a.conn.close()},function(b){var a=f.IDHandler.get(b),c=a.conn,d=a.ptr,e=function(a){console.error(a),y("_emrtc_on_error","void",[],[])},g=function(a){y("_emrtc_session_description_created","void",["number","string","string"],[d,a.type,a.sdp])};c.createOffer().then(g).catch(e)},function(b,c,d){var a=f.IDHandler.get(b),e=a.conn,j=a.ptr,g=l(c),h=l(d),i=function(a){console.error(a),y("_emrtc_on_error","void",[],[])};e.setLocalDescription({sdp:h,type:g}).catch(i)},function(h,d,e){var b=f.IDHandler.get(h),c=b.conn,g=b.ptr,a=l(d),i=l(e),j=function(a){console.error(a),y("_emrtc_on_error","void",[],[])},k=function(a){y("_emrtc_session_description_created","void",["number","string","string"],[g,a.type,a.sdp])},m=function(){if(a!="offer")return;c.createAnswer().then(k)};c.setRemoteDescription({sdp:i,type:a}).then(m).catch(j)},function(b,c,d,e){var a=f.IDHandler.get(b),g=a.conn,k=a.ptr,h=l(c),i=l(d),j=l(e);g.addIceCandidate(new RTCIceCandidate({candidate:j,sdpMid:h,sdpMlineIndex:i}))},function(h,e,g){var a,c,d,b;try{return a=f.IDHandler.get(h),!a?0:(c=l(e),d=JSON.parse(l(g)),b=a.conn,f.IDHandler.add({channel:b.createDataChannel(c,d),ptr:null}))}catch(a){return 0}},function(a){return f.IDHandler.add({conn:null,ptr:a})},function(h,e,c,g){var d=f.IDHandler.get(h),b=new Uint8Array(c),a=0,i;for(a=0;a<c;a++)b[a]=cu(e+a,"i8");try{g?d.send(b.buffer):(i=new TextDecoder("utf-8").decode(b),d.send(i))}catch(a){return 1}return 0},function(a,b,c){var d=f.IDHandler.get(a),e=b,g=l(c);d.close(e,g),f.IDHandler.remove(a)},function(b,d,g){var e=l(g),a=null,c;try{e?a=new WebSocket(l(d),e.split(",")):a=new WebSocket(l(d))}catch(a){return-1}return c=f.IDHandler.get(b),a.binaryType="arraybuffer",a.addEventListener("open",function(d){if(!f.IDHandler.has(b))return;y("_esws_on_connect","void",["number","string"],[c,a.protocol])}),a.addEventListener("message",function(d){var a,g,i,h,e;if(!f.IDHandler.has(b))return;if(g=0,d.data instanceof ArrayBuffer)a=new Uint8Array(d.data);else if(d.data instanceof Blob){alert("Blob type not supported");return}else if(typeof d.data=="string")g=1,i=new TextEncoder("utf-8"),a=new Uint8Array(i.encode(d.data));else{alert("Unknown message type");return}h=a.length*a.BYTES_PER_ELEMENT,e=B(h),m.set(a,e),y("_esws_on_message","void",["number","number","number","number"],[c,e,h,g]),ah(e)}),a.addEventListener("error",function(a){if(!f.IDHandler.has(b))return;y("_esws_on_error","void",["number"],[c])}),a.addEventListener("close",function(a){if(!f.IDHandler.has(b))return;var d=0;a.wasClean&&(d=1),y("_esws_on_close","void",["number","number","string","number"],[c,a.code,a.reason,d])}),f.IDHandler.add(a)},function(a){return f.IDHandler.add(a)},function(a,b,c,e){d.getBufferSubData(a,b,m,c,e)}];function nb(h,i,j){for(var f=cl(i),d=[],g=function(b,a){return b+a-1&~(a-1)},a=j,b=0,c;b<f.length;b++)c=f[b],c=="d"||c=="f"?(a=g(a,8),d.push(z[a>>3]),a+=8):c=="i"&&(a=g(a,4),d.push(e[a>>2]),a+=4);return bn[h].apply(null,d)}function na(h,i,j){for(var f=cl(i),d=[],g=function(b,a){return b+a-1&~(a-1)},a=j,b=0,c;b<f.length;b++)c=f[b],c=="d"||c=="f"?(a=g(a,8),d.push(z[a>>3]),a+=8):c=="i"&&(a=g(a,4),d.push(e[a>>2]),a+=4);return bn[h].apply(null,d)}bN.push({func:function(){bS()}});function m$(a){return a}function m_(a){var b=/\b_Z[\w\d_]+/g;return a.replace(b,function(a){var b=m$(a);return a===b?a:b+" ["+a+"]"})}function mZ(){var a=new Error;if(!a.stack){try{throw new Error(0)}catch(b){a=b}if(!a.stack)return"(no stack trace available)"}return a.stack.toString()}function mY(){var a=mZ();return f.extraStackTrace&&(a+="\n"+f.extraStackTrace()),m_(a)}function mX(a,b){a$.unshift({func:a,arg:b})}function mW(){return mX.apply(null,arguments)}function mV(){}function W(a){return f.___errno_location&&(e[f.___errno_location()>>2]=a),a}function mU(a,b){return W(63),-1}p={splitPath:function(a){var b=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;return b.exec(a).slice(1)},normalizeArray:function(a,e){for(var c=0,b=a.length-1,d;b>=0;b--)d=a[b],d==="."?a.splice(b,1):d===".."?(a.splice(b,1),c++):c&&(a.splice(b,1),c--);if(e)for(;c;c--)a.unshift("..");return a},normalize:function(a){var b=a.charAt(0)==="/",c=a.substr(-1)==="/";return a=p.normalizeArray(a.split("/").filter(function(a){return!!a}),!b).join("/"),!a&&!b&&(a="."),a&&c&&(a+="/"),(b?"/":"")+a},dirname:function(d){var b=p.splitPath(d),c=b[0],a=b[1];return!c&&!a?".":(a&&(a=a.substr(0,a.length-1)),c+a)},basename:function(a){if(a==="/")return"/";var b=a.lastIndexOf("/");return b===-1?a:a.substr(b+1)},extname:function(a){return p.splitPath(a)[3]},join:function(){var a=Array.prototype.slice.call(arguments,0);return p.normalize(a.join("/"))},join2:function(a,b){return p.normalize(a+"/"+b)}},X={resolve:function(){for(var a="",c=!1,d=arguments.length-1,e;d>=-1&&!c;d--){if(e=d>=0?arguments[d]:b.cwd(),typeof e!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!e)return"";a=e+"/"+a,c=e.charAt(0)==="/"}return a=p.normalizeArray(a.split("/").filter(function(a){return!!a}),!c).join("/"),(c?"/":"")+a||"."},relative:function(g,h){var d,e,f,c,a,b;g=X.resolve(g).substr(1),h=X.resolve(h).substr(1);function i(b){for(var a=0,c;a<b.length;a++)if(b[a]!=="")break;for(c=b.length-1;c>=0;c--)if(b[c]!=="")break;return a>c?[]:b.slice(a,c-a+1)}d=i(g.split("/")),e=i(h.split("/")),f=Math.min(d.length,e.length),c=f;for(a=0;a<f;a++)if(d[a]!==e[a]){c=a;break}b=[];for(a=c;a<d.length;a++)b.push("..");return b=b.concat(e.slice(c)),b.join("/")}},aa={ttys:[],init:function(){},shutdown:function(){},register:function(a,c){aa.ttys[a]={input:[],output:[],ops:c},b.registerDevice(a,aa.stream_ops)},stream_ops:{open:function(a){var c=aa.ttys[a.node.rdev];if(!c)throw new b.ErrnoError(43);a.tty=c,a.seekable=!1},close:function(a){a.tty.ops.flush(a.tty)},flush:function(a){a.tty.ops.flush(a.tty)},read:function(c,h,f,g,i){var d,e,a;if(!c.tty||!c.tty.ops.get_char)throw new b.ErrnoError(60);d=0;for(e=0;e<g;e++){try{a=c.tty.ops.get_char(c.tty)}catch(a){throw new b.ErrnoError(29)}if(a===void 0&&d===0)throw new b.ErrnoError(6);if(a===null||a===void 0)break;d++,h[f+e]=a}return d&&(c.node.timestamp=Date.now()),d},write:function(a,e,f,d,g){if(!a.tty||!a.tty.ops.put_char)throw new b.ErrnoError(60);try{for(var c=0;c<d;c++)a.tty.ops.put_char(a.tty,e[f+c])}catch(a){throw new b.ErrnoError(29)}return d&&(a.node.timestamp=Date.now()),c}},default_tty_ops:{get_char:function(b){if(!b.input.length){var a=null;if(typeof window!="undefined"&&typeof window.prompt=="function"?(a=window.prompt("Input: "),a!==null&&(a+="\n")):typeof readline=="function"&&(a=readline(),a!==null&&(a+="\n")),!a)return null;b.input=at(a,!0)}return b.input.shift()},put_char:function(b,a){a===null||a===10?(aJ(an(b.output,0)),b.output=[]):a!=0&&b.output.push(a)},flush:function(a){a.output&&a.output.length>0&&(aJ(an(a.output,0)),a.output=[])}},default_tty1_ops:{put_char:function(b,a){a===null||a===10?(t(an(b.output,0)),b.output=[]):a!=0&&b.output.push(a)},flush:function(a){a.output&&a.output.length>0&&(t(an(a.output,0)),a.output=[])}}},n={ops_table:null,mount:function(a){return n.createNode(null,"/",16384|511,0)},createNode:function(c,e,d,f){if(b.isBlkdev(d)||b.isFIFO(d))throw new b.ErrnoError(63);n.ops_table||(n.ops_table={dir:{node:{getattr:n.node_ops.getattr,setattr:n.node_ops.setattr,lookup:n.node_ops.lookup,mknod:n.node_ops.mknod,rename:n.node_ops.rename,unlink:n.node_ops.unlink,rmdir:n.node_ops.rmdir,readdir:n.node_ops.readdir,symlink:n.node_ops.symlink},stream:{llseek:n.stream_ops.llseek}},file:{node:{getattr:n.node_ops.getattr,setattr:n.node_ops.setattr},stream:{llseek:n.stream_ops.llseek,read:n.stream_ops.read,write:n.stream_ops.write,allocate:n.stream_ops.allocate,mmap:n.stream_ops.mmap,msync:n.stream_ops.msync}},link:{node:{getattr:n.node_ops.getattr,setattr:n.node_ops.setattr,readlink:n.node_ops.readlink},stream:{}},chrdev:{node:{getattr:n.node_ops.getattr,setattr:n.node_ops.setattr},stream:b.chrdev_stream_ops}});var a=b.createNode(c,e,d,f);return b.isDir(a.mode)?(a.node_ops=n.ops_table.dir.node,a.stream_ops=n.ops_table.dir.stream,a.contents={}):b.isFile(a.mode)?(a.node_ops=n.ops_table.file.node,a.stream_ops=n.ops_table.file.stream,a.usedBytes=0,a.contents=null):b.isLink(a.mode)?(a.node_ops=n.ops_table.link.node,a.stream_ops=n.ops_table.link.stream):b.isChrdev(a.mode)&&(a.node_ops=n.ops_table.chrdev.node,a.stream_ops=n.ops_table.chrdev.stream),a.timestamp=Date.now(),c&&(c.contents[e]=a),a},getFileDataAsRegularArray:function(a){var c,b;if(a.contents&&a.contents.subarray){c=[];for(b=0;b<a.usedBytes;++b)c.push(a.contents[b]);return c}return a.contents},getFileDataAsTypedArray:function(a){return a.contents?a.contents.subarray?a.contents.subarray(0,a.usedBytes):new Uint8Array(a.contents):new Uint8Array},expandFileStorage:function(a,b){var c=a.contents?a.contents.length:0,d,e;if(c>=b)return;d=1024*1024,b=Math.max(b,c*(c<d?2:1.125)|0),c!=0&&(b=Math.max(b,256)),e=a.contents,a.contents=new Uint8Array(b),a.usedBytes>0&&a.contents.set(e.subarray(0,a.usedBytes),0)},resizeFileStorage:function(a,b){if(a.usedBytes==b)return;if(b==0){a.contents=null,a.usedBytes=0;return}if(!a.contents||a.contents.subarray){var c=a.contents;a.contents=new Uint8Array(new ArrayBuffer(b)),c&&a.contents.set(c.subarray(0,Math.min(b,a.usedBytes))),a.usedBytes=b;return}if(a.contents||(a.contents=[]),a.contents.length>b)a.contents.length=b;else while(a.contents.length<b)a.contents.push(0);a.usedBytes=b},node_ops:{getattr:function(c){var a={};return a.dev=b.isChrdev(c.mode)?c.id:1,a.ino=c.id,a.mode=c.mode,a.nlink=1,a.uid=0,a.gid=0,a.rdev=c.rdev,b.isDir(c.mode)?a.size=4096:b.isFile(c.mode)?a.size=c.usedBytes:b.isLink(c.mode)?a.size=c.link.length:a.size=0,a.atime=new Date(c.timestamp),a.mtime=new Date(c.timestamp),a.ctime=new Date(c.timestamp),a.blksize=4096,a.blocks=Math.ceil(a.size/a.blksize),a},setattr:function(b,a){a.mode!==void 0&&(b.mode=a.mode),a.timestamp!==void 0&&(b.timestamp=a.timestamp),a.size!==void 0&&n.resizeFileStorage(b,a.size)},lookup:function(a,c){throw b.genericErrors[44]},mknod:function(a,b,c,d){return n.createNode(a,b,c,d)},rename:function(a,d,e){var c,f;if(b.isDir(a.mode)){try{c=b.lookupNode(d,e)}catch(a){}if(c)for(f in c.contents)throw new b.ErrnoError(55)}delete a.parent.contents[a.name],a.name=e,d.contents[e]=a,a.parent=d},unlink:function(a,b){delete a.contents[b]},rmdir:function(a,c){var d=b.lookupNode(a,c),e;for(e in d.contents)throw new b.ErrnoError(55);delete a.contents[c]},readdir:function(a){var b=[".",".."],c;for(c in a.contents){if(!a.contents.hasOwnProperty(c))continue;b.push(c)}return b},symlink:function(b,c,d){var a=n.createNode(b,c,511|40960,0);return a.link=d,a},readlink:function(a){if(!b.isLink(a.mode))throw new b.ErrnoError(28);return a.link}},stream_ops:{read:function(e,g,f,h,a){var d=e.node.contents,b,c;if(a>=e.node.usedBytes)return 0;if(b=Math.min(e.node.usedBytes-a,h),b>8&&d.subarray)g.set(d.subarray(a,a+b),f);else for(c=0;c<b;c++)g[f+c]=d[a+c];return b},write:function(h,d,c,b,e,g){var a,f;if(g=!1,!b)return 0;if(a=h.node,a.timestamp=Date.now(),d.subarray&&(!a.contents||a.contents.subarray)){if(g)return a.contents=d.subarray(c,c+b),a.usedBytes=b,b;if(a.usedBytes===0&&e===0)return a.contents=new Uint8Array(d.subarray(c,c+b)),a.usedBytes=b,b;if(e+b<=a.usedBytes)return a.contents.set(d.subarray(c,c+b),e),b}if(n.expandFileStorage(a,e+b),a.contents.subarray&&d.subarray)a.contents.set(d.subarray(c,c+b),e);else for(f=0;f<b;f++)a.contents[e+f]=d[c+f];return a.usedBytes=Math.max(a.usedBytes,e+b),b},llseek:function(c,e,d){var a=e;if(d===1?a+=c.position:d===2&&b.isFile(c.node.mode)&&(a+=c.node.usedBytes),a<0)throw new b.ErrnoError(28);return a},allocate:function(a,b,c){n.expandFileStorage(a.node,b+c),a.node.usedBytes=Math.max(a.node.usedBytes,b+c)},mmap:function(h,f,l,g,d,k,j){var c,e,a,i;if(!b.isFile(h.node.mode))throw new b.ErrnoError(43);if(a=h.node.contents,!(j&2)&&(a.buffer===f||a.buffer===f.buffer))e=!1,c=a.byteOffset;else{if((d>0||d+g<h.node.usedBytes)&&(a.subarray?a=a.subarray(d,d+g):a=Array.prototype.slice.call(a,d,d+g)),e=!0,i=f.buffer==s.buffer,c=B(g),!c)throw new b.ErrnoError(48);(i?s:f).set(a,c)}return{ptr:c,allocated:e}},msync:function(a,c,d,e,f){if(!b.isFile(a.node.mode))throw new b.ErrnoError(43);if(f&2)return 0;var g=n.stream_ops.write(a,c,0,e,d,!1);return 0}}},u={dbs:{},indexedDB:function(){if(typeof indexedDB!="undefined")return indexedDB;var a=null;return typeof window=="object"&&(a=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB),M(a,"IDBFS used, but indexedDB not supported"),a},DB_VERSION:21,DB_STORE_NAME:"FILE_DATA",mount:function(a){return n.mount.apply(null,arguments)},syncfs:function(b,c,a){u.getLocalSet(b,function(d,e){if(d)return a(d);u.getRemoteSet(b,function(b,d){var f,g;if(b)return a(b);f=c?d:e,g=c?e:d,u.reconcile(f,g,a)})})},getDB:function(d,b){var c=u.dbs[d],a;if(c)return b(null,c);try{a=u.indexedDB().open(d,u.DB_VERSION)}catch(a){return b(a)}if(!a)return b("Unable to connect to IndexedDB");a.onupgradeneeded=function(b){var c=b.target.result,d=b.target.transaction,a;c.objectStoreNames.contains(u.DB_STORE_NAME)?a=d.objectStore(u.DB_STORE_NAME):a=c.createObjectStore(u.DB_STORE_NAME),a.indexNames.contains("timestamp")||a.createIndex("timestamp","timestamp",{unique:!1})},a.onsuccess=function(){c=a.result,u.dbs[d]=c,b(null,c)},a.onerror=function(a){b(this.error),a.preventDefault()}},getLocalSet:function(h,i){var e={},c,a,d;function f(a){return a!=="."&&a!==".."}function g(a){return function(b){return p.join2(a,b)}}for(c=b.readdir(h.mountpoint).filter(f).map(g(h.mountpoint));c.length;){a=c.pop();try{d=b.stat(a)}catch(a){return i(a)}b.isDir(d.mode)&&c.push.apply(c,b.readdir(a).filter(f).map(g(a))),e[a]={timestamp:d.mtime}}return i(null,{type:"local",entries:e})},getRemoteSet:function(c,a){var b={};u.getDB(c.mountpoint,function(d,e){var c,f,g;if(d)return a(d);try{c=e.transaction([u.DB_STORE_NAME],"readonly"),c.onerror=function(b){a(this.error),b.preventDefault()},f=c.objectStore(u.DB_STORE_NAME),g=f.index("timestamp"),g.openKeyCursor().onsuccess=function(d){var c=d.target.result;if(!c)return a(null,{type:"remote",db:e,entries:b});b[c.primaryKey]={timestamp:c.key},c.continue()}}catch(b){return a(b)}})},loadLocalEntry:function(e,c){var a,d,f;try{f=b.lookupPath(e),d=f.node,a=b.stat(e)}catch(a){return c(a)}return b.isDir(a.mode)?c(null,{timestamp:a.mtime,mode:a.mode}):b.isFile(a.mode)?(d.contents=n.getFileDataAsTypedArray(d),c(null,{timestamp:a.mtime,mode:a.mode,contents:d.contents})):c(new Error("node type not supported"))},storeLocalEntry:function(c,a,d){try{if(b.isDir(a.mode))b.mkdir(c,a.mode);else if(b.isFile(a.mode))b.writeFile(c,a.contents,{canOwn:!0});else return d(new Error("node type not supported"));b.chmod(c,a.mode),b.utime(c,a.timestamp,a.timestamp)}catch(a){return d(a)}d(null)},removeLocalEntry:function(a,d){var e,c;try{e=b.lookupPath(a),c=b.stat(a),b.isDir(c.mode)?b.rmdir(a):b.isFile(c.mode)&&b.unlink(a)}catch(a){return d(a)}d(null)},loadRemoteEntry:function(c,d,a){var b=c.get(d);b.onsuccess=function(b){a(null,b.target.result)},b.onerror=function(b){a(this.error),b.preventDefault()}},storeRemoteEntry:function(c,d,e,a){var b=c.put(e,d);b.onsuccess=function(){a(null)},b.onerror=function(b){a(this.error),b.preventDefault()}},removeRemoteEntry:function(c,d,a){var b=c.delete(d);b.onsuccess=function(){a(null)},b.onerror=function(b){a(this.error),b.preventDefault()}},reconcile:function(c,b,d){var e=0,j=[],i,f,k,g,h;if(Object.keys(c.entries).forEach(function(a){var f=c.entries[a],d=b.entries[a];(!d||f.timestamp>d.timestamp)&&(j.push(a),e++)}),i=[],Object.keys(b.entries).forEach(function(a){var f=b.entries[a],d=c.entries[a];d||(i.push(a),e++)}),!e)return d(null);f=!1,k=c.type==="remote"?c.db:b.db,g=k.transaction([u.DB_STORE_NAME],"readwrite"),h=g.objectStore(u.DB_STORE_NAME);function a(a){if(a&&!f)return f=!0,d(a)}g.onerror=function(b){a(this.error),b.preventDefault()},g.oncomplete=function(a){f||d(null)},j.sort().forEach(function(c){b.type==="local"?u.loadRemoteEntry(h,c,function(b,d){if(b)return a(b);u.storeLocalEntry(c,d,a)}):u.loadLocalEntry(c,function(b,d){if(b)return a(b);u.storeRemoteEntry(h,c,d,a)})}),i.sort().reverse().forEach(function(c){b.type==="local"?u.removeLocalEntry(c,a):u.removeRemoteEntry(h,c,a)})}},A={DIR_MODE:16895,FILE_MODE:33279,reader:null,mount:function(b){var c,a;M(P),A.reader||(A.reader=new FileReaderSync),c=A.createNode(null,"/",A.DIR_MODE,0),a={};function d(g){for(var d=g.split("/"),e=c,b=0,f;b<d.length-1;b++)f=d.slice(0,b+1).join("/"),a[f]||(a[f]=A.createNode(e,d[b],A.DIR_MODE,0)),e=a[f];return e}function e(b){var a=b.split("/");return a[a.length-1]}return Array.prototype.forEach.call(b.opts.files||[],function(a){A.createNode(d(a.name),e(a.name),A.FILE_MODE,0,a,a.lastModifiedDate)}),(b.opts.blobs||[]).forEach(function(a){A.createNode(d(a.name),e(a.name),A.FILE_MODE,0,a.data)}),(b.opts.packages||[]).forEach(function(a){a.metadata.files.forEach(function(b){var c=b.filename.substr(1);A.createNode(d(c),e(c),A.FILE_MODE,0,a.blob.slice(b.start,b.end))})}),c},createNode:function(d,e,c,h,f,g){var a=b.createNode(d,e,c);return a.mode=c,a.node_ops=A.node_ops,a.stream_ops=A.stream_ops,a.timestamp=(g||new Date).getTime(),M(A.FILE_MODE!==A.DIR_MODE),c===A.FILE_MODE?(a.size=f.size,a.contents=f):(a.size=4096,a.contents={}),d&&(d.contents[e]=a),a},node_ops:{getattr:function(a){return{dev:1,ino:void 0,mode:a.mode,nlink:1,uid:0,gid:0,rdev:void 0,size:a.size,atime:new Date(a.timestamp),mtime:new Date(a.timestamp),ctime:new Date(a.timestamp),blksize:4096,blocks:Math.ceil(a.size/4096)}},setattr:function(b,a){a.mode!==void 0&&(b.mode=a.mode),a.timestamp!==void 0&&(b.timestamp=a.timestamp)},lookup:function(a,c){throw new b.ErrnoError(44)},mknod:function(a,c,d,e){throw new b.ErrnoError(63)},rename:function(a,c,d){throw new b.ErrnoError(63)},unlink:function(a,c){throw new b.ErrnoError(63)},rmdir:function(a,c){throw new b.ErrnoError(63)},readdir:function(a){var b=[".",".."],c;for(c in a.contents){if(!a.contents.hasOwnProperty(c))continue;b.push(c)}return b},symlink:function(a,c,d){throw new b.ErrnoError(63)},readlink:function(a){throw new b.ErrnoError(63)}},stream_ops:{read:function(c,e,f,g,a){var b,d;return a>=c.node.size?0:(b=c.node.contents.slice(a,a+g),d=A.reader.readAsArrayBuffer(b),e.set(new Uint8Array(d),f),b.size)},write:function(a,c,d,e,f){throw new b.ErrnoError(29)},llseek:function(c,e,d){var a=e;if(d===1?a+=c.position:d===2&&b.isFile(c.node.mode)&&(a+=c.node.size),a<0)throw new b.ErrnoError(28);return a}}},b={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,trackingDelegate:{},tracking:{openFlags:{READ:1,WRITE:2}},ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,handleFSError:function(a){if(!(a instanceof b.ErrnoError))throw a+" : "+mY();return W(a.errno)},lookupPath:function(i,a){var j,h,g,c,d,e,f,k,l,m;if(i=X.resolve(b.cwd(),i),a=a||{},!i)return{path:"",node:null};j={follow_mount:!0,recurse_count:0};for(h in j)a[h]===void 0&&(a[h]=j[h]);if(a.recurse_count>8)throw new b.ErrnoError(32);g=p.normalizeArray(i.split("/").filter(function(a){return!!a}),!1),c=b.root,d="/";for(e=0;e<g.length;e++){if(f=e===g.length-1,f&&a.parent)break;if(c=b.lookupNode(c,g[e]),d=p.join2(d,g[e]),b.isMountpoint(c)&&(!f||f&&a.follow_mount)&&(c=c.mounted.root),!f||a.follow)for(k=0;b.isLink(c.mode);)if(l=b.readlink(d),d=X.resolve(p.dirname(d),l),m=b.lookupPath(d,{recurse_count:a.recurse_count}),c=m.node,k++>40)throw new b.ErrnoError(32)}return{path:d,node:c}},getPath:function(a){for(var c,d;!0;){if(b.isRoot(a))return d=a.mount.mountpoint,!c?d:d[d.length-1]!=="/"?d+"/"+c:d+c;c=c?a.name+"/"+c:a.name,a=a.parent}},hashName:function(e,d){for(var a=0,c=0;c<d.length;c++)a=(a<<5)-a+d.charCodeAt(c)|0;return(e+a>>>0)%b.nameTable.length},hashAddNode:function(a){var c=b.hashName(a.parent.id,a.name);a.name_next=b.nameTable[c],b.nameTable[c]=a},hashRemoveNode:function(a){var d=b.hashName(a.parent.id,a.name),c;if(b.nameTable[d]===a)b.nameTable[d]=a.name_next;else for(c=b.nameTable[d];c;){if(c.name_next===a){c.name_next=a.name_next;break}c=c.name_next}},lookupNode:function(c,d){var e=b.mayLookup(c),f,a,g;if(e)throw new b.ErrnoError(e,c);f=b.hashName(c.id,d);for(a=b.nameTable[f];a;a=a.name_next)if(g=a.name,a.parent.id===c.id&&g===d)return a;return b.lookup(c,d)},createNode:function(h,e,f,g){var a,c,d;return b.FSNode||(b.FSNode=function(a,c,d,e){a||(a=this),this.parent=a,this.mount=a.mount,this.mounted=null,this.id=b.nextInode++,this.name=c,this.mode=d,this.node_ops={},this.stream_ops={},this.rdev=e},b.FSNode.prototype={},a=292|73,c=146,Object.defineProperties(b.FSNode.prototype,{read:{get:function(){return(this.mode&a)===a},set:function(b){b?this.mode|=a:this.mode&=~a}},write:{get:function(){return(this.mode&c)===c},set:function(a){a?this.mode|=c:this.mode&=~c}},isFolder:{get:function(){return b.isDir(this.mode)}},isDevice:{get:function(){return b.isChrdev(this.mode)}}})),d=new b.FSNode(h,e,f,g),b.hashAddNode(d),d},destroyNode:function(a){b.hashRemoveNode(a)},isRoot:function(a){return a===a.parent},isMountpoint:function(a){return!!a.mounted},isFile:function(a){return(a&61440)===32768},isDir:function(a){return(a&61440)===16384},isLink:function(a){return(a&61440)===40960},isChrdev:function(a){return(a&61440)===8192},isBlkdev:function(a){return(a&61440)===24576},isFIFO:function(a){return(a&61440)===4096},isSocket:function(a){return(a&49152)===49152},flagModes:{r:0,rs:1052672,"r+":2,w:577,wx:705,xw:705,"w+":578,"wx+":706,"xw+":706,a:1089,ax:1217,xa:1217,"a+":1090,"ax+":1218,"xa+":1218},modeStringToFlags:function(a){var c=b.flagModes[a];if(typeof c=="undefined")throw new Error("Unknown file open mode: "+a);return c},flagsToPermissionString:function(a){var b=["r","w","rw"][a&3];return a&512&&(b+="w"),b},nodePermissions:function(a,c){return b.ignorePermissions?0:c.indexOf("r")!==-1&&!(a.mode&292)?2:c.indexOf("w")!==-1&&!(a.mode&146)?2:c.indexOf("x")!==-1&&!(a.mode&73)?2:0},mayLookup:function(a){var c=b.nodePermissions(a,"x");return c?c:a.node_ops.lookup?0:2},mayCreate:function(a,c){try{var d=b.lookupNode(a,c);return 20}catch(a){}return b.nodePermissions(a,"wx")},mayDelete:function(c,e,f){var a,d;try{a=b.lookupNode(c,e)}catch(a){return a.errno}if(d=b.nodePermissions(c,"wx"),d)return d;if(f){{if(!b.isDir(a.mode))return 54;if(b.isRoot(a)||b.getPath(a)===b.cwd())return 10}}else if(b.isDir(a.mode))return 31;return 0},mayOpen:function(a,c){if(!a)return 44;if(b.isLink(a.mode))return 32;if(b.isDir(a.mode))if(b.flagsToPermissionString(c)!=="r"||c&512)return 31;return b.nodePermissions(a,b.flagsToPermissionString(c))},MAX_OPEN_FDS:4096,nextfd:function(c,d){c=c||0,d=d||b.MAX_OPEN_FDS;for(var a=c;a<=d;a++)if(!b.streams[a])return a;throw new b.ErrnoError(33)},getStream:function(a){return b.streams[a]},createStream:function(a,f,g){var c,d,e;b.FSStream||(b.FSStream=function(){},b.FSStream.prototype={},Object.defineProperties(b.FSStream.prototype,{object:{get:function(){return this.node},set:function(a){this.node=a}},isRead:{get:function(){return(this.flags&2097155)!==1}},isWrite:{get:function(){return(this.flags&2097155)!==0}},isAppend:{get:function(){return this.flags&1024}}})),c=new b.FSStream;for(d in a)c[d]=a[d];return a=c,e=b.nextfd(f,g),a.fd=e,b.streams[e]=a,a},closeStream:function(a){b.streams[a]=null},chrdev_stream_ops:{open:function(a){var c=b.getDevice(a.node.rdev);a.stream_ops=c.stream_ops,a.stream_ops.open&&a.stream_ops.open(a)},llseek:function(){throw new b.ErrnoError(70)}},major:function(a){return a>>8},minor:function(a){return a&255},makedev:function(a,b){return a<<8|b},registerDevice:function(a,c){b.devices[a]={stream_ops:c}},getDevice:function(a){return b.devices[a]},getMounts:function(d){for(var b=[],a=[d],c;a.length;)c=a.pop(),b.push(c),a.push.apply(a,c.mounts);return b},syncfs:function(a,e){var d,f;typeof a=="function"&&(e=a,a=!1),b.syncFSRequests++,b.syncFSRequests>1&&console.log("warning: "+b.syncFSRequests+" FS.syncfs operations in flight at once, probably just doing extra work"),d=b.getMounts(b.root.mount),f=0;function g(a){return b.syncFSRequests--,e(a)}function c(a){if(a){if(!c.errored)return c.errored=!0,g(a);return}++f>=d.length&&g(null)}d.forEach(function(b){if(!b.type.syncfs)return c(null);b.type.syncfs(b,a,c)})},mount:function(g,j,d){var f=d==="/",i=!d,a,h,c,e;if(f&&b.root)throw new b.ErrnoError(10);if(!f&&!i){if(h=b.lookupPath(d,{follow_mount:!1}),d=h.path,a=h.node,b.isMountpoint(a))throw new b.ErrnoError(10);if(!b.isDir(a.mode))throw new b.ErrnoError(54)}return c={type:g,opts:j,mountpoint:d,mounts:[]},e=g.mount(c),e.mount=c,c.root=e,f?b.root=e:a&&(a.mounted=c,a.mount&&a.mount.mounts.push(c)),e},unmount:function(e){var c=b.lookupPath(e,{follow_mount:!1}),a,d,f,g;if(!b.isMountpoint(c.node))throw new b.ErrnoError(28);a=c.node,d=a.mounted,f=b.getMounts(d),Object.keys(b.nameTable).forEach(function(c){for(var a=b.nameTable[c],d;a;)d=a.name_next,f.indexOf(a.mount)!==-1&&b.destroyNode(a),a=d}),a.mounted=null,g=a.mount.mounts.indexOf(d),a.mount.mounts.splice(g,1)},lookup:function(a,b){return a.node_ops.lookup(a,b)},mknod:function(d,f,g){var h=b.lookupPath(d,{parent:!0}),c=h.node,a=p.basename(d),e;if(!a||a==="."||a==="..")throw new b.ErrnoError(28);if(e=b.mayCreate(c,a),e)throw new b.ErrnoError(e);if(!c.node_ops.mknod)throw new b.ErrnoError(63);return c.node_ops.mknod(c,a,f,g)},create:function(c,a){return a=a!==void 0?a:438,a&=4095,a|=32768,b.mknod(c,a,0)},mkdir:function(c,a){return a=a!==void 0?a:511,a&=511|512,a|=16384,b.mknod(c,a,0)},mkdirTree:function(e,f){for(var c=e.split("/"),d="",a=0;a<c.length;++a){if(!c[a])continue;d+="/"+c[a];try{b.mkdir(d,f)}catch(a){if(a.errno!=20)throw a}}},mkdev:function(d,a,c){return typeof c=="undefined"&&(c=a,a=438),a|=8192,b.mknod(d,a,c)},symlink:function(e,f){var g,a,c,d;if(!X.resolve(e))throw new b.ErrnoError(44);if(g=b.lookupPath(f,{parent:!0}),a=g.node,!a)throw new b.ErrnoError(44);if(c=p.basename(f),d=b.mayCreate(a,c),d)throw new b.ErrnoError(d);if(!a.node_ops.symlink)throw new b.ErrnoError(63);return a.node_ops.symlink(a,c,e)},rename:function(e,c){var n=p.dirname(e),o=p.dirname(c),l=p.basename(e),j=p.basename(c),i,a,d,g,k,h,m,f;try{i=b.lookupPath(e,{parent:!0}),a=i.node,i=b.lookupPath(c,{parent:!0}),d=i.node}catch(a){throw new b.ErrnoError(10)}if(!a||!d)throw new b.ErrnoError(44);if(a.mount!==d.mount)throw new b.ErrnoError(75);if(g=b.lookupNode(a,l),k=X.relative(e,o),k.charAt(0)!==".")throw new b.ErrnoError(28);if(k=X.relative(c,n),k.charAt(0)!==".")throw new b.ErrnoError(55);try{h=b.lookupNode(d,j)}catch(a){}if(g===h)return;if(m=b.isDir(g.mode),f=b.mayDelete(a,l,m),f)throw new b.ErrnoError(f);if(f=h?b.mayDelete(d,j,m):b.mayCreate(d,j),f)throw new b.ErrnoError(f);if(!a.node_ops.rename)throw new b.ErrnoError(63);if(b.isMountpoint(g)||h&&b.isMountpoint(h))throw new b.ErrnoError(10);if(d!==a)if(f=b.nodePermissions(a,"w"),f)throw new b.ErrnoError(f);try{b.trackingDelegate.willMovePath&&b.trackingDelegate.willMovePath(e,c)}catch(a){console.log("FS.trackingDelegate['willMovePath']('"+e+"', '"+c+"') threw an exception: "+a.message)}b.hashRemoveNode(g);try{a.node_ops.rename(g,d,j)}catch(a){throw a}finally{b.hashAddNode(g)}try{b.trackingDelegate.onMovePath&&b.trackingDelegate.onMovePath(e,c)}catch(a){console.log("FS.trackingDelegate['onMovePath']('"+e+"', '"+c+"') threw an exception: "+a.message)}},rmdir:function(a){var g=b.lookupPath(a,{parent:!0}),c=g.node,d=p.basename(a),e=b.lookupNode(c,d),f=b.mayDelete(c,d,!0);if(f)throw new b.ErrnoError(f);if(!c.node_ops.rmdir)throw new b.ErrnoError(63);if(b.isMountpoint(e))throw new b.ErrnoError(10);try{b.trackingDelegate.willDeletePath&&b.trackingDelegate.willDeletePath(a)}catch(b){console.log("FS.trackingDelegate['willDeletePath']('"+a+"') threw an exception: "+b.message)}c.node_ops.rmdir(c,d),b.destroyNode(e);try{b.trackingDelegate.onDeletePath&&b.trackingDelegate.onDeletePath(a)}catch(b){console.log("FS.trackingDelegate['onDeletePath']('"+a+"') threw an exception: "+b.message)}},readdir:function(c){var d=b.lookupPath(c,{follow:!0}),a=d.node;if(!a.node_ops.readdir)throw new b.ErrnoError(54);return a.node_ops.readdir(a)},unlink:function(a){var g=b.lookupPath(a,{parent:!0}),c=g.node,d=p.basename(a),e=b.lookupNode(c,d),f=b.mayDelete(c,d,!1);if(f)throw new b.ErrnoError(f);if(!c.node_ops.unlink)throw new b.ErrnoError(63);if(b.isMountpoint(e))throw new b.ErrnoError(10);try{b.trackingDelegate.willDeletePath&&b.trackingDelegate.willDeletePath(a)}catch(b){console.log("FS.trackingDelegate['willDeletePath']('"+a+"') threw an exception: "+b.message)}c.node_ops.unlink(c,d),b.destroyNode(e);try{b.trackingDelegate.onDeletePath&&b.trackingDelegate.onDeletePath(a)}catch(b){console.log("FS.trackingDelegate['onDeletePath']('"+a+"') threw an exception: "+b.message)}},readlink:function(c){var d=b.lookupPath(c),a=d.node;if(!a)throw new b.ErrnoError(44);if(!a.node_ops.readlink)throw new b.ErrnoError(28);return X.resolve(b.getPath(a.parent),a.node_ops.readlink(a))},stat:function(c,d){var e=b.lookupPath(c,{follow:!d}),a=e.node;if(!a)throw new b.ErrnoError(44);if(!a.node_ops.getattr)throw new b.ErrnoError(63);return a.node_ops.getattr(a)},lstat:function(a){return b.stat(a,!0)},chmod:function(c,d,e){var a,f;if(typeof c=="string"?(f=b.lookupPath(c,{follow:!e}),a=f.node):a=c,!a.node_ops.setattr)throw new b.ErrnoError(63);a.node_ops.setattr(a,{mode:d&4095|a.mode&~4095,timestamp:Date.now()})},lchmod:function(a,c){b.chmod(a,c,!0)},fchmod:function(c,d){var a=b.getStream(c);if(!a)throw new b.ErrnoError(8);b.chmod(a.node,d)},chown:function(c,f,g,d){var a,e;if(typeof c=="string"?(e=b.lookupPath(c,{follow:!d}),a=e.node):a=c,!a.node_ops.setattr)throw new b.ErrnoError(63);a.node_ops.setattr(a,{timestamp:Date.now()})},lchown:function(a,c,d){b.chown(a,c,d,!0)},fchown:function(c,d,e){var a=b.getStream(c);if(!a)throw new b.ErrnoError(8);b.chown(a.node,d,e)},truncate:function(c,e){var a,f,d;if(e<0)throw new b.ErrnoError(28);if(typeof c=="string"?(f=b.lookupPath(c,{follow:!0}),a=f.node):a=c,!a.node_ops.setattr)throw new b.ErrnoError(63);if(b.isDir(a.mode))throw new b.ErrnoError(31);if(!b.isFile(a.mode))throw new b.ErrnoError(28);if(d=b.nodePermissions(a,"w"),d)throw new b.ErrnoError(d);a.node_ops.setattr(a,{size:e,timestamp:Date.now()})},ftruncate:function(c,d){var a=b.getStream(c);if(!a)throw new b.ErrnoError(8);if((a.flags&2097155)===0)throw new b.ErrnoError(28);b.truncate(a.node,d)},utime:function(c,d,e){var f=b.lookupPath(c,{follow:!0}),a=f.node;a.node_ops.setattr(a,{timestamp:Math.max(d,e)})},open:function(d,a,e,l,m){var c,k,i,j,g,h;if(d==="")throw new b.ErrnoError(44);if(a=typeof a=="string"?b.modeStringToFlags(a):a,e=typeof e=="undefined"?438:e,a&64?e=e&4095|32768:e=0,typeof d=="object")c=d;else{d=p.normalize(d);try{k=b.lookupPath(d,{follow:!(a&131072)}),c=k.node}catch(a){}}if(i=!1,a&64)if(c){if(a&128)throw new b.ErrnoError(20)}else c=b.mknod(d,e,0),i=!0;if(!c)throw new b.ErrnoError(44);if(b.isChrdev(c.mode)&&(a&=~512),a&65536&&!b.isDir(c.mode))throw new b.ErrnoError(54);if(!i)if(j=b.mayOpen(c,a),j)throw new b.ErrnoError(j);a&512&&b.truncate(c,0),a&=~(128|512),g=b.createStream({node:c,path:b.getPath(c),flags:a,seekable:!0,position:0,stream_ops:c.stream_ops,ungotten:[],error:!1},l,m),g.stream_ops.open&&g.stream_ops.open(g),f.logReadFiles&&!(a&1)&&(b.readFiles||(b.readFiles={}),d in b.readFiles||(b.readFiles[d]=1,console.log("FS.trackingDelegate error on read file: "+d)));try{b.trackingDelegate.onOpenFile&&(h=0,(a&2097155)!==1&&(h|=b.tracking.openFlags.READ),(a&2097155)!==0&&(h|=b.tracking.openFlags.WRITE),b.trackingDelegate.onOpenFile(d,h))}catch(a){console.log("FS.trackingDelegate['onOpenFile']('"+d+"', flags) threw an exception: "+a.message)}return g},close:function(a){if(b.isClosed(a))throw new b.ErrnoError(8);a.getdents&&(a.getdents=null);try{a.stream_ops.close&&a.stream_ops.close(a)}catch(a){throw a}finally{b.closeStream(a.fd)}a.fd=null},isClosed:function(a){return a.fd===null},llseek:function(a,d,c){if(b.isClosed(a))throw new b.ErrnoError(8);if(!a.seekable||!a.stream_ops.llseek)throw new b.ErrnoError(70);if(c!=0&&c!=1&&c!=2)throw new b.ErrnoError(28);return a.position=a.stream_ops.llseek(a,d,c),a.ungotten=[],a.position},read:function(a,g,h,f,c){var d,e;if(f<0||c<0)throw new b.ErrnoError(28);if(b.isClosed(a))throw new b.ErrnoError(8);if((a.flags&2097155)===1)throw new b.ErrnoError(8);if(b.isDir(a.node.mode))throw new b.ErrnoError(31);if(!a.stream_ops.read)throw new b.ErrnoError(28);if(d=typeof c!="undefined",d){if(!a.seekable)throw new b.ErrnoError(70)}else c=a.position;return e=a.stream_ops.read(a,g,h,f,c),d||(a.position+=e),e},write:function(a,i,g,f,c,h){var e,d;if(f<0||c<0)throw new b.ErrnoError(28);if(b.isClosed(a))throw new b.ErrnoError(8);if((a.flags&2097155)===0)throw new b.ErrnoError(8);if(b.isDir(a.node.mode))throw new b.ErrnoError(31);if(!a.stream_ops.write)throw new b.ErrnoError(28);if(a.flags&1024&&b.llseek(a,0,2),e=typeof c!="undefined",e){if(!a.seekable)throw new b.ErrnoError(70)}else c=a.position;d=a.stream_ops.write(a,i,g,f,c,h),e||(a.position+=d);try{a.path&&b.trackingDelegate.onWriteToFile&&b.trackingDelegate.onWriteToFile(a.path)}catch(b){console.log("FS.trackingDelegate['onWriteToFile']('"+a.path+"') threw an exception: "+b.message)}return d},allocate:function(a,c,d){if(b.isClosed(a))throw new b.ErrnoError(8);if(c<0||d<=0)throw new b.ErrnoError(28);if((a.flags&2097155)===0)throw new b.ErrnoError(8);if(!b.isFile(a.node.mode)&&!b.isDir(a.node.mode))throw new b.ErrnoError(43);if(!a.stream_ops.allocate)throw new b.ErrnoError(138);a.stream_ops.allocate(a,c,d)},mmap:function(a,e,f,g,h,c,d){if((c&2)!==0&&(d&2)===0&&(a.flags&2097155)!==2)throw new b.ErrnoError(2);if((a.flags&2097155)===1)throw new b.ErrnoError(2);if(!a.stream_ops.mmap)throw new b.ErrnoError(43);return a.stream_ops.mmap(a,e,f,g,h,c,d)},msync:function(a,b,c,d,e){return!a||!a.stream_ops.msync?0:a.stream_ops.msync(a,b,c,d,e)},munmap:function(a){return 0},ioctl:function(a,c,d){if(!a.stream_ops.ioctl)throw new b.ErrnoError(59);return a.stream_ops.ioctl(a,c,d)},readFile:function(h,a){var d,e,g,f,c;if(a=a||{},a.flags=a.flags||"r",a.encoding=a.encoding||"binary",a.encoding!=="utf8"&&a.encoding!=="binary")throw new Error('Invalid encoding type "'+a.encoding+'"');return e=b.open(h,a.flags),g=b.stat(h),f=g.size,c=new Uint8Array(f),b.read(e,c,0,f,0),a.encoding==="utf8"?d=an(c,0):a.encoding==="binary"&&(d=c),b.close(e),d},writeFile:function(g,c,a){var d,e,f;if(a=a||{},a.flags=a.flags||"w",d=b.open(g,a.flags,a.mode),typeof c=="string")e=new Uint8Array(V(c)+1),f=ay(c,e,0,e.length),b.write(d,e,0,f,void 0,a.canOwn);else if(ArrayBuffer.isView(c))b.write(d,c,0,c.byteLength,void 0,a.canOwn);else throw new Error("Unsupported data type");b.close(d)},cwd:function(){return b.currentPath},chdir:function(d){var a=b.lookupPath(d,{follow:!0}),c;if(a.node===null)throw new b.ErrnoError(44);if(!b.isDir(a.node.mode))throw new b.ErrnoError(54);if(c=b.nodePermissions(a.node,"x"),c)throw new b.ErrnoError(c);b.currentPath=a.path},createDefaultDirectories:function(){b.mkdir("/tmp"),b.mkdir("/home"),b.mkdir("/home/web_user")},createDefaultDevices:function(){var a,c;b.mkdir("/dev"),b.registerDevice(b.makedev(1,3),{read:function(){return 0},write:function(b,c,d,a,e){return a}}),b.mkdev("/dev/null",b.makedev(1,3)),aa.register(b.makedev(5,0),aa.default_tty_ops),aa.register(b.makedev(6,0),aa.default_tty1_ops),b.mkdev("/dev/tty",b.makedev(5,0)),b.mkdev("/dev/tty1",b.makedev(6,0)),typeof crypto=="object"&&typeof crypto.getRandomValues=="function"&&(c=new Uint8Array(1),a=function(){return crypto.getRandomValues(c),c[0]}),a||(a=function(){o("random_device")}),b.createDevice("/dev","random",a),b.createDevice("/dev","urandom",a),b.mkdir("/dev/shm"),b.mkdir("/dev/shm/tmp")},createSpecialDirectories:function(){b.mkdir("/proc"),b.mkdir("/proc/self"),b.mkdir("/proc/self/fd"),b.mount({mount:function(){var a=b.createNode("/proc/self","fd",16384|511,73);return a.node_ops={lookup:function(f,d){var e=+d,c=b.getStream(e),a;if(!c)throw new b.ErrnoError(8);return a={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:function(){return c.path}}},a.parent=a,a}},a}},{},"/proc/self/fd")},createStandardStreams:function(){var a,c,d;f.stdin?b.createDevice("/dev","stdin",f.stdin):b.symlink("/dev/tty","/dev/stdin"),f.stdout?b.createDevice("/dev","stdout",null,f.stdout):b.symlink("/dev/tty","/dev/stdout"),f.stderr?b.createDevice("/dev","stderr",null,f.stderr):b.symlink("/dev/tty1","/dev/stderr"),a=b.open("/dev/stdin","r"),c=b.open("/dev/stdout","w"),d=b.open("/dev/stderr","w")},ensureErrnoError:function(){if(b.ErrnoError)return;b.ErrnoError=function(a,b){this.node=b,this.setErrno=function(a){this.errno=a},this.setErrno(a),this.message="FS error"},b.ErrnoError.prototype=new Error,b.ErrnoError.prototype.constructor=b.ErrnoError,[44].forEach(function(a){b.genericErrors[a]=new b.ErrnoError(a),b.genericErrors[a].stack="<generic error, no stack>"})},staticInit:function(){b.ensureErrnoError(),b.nameTable=new Array(4096),b.mount(n,{},"/"),b.createDefaultDirectories(),b.createDefaultDevices(),b.createSpecialDirectories(),b.filesystems={MEMFS:n,IDBFS:u,WORKERFS:A}},init:function(a,c,d){b.init.initialized=!0,b.ensureErrnoError(),f.stdin=a||f.stdin,f.stdout=c||f.stdout,f.stderr=d||f.stderr,b.createStandardStreams()},quit:function(){var c,a,d;b.init.initialized=!1,c=f._fflush,c&&c(0);for(a=0;a<b.streams.length;a++){if(d=b.streams[a],!d)continue;b.close(d)}},getMode:function(b,c){var a=0;return b&&(a|=292|73),c&&(a|=146),a},joinPath:function(b,c){var a=p.join.apply(null,b);return c&&a[0]=="/"&&(a=a.substr(1)),a},absolutePath:function(a,b){return X.resolve(b,a)},standardizePath:function(a){return p.normalize(a)},findObject:function(c,d){var a=b.analyzePath(c,d);return a.exists?a.object:(W(a.error),null)},analyzePath:function(d,e){var c,a;try{c=b.lookupPath(d,{follow:!e}),d=c.path}catch(a){}a={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{c=b.lookupPath(d,{parent:!0}),a.parentExists=!0,a.parentPath=c.path,a.parentObject=c.node,a.name=p.basename(d),c=b.lookupPath(d,{follow:!e}),a.exists=!0,a.path=c.path,a.object=c.node,a.name=c.node.name,a.isRoot=c.path==="/"}catch(b){a.error=b.errno}return a},createFolder:function(a,c,d,e){var f=p.join2(typeof a=="string"?a:b.getPath(a),c),g=b.getMode(d,e);return b.mkdir(f,g)},createPath:function(a,f,g,h){var d,e,c;for(a=typeof a=="string"?a:b.getPath(a),d=f.split("/").reverse();d.length;){if(e=d.pop(),!e)continue;c=p.join2(a,e);try{b.mkdir(c)}catch(a){}a=c}return c},createFile:function(a,c,h,d,e){var f=p.join2(typeof a=="string"?a:b.getPath(a),c),g=b.getMode(d,e);return b.create(f,g)},createDataFile:function(c,g,a,l,k,j){var n=g?p.join2(typeof c=="string"?c:b.getPath(c),g):c,f=b.getMode(l,k),e=b.create(n,f),h,d,m,i;if(a){if(typeof a=="string"){h=new Array(a.length);for(d=0,m=a.length;d<m;++d)h[d]=a.charCodeAt(d);a=h}b.chmod(e,f|146),i=b.open(e,"w"),b.write(i,a,0,a.length,0,j),b.close(i),b.chmod(e,f)}return e},createDevice:function(c,f,d,a){var g=p.join2(typeof c=="string"?c:b.getPath(c),f),h=b.getMode(!!d,!!a),e;return b.createDevice.major||(b.createDevice.major=64),e=b.makedev(b.createDevice.major++,0),b.registerDevice(e,{open:function(a){a.seekable=!1},close:function(b){a&&a.buffer&&a.buffer.length&&a(10)},read:function(h,i,f,g,j){for(var c=0,e=0,a;e<g;e++){try{a=d()}catch(a){throw new b.ErrnoError(29)}if(a===void 0&&c===0)throw new b.ErrnoError(6);if(a===null||a===void 0)break;c++,i[f+e]=a}return c&&(h.node.timestamp=Date.now()),c},write:function(e,f,g,d,h){for(var c=0;c<d;c++)try{a(f[g+c])}catch(a){throw new b.ErrnoError(29)}return d&&(e.node.timestamp=Date.now()),c}}),b.mkdev(g,h,e)},createLink:function(a,c,d,f,g){var e=p.join2(typeof a=="string"?a:b.getPath(a),c);return b.symlink(d,e)},forceLoadFile:function(a){if(a.isDevice||a.isFolder||a.link||a.contents)return!0;var b=!0;if(typeof XMLHttpRequest!="undefined")throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(aR)try{a.contents=at(aR(a.url),!0),a.usedBytes=a.contents.length}catch(a){b=!1}else throw new Error("Cannot load without read() or XMLHttpRequest.");return b||W(29),b},createLazyFile:function(i,j,d,k,l){var g,c,a,e,h;function f(){this.lengthKnown=!1,this.chunks=[]}if(f.prototype.get=function(a){var b,c;return a>this.length-1||a<0?void 0:(b=a%this.chunkSize,c=a/this.chunkSize|0,this.getter(c)[b])},f.prototype.setDataGetter=function(a){this.getter=a},f.prototype.cacheLength=function(){var b=new XMLHttpRequest,a,f,g,h,c,i,e;if(b.open("HEAD",d,!1),b.send(null),!(b.status>=200&&b.status<300||b.status===304))throw new Error("Couldn't load "+d+". Status: "+b.status);a=Number(b.getResponseHeader("Content-length")),g=(f=b.getResponseHeader("Accept-Ranges"))&&f==="bytes",h=(f=b.getResponseHeader("Content-Encoding"))&&f==="gzip",c=1024*1024,g||(c=a),i=function(f,e){if(f>e)throw new Error("invalid range ("+f+", "+e+") or no bytes requested!");if(e>a-1)throw new Error("only "+a+" bytes available! programmer error!");var b=new XMLHttpRequest;if(b.open("GET",d,!1),a!==c&&b.setRequestHeader("Range","bytes="+f+"-"+e),typeof Uint8Array!="undefined"&&(b.responseType="arraybuffer"),b.overrideMimeType&&b.overrideMimeType("text/plain; charset=x-user-defined"),b.send(null),!(b.status>=200&&b.status<300||b.status===304))throw new Error("Couldn't load "+d+". Status: "+b.status);return b.response!==void 0?new Uint8Array(b.response||[]):at(b.responseText||"",!0)},e=this,e.setDataGetter(function(b){var f=b*c,d=(b+1)*c-1;if(d=Math.min(d,a-1),typeof e.chunks[b]=="undefined"&&(e.chunks[b]=i(f,d)),typeof e.chunks[b]=="undefined")throw new Error("doXHR failed!");return e.chunks[b]}),(h||!a)&&(c=a=1,a=this.getter(0).length,c=a,console.log("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=a,this._chunkSize=c,this.lengthKnown=!0},typeof XMLHttpRequest!="undefined"){if(!P)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";g=new f,Object.defineProperties(g,{length:{get:function(){return this.lengthKnown||this.cacheLength(),this._length}},chunkSize:{get:function(){return this.lengthKnown||this.cacheLength(),this._chunkSize}}}),c={isDevice:!1,contents:g}}else c={isDevice:!1,url:d};return a=b.createFile(i,j,c,k,l),c.contents?a.contents=c.contents:c.url&&(a.contents=null,a.url=c.url),Object.defineProperties(a,{usedBytes:{get:function(){return this.contents.length}}}),e={},h=Object.keys(a.stream_ops),h.forEach(function(c){var d=a.stream_ops[c];e[c]=function(){if(!b.forceLoadFile(a))throw new b.ErrnoError(29);return d.apply(null,arguments)}}),e.read=function(j,h,g,i,f){var d,e,c;if(!b.forceLoadFile(a))throw new b.ErrnoError(29);if(d=j.node.contents,f>=d.length)return 0;if(e=Math.min(d.length-f,i),d.slice)for(c=0;c<e;c++)h[g+c]=d[f+c];else for(c=0;c<e;c++)h[g+c]=d.get(f+c);return e},a.stream_ops=e,a},createPreloadedFile:function(i,e,h,q,o,j,d,m,n,k){var c,a;g.init(),c=e?X.resolve(p.join2(i,e)):i,a=cz("cp "+c);function l(h){function l(c){k&&k(),m||b.createDataFile(i,e,c,q,o,n),j&&j(),aQ(a)}var g=!1;f.preloadPlugins.forEach(function(b){if(g)return;b.canHandle(c)&&(b.handle(h,c,l,function(){d&&d(),aQ(a)}),g=!0)}),g||l(h)}bt(a),typeof h=="string"?g.asyncLoad(h,function(a){l(a)},d):l(h)},indexedDB:function(){return window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB},DB_NAME:function(){return"EM_FS_"+window.location.pathname},DB_VERSION:20,DB_STORE_NAME:"FILE_DATA",saveFilesToDB:function(e,d,a){var f,c;d=d||function(){},a=a||function(){},f=b.indexedDB();try{c=f.open(b.DB_NAME(),b.DB_VERSION)}catch(b){return a(b)}c.onupgradeneeded=function(){console.log("creating db");var a=c.result;a.createObjectStore(b.DB_STORE_NAME)},c.onsuccess=function(){var l=c.result,j=l.transaction([b.DB_STORE_NAME],"readwrite"),k=j.objectStore(b.DB_STORE_NAME),g=0,f=0,h=e.length;function i(){f==0?d():a()}e.forEach(function(a){var c=k.put(b.analyzePath(a).object.contents,a);c.onsuccess=function(){g++,g+f==h&&i()},c.onerror=function(){f++,g+f==h&&i()}}),j.onerror=a},c.onerror=a},loadFilesFromDB:function(e,d,a){var f,c;d=d||function(){},a=a||function(){},f=b.indexedDB();try{c=f.open(b.DB_NAME(),b.DB_VERSION)}catch(b){return a(b)}c.onupgradeneeded=a,c.onsuccess=function(){var l=c.result,j,k,g,f,h;try{j=l.transaction([b.DB_STORE_NAME],"readonly")}catch(b){a(b);return}k=j.objectStore(b.DB_STORE_NAME),g=0,f=0,h=e.length;function i(){f==0?d():a()}e.forEach(function(a){var c=k.get(a);c.onsuccess=function(){b.analyzePath(a).exists&&b.unlink(a),b.createDataFile(p.dirname(a),p.basename(a),c.result,!0,!0,!0),g++,g+f==h&&i()},c.onerror=function(){f++,g+f==h&&i()}}),j.onerror=a},c.onerror=a}},i={DEFAULT_POLLMASK:5,mappings:{},umask:511,calculateAt:function(e,a){var c,d;if(a[0]!=="/"){if(e===-100)c=b.cwd();else{if(d=b.getStream(e),!d)throw new b.ErrnoError(8);c=d.path}a=p.join2(c,a)}return a},doStat:function(f,d,a){try{var c=f(d)}catch(a){if(a&&a.node&&p.normalize(d)!==p.normalize(b.getPath(a.node)))return-54;throw a}return e[a>>2]=c.dev,e[a+4>>2]=0,e[a+8>>2]=c.ino,e[a+12>>2]=c.mode,e[a+16>>2]=c.nlink,e[a+20>>2]=c.uid,e[a+24>>2]=c.gid,e[a+28>>2]=c.rdev,e[a+32>>2]=0,r=[c.size>>>0,(k=c.size,+Q(k)>=1?k>0?(R(+N(k/4294967296),4294967295)|0)>>>0:~~+O((k-+(~~k>>>0))/4294967296)>>>0:0)],e[a+40>>2]=r[0],e[a+44>>2]=r[1],e[a+48>>2]=4096,e[a+52>>2]=c.blocks,e[a+56>>2]=c.atime.getTime()/1e3|0,e[a+60>>2]=0,e[a+64>>2]=c.mtime.getTime()/1e3|0,e[a+68>>2]=0,e[a+72>>2]=c.ctime.getTime()/1e3|0,e[a+76>>2]=0,r=[c.ino>>>0,(k=c.ino,+Q(k)>=1?k>0?(R(+N(k/4294967296),4294967295)|0)>>>0:~~+O((k-+(~~k>>>0))/4294967296)>>>0:0)],e[a+80>>2]=r[0],e[a+84>>2]=r[1],0},doMsync:function(a,d,c,e){var f=new Uint8Array(m.subarray(a,a+c));b.msync(d,f,0,c,e)},doMkdir:function(a,c){return a=p.normalize(a),a[a.length-1]==="/"&&(a=a.substr(0,a.length-1)),b.mkdir(a,c,0),0},doMknod:function(c,a,d){switch(a&61440){case 32768:case 8192:case 24576:case 4096:case 49152:break;default:return-28}return b.mknod(c,a,d),0},doReadlink:function(g,c,d){var e,a,f;return d<=0?-28:(e=b.readlink(g),a=Math.min(d,V(e)),f=s[c+a],q(e,c,d+1),s[c+a]=f,a)},doAccess:function(f,c){var d,e,a;return c&~7?-28:(e=b.lookupPath(f,{follow:!0}),d=e.node,!d)?-44:(a="",c&4&&(a+="r"),c&2&&(a+="w"),c&1&&(a+="x"),a&&b.nodePermissions(d,a))?-2:0},doDup:function(d,e,a){var c=b.getStream(a);return c&&b.close(c),b.open(d,e,0,a,a).fd},doReadv:function(h,d,k,i){for(var f=0,a=0,j,g,c;a<k;a++){if(j=e[d+a*8>>2],g=e[d+(a*8+4)>>2],c=b.read(h,s,j,g,i),c<0)return-1;if(f+=c,c<g)break}return f},doWritev:function(g,c,k,h){for(var f=0,a=0,i,j,d;a<k;a++){if(i=e[c+a*8>>2],j=e[c+(a*8+4)>>2],d=b.write(g,s,i,j,h),d<0)return-1;f+=d}return f},varargs:0,get:function(b){i.varargs+=4;var a=e[i.varargs-4>>2];return a},getStr:function(){var a=l(i.get());return a},getStreamFromFD:function(a){a||(a=i.get());var c=b.getStream(a);if(!c)throw new b.ErrnoError(8);return c},get64:function(){var a=i.get(),b=i.get();return a},getZero:function(){i.get()}};function mT(d,a){i.varargs=a;try{var c=i.getStr();return b.unlink(c),0}catch(a){return(typeof b=="undefined"||!(a instanceof b.ErrnoError))&&o(a),-a.errno}}v={EPERM:63,ENOENT:44,ESRCH:71,EINTR:27,EIO:29,ENXIO:60,E2BIG:1,ENOEXEC:45,EBADF:8,ECHILD:12,EAGAIN:6,EWOULDBLOCK:6,ENOMEM:48,EACCES:2,EFAULT:21,ENOTBLK:105,EBUSY:10,EEXIST:20,EXDEV:75,ENODEV:43,ENOTDIR:54,EISDIR:31,EINVAL:28,ENFILE:41,EMFILE:33,ENOTTY:59,ETXTBSY:74,EFBIG:22,ENOSPC:51,ESPIPE:70,EROFS:69,EMLINK:34,EPIPE:64,EDOM:18,ERANGE:68,ENOMSG:49,EIDRM:24,ECHRNG:106,EL2NSYNC:156,EL3HLT:107,EL3RST:108,ELNRNG:109,EUNATCH:110,ENOCSI:111,EL2HLT:112,EDEADLK:16,ENOLCK:46,EBADE:113,EBADR:114,EXFULL:115,ENOANO:104,EBADRQC:103,EBADSLT:102,EDEADLOCK:16,EBFONT:101,ENOSTR:100,ENODATA:116,ETIME:117,ENOSR:118,ENONET:119,ENOPKG:120,EREMOTE:121,ENOLINK:47,EADV:122,ESRMNT:123,ECOMM:124,EPROTO:65,EMULTIHOP:36,EDOTDOT:125,EBADMSG:9,ENOTUNIQ:126,EBADFD:127,EREMCHG:128,ELIBACC:129,ELIBBAD:130,ELIBSCN:131,ELIBMAX:132,ELIBEXEC:133,ENOSYS:52,ENOTEMPTY:55,ENAMETOOLONG:37,ELOOP:32,EOPNOTSUPP:138,EPFNOSUPPORT:139,ECONNRESET:15,ENOBUFS:42,EAFNOSUPPORT:5,EPROTOTYPE:67,ENOTSOCK:57,ENOPROTOOPT:50,ESHUTDOWN:140,ECONNREFUSED:14,EADDRINUSE:3,ECONNABORTED:13,ENETUNREACH:40,ENETDOWN:38,ETIMEDOUT:73,EHOSTDOWN:142,EHOSTUNREACH:23,EINPROGRESS:26,EALREADY:7,EDESTADDRREQ:17,EMSGSIZE:35,EPROTONOSUPPORT:66,ESOCKTNOSUPPORT:137,EADDRNOTAVAIL:4,ENETRESET:39,EISCONN:30,ENOTCONN:53,ETOOMANYREFS:141,EUSERS:136,EDQUOT:19,ESTALE:72,ENOTSUP:138,ENOMEDIUM:148,EILSEQ:25,EOVERFLOW:61,ECANCELED:11,ENOTRECOVERABLE:56,EOWNERDEAD:62,ESTRPIPE:135},w={mount:function(a){return f.websocket=f.websocket&&"object"==typeof f.websocket?f.websocket:{},f.websocket._callbacks={},f.websocket.on=function(b,a){return"function"==typeof a&&(this._callbacks[b]=a),this},f.websocket.emit=function(a,b){"function"==typeof this._callbacks[a]&&this._callbacks[a].call(this,b)},b.createNode(null,"/",16384|511,0)},createSocket:function(h,e,a){var g=e==1,c,f,d,i;return a&&M(g==(a==6)),c={family:h,type:e,protocol:a,server:null,error:null,peers:{},pending:[],recv_queue:[],sock_ops:w.websocket_sock_ops},f=w.nextname(),d=b.createNode(w.root,f,49152,0),d.sock=c,i=b.createStream({path:f,node:d,flags:b.modeStringToFlags("r+"),seekable:!1,stream_ops:w.stream_ops}),c.stream=i,c},getSocket:function(c){var a=b.getStream(c);return!a||!b.isSocket(a.node.mode)?null:a.node.sock},stream_ops:{poll:function(b){var a=b.node.sock;return a.sock_ops.poll(a)},ioctl:function(b,c,d){var a=b.node.sock;return a.sock_ops.ioctl(a,c,d)},read:function(f,c,d,e,g){var b=f.node.sock,a=b.sock_ops.recvmsg(b,e);return a?(c.set(a.buffer,d),a.buffer.length):0},write:function(b,c,d,e,f){var a=b.node.sock;return a.sock_ops.sendmsg(a,c,d,e)},close:function(b){var a=b.node.sock;a.sock_ops.close(a)}},nextname:function(){return w.nextname.current||(w.nextname.current=0),"socket["+w.nextname.current+++"]"},websocket_sock_ops:{createPeer:function(e,c,h){var a,j,m,g,n,d,k,l,i;if(typeof c=="object"&&(a=c,c=null,h=null),a)if(a._socket)c=a._socket.remoteAddress,h=a._socket.remotePort;else{if(j=/ws[s]?:\/\/([^:]+):(\d+)/.exec(a.url),!j)throw new Error("WebSocket URL must be in the format ws(s)://address:port");c=j[1],h=parseInt(j[2],10)}else try{m=f.websocket&&"object"==typeof f.websocket,g="ws:#".replace("#","//"),m&&"string"==typeof f.websocket.url&&(g=f.websocket.url),(g==="ws://"||g==="wss://")&&(n=c.split("/"),g=g+n[0]+":"+h+"/"+n.slice(1).join("/")),d="binary",m&&"string"==typeof f.websocket.subprotocol&&(d=f.websocket.subprotocol),k=void 0,d!=="null"&&(d=d.replace(/^ +| +$/g,"").split(/ *, */),k=av?{protocol:d.toString()}:d),m&&null===f.websocket.subprotocol&&(d="null",k=void 0),aj?l=window.WebSocket:l=WebSocket,a=new l(g,k),a.binaryType="arraybuffer"}catch(a){throw new b.ErrnoError(v.EHOSTUNREACH)}return i={addr:c,port:h,socket:a,dgram_send_queue:[]},w.websocket_sock_ops.addPeer(e,i),w.websocket_sock_ops.handlePeerEvents(e,i),e.type===2&&typeof e.sport!="undefined"&&i.dgram_send_queue.push(new Uint8Array([255,255,255,255,"p".charCodeAt(0),"o".charCodeAt(0),"r".charCodeAt(0),"t".charCodeAt(0),(e.sport&65280)>>8,e.sport&255])),i},getPeer:function(a,b,c){return a.peers[b+":"+c]},addPeer:function(b,a){b.peers[a.addr+":"+a.port]=a},removePeer:function(b,a){delete b.peers[a.addr+":"+a.port]},handlePeerEvents:function(b,a){var c=!0,d=function(){f.websocket.emit("open",b.stream.fd);try{for(var c=a.dgram_send_queue.shift();c;)a.socket.send(c),c=a.dgram_send_queue.shift()}catch(b){a.socket.close()}};function e(d){var e,g,h;if(typeof d=="string")e=new TextEncoder,d=e.encode(d);else{if(M(d.byteLength!==void 0),d.byteLength==0)return;d=new Uint8Array(d)}if(g=c,c=!1,g&&d.length===10&&d[0]===255&&d[1]===255&&d[2]===255&&d[3]===255&&d[4]==="p".charCodeAt(0)&&d[5]==="o".charCodeAt(0)&&d[6]==="r".charCodeAt(0)&&d[7]==="t".charCodeAt(0)){h=d[8]<<8|d[9],w.websocket_sock_ops.removePeer(b,a),a.port=h,w.websocket_sock_ops.addPeer(b,a);return}b.recv_queue.push({addr:a.addr,port:a.port,data:d}),f.websocket.emit("message",b.stream.fd)}av?(a.socket.on("open",d),a.socket.on("message",function(a,b){if(!b.binary)return;e(new Uint8Array(a).buffer)}),a.socket.on("close",function(){f.websocket.emit("close",b.stream.fd)}),a.socket.on("error",function(a){b.error=v.ECONNREFUSED,f.websocket.emit("error",[b.stream.fd,b.error,"ECONNREFUSED: Connection refused"])})):(a.socket.onopen=d,a.socket.onclose=function(){f.websocket.emit("close",b.stream.fd)},a.socket.onmessage=function(a){e(a.data)},a.socket.onerror=function(a){b.error=v.ECONNREFUSED,f.websocket.emit("error",[b.stream.fd,b.error,"ECONNREFUSED: Connection refused"])})},poll:function(b){var c,a;return b.type===1&&b.server?b.pending.length?64|1:0:(c=0,a=b.type===1?w.websocket_sock_ops.getPeer(b,b.daddr,b.dport):null,(b.recv_queue.length||!a||a&&a.socket.readyState===a.socket.CLOSING||a&&a.socket.readyState===a.socket.CLOSED)&&(c|=64|1),(!a||a&&a.socket.readyState===a.socket.OPEN)&&(c|=4),(a&&a.socket.readyState===a.socket.CLOSING||a&&a.socket.readyState===a.socket.CLOSED)&&(c|=16),c)},ioctl:function(a,c,d){switch(c){case 21531:var b=0;return a.recv_queue.length&&(b=a.recv_queue[0].data.length),e[d>>2]=b,0;default:return v.EINVAL}},close:function(a){var c,b,d;if(a.server){try{a.server.close()}catch(a){}a.server=null}c=Object.keys(a.peers);for(b=0;b<c.length;b++){d=a.peers[c[b]];try{d.socket.close()}catch(a){}w.websocket_sock_ops.removePeer(a,d)}return 0},bind:function(a,c,d){if(typeof a.saddr!="undefined"||typeof a.sport!="undefined")throw new b.ErrnoError(v.EINVAL);if(a.saddr=c,a.sport=d,a.type===2){a.server&&(a.server.close(),a.server=null);try{a.sock_ops.listen(a,0)}catch(a){if(!(a instanceof b.ErrnoError))throw a;if(a.errno!==v.EOPNOTSUPP)throw a}}},connect:function(a,e,f){var c,d;if(a.server)throw new b.ErrnoError(v.EOPNOTSUPP);if(typeof a.daddr!="undefined"&&typeof a.dport!="undefined")if(c=w.websocket_sock_ops.getPeer(a,a.daddr,a.dport),c)throw c.socket.readyState===c.socket.CONNECTING?new b.ErrnoError(v.EALREADY):new b.ErrnoError(v.EISCONN);throw d=w.websocket_sock_ops.createPeer(a,e,f),a.daddr=d.addr,a.dport=d.port,new b.ErrnoError(v.EINPROGRESS)},listen:function(a,c){if(!av)throw new b.ErrnoError(v.EOPNOTSUPP)},accept:function(a){if(!a.server)throw new b.ErrnoError(v.EINVAL);var c=a.pending.shift();return c.stream.flags=a.stream.flags,c},getname:function(a,e){var c,d;if(e){if(a.daddr===void 0||a.dport===void 0)throw new b.ErrnoError(v.ENOTCONN);c=a.daddr,d=a.dport}else c=a.saddr||0,d=a.sport||0;return{addr:c,port:d}},sendmsg:function(c,f,h,i,d,e){var a,g;if(c.type===2){if((d===void 0||e===void 0)&&(d=c.daddr,e=c.dport),d===void 0||e===void 0)throw new b.ErrnoError(v.EDESTADDRREQ)}else d=c.daddr,e=c.dport;if(a=w.websocket_sock_ops.getPeer(c,d,e),c.type===1){if(!a||a.socket.readyState===a.socket.CLOSING||a.socket.readyState===a.socket.CLOSED)throw new b.ErrnoError(v.ENOTCONN);if(a.socket.readyState===a.socket.CONNECTING)throw new b.ErrnoError(v.EAGAIN)}if(ArrayBuffer.isView(f)&&(h+=f.byteOffset,f=f.buffer),g=f.slice(h,h+i),c.type===2)if(!a||a.socket.readyState!==a.socket.OPEN)return(!a||a.socket.readyState===a.socket.CLOSING||a.socket.readyState===a.socket.CLOSED)&&(a=w.websocket_sock_ops.createPeer(c,d,e)),a.dgram_send_queue.push(g),i;try{return a.socket.send(g),i}catch(a){throw new b.ErrnoError(v.EINVAL)}},recvmsg:function(c,k){var a,d,f,g,h,e,i,j;if(c.type===1&&c.server)throw new b.ErrnoError(v.ENOTCONN);if(a=c.recv_queue.shift(),!a)if(c.type===1){if(d=w.websocket_sock_ops.getPeer(c,c.daddr,c.dport),!d)throw new b.ErrnoError(v.ENOTCONN);if(d.socket.readyState===d.socket.CLOSING||d.socket.readyState===d.socket.CLOSED)return null;throw new b.ErrnoError(v.EAGAIN)}else throw new b.ErrnoError(v.EAGAIN);return f=a.data.byteLength||a.data.length,g=a.data.byteOffset||0,h=a.data.buffer||a.data,e=Math.min(k,f),i={buffer:new Uint8Array(h,g,e),addr:a.addr,port:a.port},c.type===1&&e<f&&(j=f-e,a.data=new Uint8Array(h,g+e,j),c.recv_queue.unshift(a)),i}}};function aG(d){for(var a=d.split("."),b=0,c;b<4;b++){if(c=Number(a[b]),isNaN(c))return null;a[b]=c}return(a[0]|a[1]<<8|a[2]<<16|a[3]<<24)>>>0}function bw(b){var g=/^((?=.*::)(?!.*::.+::)(::)?([\dA-F]{1,4}:(:|\b)|){5}|([\dA-F]{1,4}:){6})((([\dA-F]{1,4}((?!\3)::|:\b|$))|(?!\2\3)){2}|(((2[0-4]|1\d|[1-9])?\d|25[0-5])\.?\b){4})$/i,c=[],f,e,a,d;if(!g.test(b))return null;if(b==="::")return[0,0,0,0,0,0,0,0];b.indexOf("::")===0?b=b.replace("::","Z:"):b=b.replace("::",":Z:"),b.indexOf(".")>0?(b=b.replace(new RegExp("[.]","g"),":"),a=b.split(":"),a[a.length-4]=parseInt(a[a.length-4])+parseInt(a[a.length-3])*256,a[a.length-3]=parseInt(a[a.length-2])+parseInt(a[a.length-1])*256,a=a.slice(0,a.length-2)):a=b.split(":"),f=0,e=0;for(d=0;d<a.length;d++)if(typeof a[d]=="string")if(a[d]==="Z"){for(e=0;e<8-a.length+1;e++)c[d+e]=0;f=e-1}else c[d+f]=aN(parseInt(a[d],16));else c[d+f]=a[d];return[c[1]<<16|c[0],c[3]<<16|c[2],c[5]<<16|c[4],c[7]<<16|c[6]]}G={address_map:{id:1,addrs:{},names:{}},lookup_name:function(a){var c=aG(a),b,d;return c!==null?a:(c=bw(a),c!==null)?a:(G.address_map.addrs[a]?b=G.address_map.addrs[a]:(d=G.address_map.id++,M(d<65535,"exceeded max address mappings of 65535"),b="172.29."+(d&255)+"."+(d&65280),G.address_map.names[b]=a,G.address_map.addrs[a]=b),b)},lookup_addr:function(a){return G.address_map.names[a]?G.address_map.names[a]:null}};function by(a){return(a&255)+"."+(a>>8&255)+"."+(a>>16&255)+"."+(a>>24&255)}function cs(c){var b="",a=0,f=0,k=0,g=0,h=0,i=0,d=[c[0]&65535,c[0]>>16,c[1]&65535,c[1]>>16,c[2]&65535,c[2]>>16,c[3]&65535,c[3]>>16],j=!0,e="";for(i=0;i<5;i++)if(d[i]!==0){j=!1;break}if(j){if(e=by(d[6]|d[7]<<16),d[5]===-1)return b="::ffff:",b+=e,b;if(d[5]===0)return b="::",e==="0.0.0.0"&&(e=""),e==="0.0.0.1"&&(e="1"),b+=e,b}for(a=0;a<8;a++)d[a]===0&&(a-k>1&&(h=0),k=a,h++),h>f&&(f=h,g=a-f+1);for(a=0;a<8;a++){if(f>1)if(d[a]===0&&a>=g&&a<g+f){a===g&&(b+=":",g===0&&(b+=":"));continue}b+=Number(bI(d[a]&65535)).toString(16),b+=a<7?":":""}return b}function bA(a,c){var d=I[a>>1],f=bI(aF[a+2>>1]),b;switch(d){case 2:if(c!==16)return{errno:28};b=e[a+4>>2],b=by(b);break;case 10:if(c!==28)return{errno:28};b=[e[a+8>>2],e[a+12>>2],e[a+16>>2],e[a+20>>2]],b=cs(b);break;default:return{errno:5}}return{family:d,addr:b,port:f}}function ap(a,c,b,d){switch(c){case 2:b=aG(b),I[a>>1]=c,e[a+4>>2]=b,I[a+2>>1]=aN(d);break;case 10:b=bw(b),e[a>>2]=c,e[a+8>>2]=b[0],e[a+12>>2]=b[1],e[a+16>>2]=b[2],e[a+20>>2]=b[3],I[a+2>>1]=aN(d),e[a+4>>2]=0,e[a+24>>2]=0;break;default:return{errno:5}}return{}}function mS(W,V){var H,T,h,D,S,R,P,a,j,K,d,x,t,u,f,l,z,A,B,L,g,J,U,Q,O,k,r,F,p,N,n,c,I,M,y,v,C,q,E;i.varargs=V;try{switch(H=i.get(),T=i.get(),i.varargs=T,h=function(){var a=w.getSocket(i.get());if(!a)throw new b.ErrnoError(8);return a},D=function(d){var c=i.get(),e=i.get(),a;if(d&&c===0)return null;if(a=bA(c,e),a.errno)throw new b.ErrnoError(a.errno);return a.addr=G.lookup_addr(a.addr)||a.addr,a},H){case 1:return S=i.get(),R=i.get(),P=i.get(),a=w.createSocket(S,R,P),a.stream.fd;case 2:return a=h(),j=D(),a.sock_ops.bind(a,j.addr,j.port),0;case 3:return a=h(),j=D(),a.sock_ops.connect(a,j.addr,j.port),0;case 4:return a=h(),K=i.get(),a.sock_ops.listen(a,K),0;case 5:return a=h(),d=i.get(),x=i.get(),t=a.sock_ops.accept(a),d&&(u=ap(d,t.family,G.lookup_name(t.daddr),t.dport)),t.stream.fd;case 6:return a=h(),d=i.get(),x=i.get(),u=ap(d,a.family,G.lookup_name(a.saddr||"0.0.0.0"),a.sport),0;case 7:return a=h(),d=i.get(),x=i.get(),!a.daddr?-53:(u=ap(d,a.family,G.lookup_name(a.daddr),a.dport),0);case 11:return a=h(),f=i.get(),l=i.get(),z=i.get(),A=D(!0),!A?b.write(a.stream,s,f,l):a.sock_ops.sendmsg(a,s,f,l,A.addr,A.port);case 12:return a=h(),B=i.get(),L=i.get(),z=i.get(),d=i.get(),x=i.get(),g=a.sock_ops.recvmsg(a,L),!g?0:(d&&(u=ap(d,a.family,G.lookup_name(g.addr),g.port)),m.set(g.buffer,B),g.buffer.byteLength);case 14:return-50;case 15:{if(a=h(),J=i.get(),U=i.get(),Q=i.get(),O=i.get(),J===1)if(U===4)return e[Q>>2]=a.error,e[O>>2]=4,a.error=null,0;return-50}case 16:{if(a=h(),f=i.get(),z=i.get(),k=e[f+8>>2],r=e[f+12>>2],p=e[f>>2],N=e[f+4>>2],p){if(j=bA(p,N),j.errno)return-j.errno;F=j.port,d=G.lookup_addr(j.addr)||j.addr}n=0;for(c=0;c<r;c++)n+=e[k+(8*c+4)>>2];I=new Uint8Array(n),M=0;for(c=0;c<r;c++){y=e[k+(8*c+0)>>2],v=e[k+(8*c+4)>>2];for(C=0;C<v;C++)I[M++]=s[y+C>>0]}return a.sock_ops.sendmsg(a,I,0,n,d,F)}case 17:{a=h(),f=i.get(),z=i.get(),k=e[f+8>>2],r=e[f+12>>2],n=0;for(c=0;c<r;c++)n+=e[k+(8*c+4)>>2];if(g=a.sock_ops.recvmsg(a,n),!g)return 0;p=e[f>>2],p&&(u=ap(p,a.family,G.lookup_name(g.addr),g.port)),q=0,E=g.buffer.byteLength;for(c=0;E>0&&c<r;c++){if(y=e[k+(8*c+0)>>2],v=e[k+(8*c+4)>>2],!v)continue;l=Math.min(v,E),B=g.buffer.subarray(q,q+l),m.set(B,y+q),q+=l,E-=l}return q}default:o("unsupported socketcall syscall "+H)}}catch(a){return(typeof b=="undefined"||!(a instanceof b.ErrnoError))&&o(a),-a.errno}}function mR(d,a){i.varargs=a;try{var c=i.getStr();return b.chdir(c),0}catch(a){return(typeof b=="undefined"||!(a instanceof b.ErrnoError))&&o(a),-a.errno}}function mQ(n,m){var a,l,j,g,d,h,c,f;i.varargs=m;try{return a=i.getStreamFromFD(),l=i.get(),j=i.get(),g=i.get(),d=i.get(),h=4294967296,c=l*h+(j>>>0),f=9007199254740992,c<=-f||c>=f?-61:(b.llseek(a,c,d),r=[a.position>>>0,(k=a.position,+Q(k)>=1?k>0?(R(+N(k/4294967296),4294967295)|0)>>>0:~~+O((k-+(~~k>>>0))/4294967296)>>>0:0)],e[g>>2]=r[0],e[g+4>>2]=r[1],a.getdents&&c===0&&d===0&&(a.getdents=null),0)}catch(a){return(typeof b=="undefined"||!(a instanceof b.ErrnoError))&&o(a),-a.errno}}function mP(E,D){var B,c,d,f,C,k,A,x,w,v,u,t,s,m,q,p,n,r,y,z,l,a,g,h,j;i.varargs=D;try{B=i.get(),c=i.get(),d=i.get(),f=i.get(),C=i.get(),k=0,A=c?e[c>>2]:0,x=c?e[c+4>>2]:0,w=d?e[d>>2]:0,v=d?e[d+4>>2]:0,u=f?e[f>>2]:0,t=f?e[f+4>>2]:0,s=0,m=0,q=0,p=0,n=0,r=0,y=(c?e[c>>2]:0)|(d?e[d>>2]:0)|(f?e[f>>2]:0),z=(c?e[c+4>>2]:0)|(d?e[d+4>>2]:0)|(f?e[f+4>>2]:0),l=function(b,c,d,a){return b<32?c&a:d&a};for(a=0;a<B;a++){if(g=1<<a%32,!l(a,y,z,g))continue;if(h=b.getStream(a),!h)throw new b.ErrnoError(8);j=i.DEFAULT_POLLMASK,h.stream_ops.poll&&(j=h.stream_ops.poll(h)),j&1&&l(a,A,x,g)&&(a<32?s=s|g:m=m|g,k++),j&4&&l(a,w,v,g)&&(a<32?q=q|g:p=p|g,k++),j&2&&l(a,u,t,g)&&(a<32?n=n|g:r=r|g,k++)}return c&&(e[c>>2]=s,e[c+4>>2]=m),d&&(e[d>>2]=q,e[d+4>>2]=p),f&&(e[f>>2]=n,e[f+4>>2]=r),k}catch(a){return(typeof b=="undefined"||!(a instanceof b.ErrnoError))&&o(a),-a.errno}}function mO(f,a){i.varargs=a;try{var c=i.getStreamFromFD(),d=i.get(),e=i.get();return i.doReadv(c,d,e)}catch(a){return(typeof b=="undefined"||!(a instanceof b.ErrnoError))&&o(a),-a.errno}}function mz(e,a){i.varargs=a;try{var c=i.getStr(),d=i.get();return b.chmod(c,d),0}catch(a){return(typeof b=="undefined"||!(a instanceof b.ErrnoError))&&o(a),-a.errno}}function my(p,m){var h,j,n,g,d,f,k,l,a,c;i.varargs=m;try{h=i.get(),j=i.get(),n=i.get(),g=0;for(d=0;d<j;d++)f=h+8*d,k=e[f>>2],l=I[f+4>>1],a=32,c=b.getStream(k),c&&(a=i.DEFAULT_POLLMASK,c.stream_ops.poll&&(a=c.stream_ops.poll(c))),a&=l|8|16,a&&g++,I[f+6>>1]=a;return g}catch(a){return(typeof b=="undefined"||!(a instanceof b.ErrnoError))&&o(a),-a.errno}}function mx(g,f){var c,a,d,e;i.varargs=f;try{return c=i.get(),a=i.get(),a===0?-28:(d=b.cwd(),e=V(d),a<e+1)?-68:(q(d,c,a),c)}catch(a){return(typeof b=="undefined"||!(a instanceof b.ErrnoError))&&o(a),-a.errno}}function mw(e,a){i.varargs=a;try{var c=i.getStr(),d=i.get();return i.doStat(b.stat,c,d)}catch(a){return(typeof b=="undefined"||!(a instanceof b.ErrnoError))&&o(a),-a.errno}}bZ={ppid:1,pid:42,sid:42,pgid:42};function mu(c,a){i.varargs=a;try{return bZ.pid}catch(a){return(typeof b=="undefined"||!(a instanceof b.ErrnoError))&&o(a),-a.errno}}function mt(u,t){var c,d,p,g,a,n,f,h,l,m,j;i.varargs=t;try{for(c=i.getStreamFromFD(),d=i.get(),p=i.get(),c.getdents||(c.getdents=b.readdir(c.path)),g=280,a=0,n=b.llseek(c,0,1),f=Math.floor(n/g);f<c.getdents.length&&a+g<=p;)m=c.getdents[f],m[0]==="."?(h=1,l=4):(j=b.lookupNode(c.node,m),h=j.id,l=b.isChrdev(j.mode)?2:b.isDir(j.mode)?4:b.isLink(j.mode)?10:8),r=[h>>>0,(k=h,+Q(k)>=1?k>0?(R(+N(k/4294967296),4294967295)|0)>>>0:~~+O((k-+(~~k>>>0))/4294967296)>>>0:0)],e[d+a>>2]=r[0],e[d+a+4>>2]=r[1],r=[(f+1)*g>>>0,(k=(f+1)*g,+Q(k)>=1?k>0?(R(+N(k/4294967296),4294967295)|0)>>>0:~~+O((k-+(~~k>>>0))/4294967296)>>>0:0)],e[d+a+8>>2]=r[0],e[d+a+12>>2]=r[1],I[d+a+16>>1]=280,s[d+a+18>>0]=l,q(m,d+a+19,256),a+=g,f+=1;return b.llseek(c,f*g,0),a}catch(a){return(typeof b=="undefined"||!(a instanceof b.ErrnoError))&&o(a),-a.errno}}function mj(h,g){var c,f,a,d,e;i.varargs=g;try{switch(c=i.getStreamFromFD(),f=i.get(),f){case 0:return a=i.get(),a<0?-28:(d=b.open(c.path,c.flags,0,a),d.fd);case 1:case 2:return 0;case 3:return c.flags;case 4:return a=i.get(),c.flags|=a,0;case 12:return a=i.get(),e=0,I[a+e>>1]=2,0;case 13:case 14:return 0;case 16:case 8:return-28;case 9:return W(28),-1;default:return-28}}catch(a){return(typeof b=="undefined"||!(a instanceof b.ErrnoError))&&o(a),-a.errno}}function mi(d,c){i.varargs=c;try{var f=i.getStr(),g=i.get(),a=i.get();return e[a+4>>2]=4096,e[a+40>>2]=4096,e[a+8>>2]=1e6,e[a+12>>2]=5e5,e[a+16>>2]=5e5,e[a+20>>2]=b.nextInode,e[a+24>>2]=1e6,e[a+28>>2]=42,e[a+44>>2]=2,e[a+36>>2]=255,0}catch(a){return(typeof b=="undefined"||!(a instanceof b.ErrnoError))&&o(a),-a.errno}}function mh(f,a){i.varargs=a;try{var c=i.getStreamFromFD(),d=i.get(),e=i.get();return b.read(c,s,d,e)}catch(a){return(typeof b=="undefined"||!(a instanceof b.ErrnoError))&&o(a),-a.errno}}function mg(e,a){i.varargs=a;try{var c=i.getStr(),d=i.get();return i.doAccess(c,d)}catch(a){return(typeof b=="undefined"||!(a instanceof b.ErrnoError))&&o(a),-a.errno}}function mf(e,a){i.varargs=a;try{var c=i.getStr(),d=i.getStr();return b.rename(c,d),0}catch(a){return(typeof b=="undefined"||!(a instanceof b.ErrnoError))&&o(a),-a.errno}}function me(e,a){i.varargs=a;try{var c=i.getStr(),d=i.get();return i.doMkdir(c,d)}catch(a){return(typeof b=="undefined"||!(a instanceof b.ErrnoError))&&o(a),-a.errno}}function l_(f,a){i.varargs=a;try{var c=i.getStreamFromFD(),d=i.get(),e=i.get();return b.write(c,s,d,e)}catch(a){return(typeof b=="undefined"||!(a instanceof b.ErrnoError))&&o(a),-a.errno}}function lZ(d,a){i.varargs=a;try{var c=i.getStr();return b.rmdir(c),0}catch(a){return(typeof b=="undefined"||!(a instanceof b.ErrnoError))&&o(a),-a.errno}}function lY(g,f){var a,c,d,e;i.varargs=f;try{return a=i.getStr(),c=i.get(),d=i.get(),e=b.open(a,c,d),e.fd}catch(a){return(typeof b=="undefined"||!(a instanceof b.ErrnoError))&&o(a),-a.errno}}function lX(g,f){var a,c,d;i.varargs=f;try{switch(a=i.getStreamFromFD(),c=i.get(),c){case 21509:case 21505:return a.tty?0:-59;case 21510:case 21511:case 21512:case 21506:case 21507:case 21508:return a.tty?0:-59;case 21519:return a.tty?(d=i.get(),e[d>>2]=0,0):-59;case 21520:return a.tty?-28:-59;case 21531:return d=i.get(),b.ioctl(a,c,d);case 21523:return a.tty?0:-59;case 21524:return a.tty?0:-59;default:o("bad ioctl syscall "+c)}}catch(a){return(typeof b=="undefined"||!(a instanceof b.ErrnoError))&&o(a),-a.errno}}function lW(c,d){var a,e;return c===-1||d===0?-28:(a=i.mappings[c],!a)?0:(d===a.len&&(e=b.getStream(a.fd),i.doMsync(c,e,d,a.flags),b.munmap(e),i.mappings[c]=null,a.allocated&&ah(a.malloc)),0)}function lV(e,a){i.varargs=a;try{var c=i.get(),d=i.get();return lW(c,d)}catch(a){return(typeof b=="undefined"||!(a instanceof b.ErrnoError))&&o(a),-a.errno}}function lP(){}function lO(){o()}function ak(){o()}function ly(){return 0||typeof performance=="object"&&performance&&typeof performance.now=="function"}function lw(b,c){var a;if(b===0)a=Date.now();else if(b===1&&ly())a=ak();else return W(28),-1;return e[c>>2]=a/1e3|0,e[c+4>>2]=a%1e3*1e3*1e3|0,0}function bb(){o("To use dlopen, you need to use Emscripten's linking support, see https://github.com/emscripten-core/emscripten/wiki/Linking")}function jl(){return bb.apply(null,arguments)}function jk(){return bb.apply(null,arguments)}function je(){return bb.apply(null,arguments)}function bD(b,d){var c,a,e;return g.mainLoop.timingMode=b,g.mainLoop.timingValue=d,!g.mainLoop.func?1:(b==0?(g.mainLoop.scheduler=function(){var a=Math.max(0,g.mainLoop.tickStartTime+d-ak())|0;setTimeout(g.mainLoop.runner,a)},g.mainLoop.method="timeout"):b==1?(g.mainLoop.scheduler=function(){g.requestAnimationFrame(g.mainLoop.runner)},g.mainLoop.method="rAF"):b==2&&(typeof setImmediate=="undefined"&&(c=[],a="setimmediate",e=function(b){(b.data===a||b.data.target===a)&&(b.stopPropagation(),c.shift()())},addEventListener("message",e,!0),setImmediate=function(b){c.push(b),P?(f.setImmediates===void 0&&(f.setImmediates=[]),f.setImmediates.push(b),postMessage({target:a})):postMessage(a,"*")}),g.mainLoop.scheduler=function(){setImmediate(g.mainLoop.runner)},g.mainLoop.method="immediate"),0)}function jd(){return!c.currentContext||!c.currentContext.GLctx?-3:c.currentContext.defaultFbo?(c.blitOffscreenFramebuffer(c.currentContext),0):c.currentContext.attributes.explicitSwapControl?0:-3}function iZ(){return jd()}function ck(e,c,h,d,i){var b,a;if(af=!0,M(!g.mainLoop.func,"emscripten_set_main_loop: there can only be one main loop function at once: call emscripten_cancel_main_loop to cancel the previous one before setting a new one with different parameters."),g.mainLoop.func=e,g.mainLoop.arg=d,typeof d!="undefined"?b=function(){f.dynCall_vi(e,d)}:b=function(){f.dynCall_v(e)},a=g.mainLoop.currentlyRunningMainloop,g.mainLoop.runner=function(){var h,c,d,e;if(ab)return;if(g.mainLoop.queue.length>0){if(h=Date.now(),c=g.mainLoop.queue.shift(),c.func(c.arg),g.mainLoop.remainingBlockers&&(d=g.mainLoop.remainingBlockers,e=d%1==0?d-1:Math.floor(d),c.counted?g.mainLoop.remainingBlockers=e:(e=e+.5,g.mainLoop.remainingBlockers=(8*d+e)/9)),console.log('main loop blocker "'+c.name+'" took '+(Date.now()-h)+" ms"),g.mainLoop.updateStatus(),a<g.mainLoop.currentlyRunningMainloop)return;setTimeout(g.mainLoop.runner,0);return}if(a<g.mainLoop.currentlyRunningMainloop)return;if(g.mainLoop.currentFrameNumber=g.mainLoop.currentFrameNumber+1|0,g.mainLoop.timingMode==1&&g.mainLoop.timingValue>1&&g.mainLoop.currentFrameNumber%g.mainLoop.timingValue!=0){g.mainLoop.scheduler();return}if(g.mainLoop.timingMode==0&&(g.mainLoop.tickStartTime=ak()),g.mainLoop.method==="timeout"&&f.ctx&&(t("Looks like you are rendering without using requestAnimationFrame for the main loop. You should use 0 for the frame rate in emscripten_set_main_loop in order to use requestAnimationFrame, as that can greatly improve your frame rates!"),g.mainLoop.method=""),g.mainLoop.runIter(b),a<g.mainLoop.currentlyRunningMainloop)return;typeof SDL=="object"&&SDL.audio&&SDL.audio.queueNewAudioData&&SDL.audio.queueNewAudioData(),g.mainLoop.scheduler()},i||(c&&c>0?bD(0,1e3/c):bD(1,1),g.mainLoop.scheduler()),h)throw"SimulateInfiniteLoop"}g={mainLoop:{scheduler:null,method:"",currentlyRunningMainloop:0,func:null,arg:0,timingMode:0,timingValue:0,currentFrameNumber:0,queue:[],pause:function(){g.mainLoop.scheduler=null,g.mainLoop.currentlyRunningMainloop++},resume:function(){var a,b,c;g.mainLoop.currentlyRunningMainloop++,a=g.mainLoop.timingMode,b=g.mainLoop.timingValue,c=g.mainLoop.func,g.mainLoop.func=null,ck(c,0,!1,g.mainLoop.arg,!0),bD(a,b),g.mainLoop.scheduler()},updateStatus:function(){var c,a,b;f.setStatus&&(c=f.statusMessage||"Please wait...",a=g.mainLoop.remainingBlockers,b=g.mainLoop.expectedBlockers,a?a<b?f.setStatus(c+" ("+(b-a)+"/"+b+")"):f.setStatus(c):f.setStatus(""))},runIter:function(a){if(ab)return;if(f.preMainLoop){var b=f.preMainLoop();if(b===!1)return}try{a()}catch(a){if(a instanceof bG)return;throw a&&typeof a=="object"&&a.stack&&t("exception thrown: "+[a,a.stack]),a}f.postMainLoop&&f.postMainLoop()}},isFullscreen:!1,pointerLock:!1,moduleContextCreatedCallbacks:[],workers:[],init:function(){var b,c,a;if(f.preloadPlugins||(f.preloadPlugins=[]),g.initted)return;g.initted=!0;try{new Blob,g.hasBlobConstructor=!0}catch(a){g.hasBlobConstructor=!1,console.log("warning: no blob constructor, cannot create blobs with mimetypes")}g.BlobBuilder=typeof MozBlobBuilder!="undefined"?MozBlobBuilder:typeof WebKitBlobBuilder!="undefined"?WebKitBlobBuilder:g.hasBlobConstructor?null:console.log("warning: no BlobBuilder"),g.URLObject=typeof window!="undefined"?window.URL?window.URL:window.webkitURL:void 0,!f.noImageDecoding&&typeof g.URLObject=="undefined"&&(console.log("warning: Browser does not support creating object URLs. Built-in browser image decoding will not be available."),f.noImageDecoding=!0),b={},b.canHandle=function(a){return!f.noImageDecoding&&/\.(jpg|jpeg|png|bmp)$/i.test(a)},b.handle=function(c,d,i,j){var b=null,h,e,a;if(g.hasBlobConstructor)try{b=new Blob([c],{type:g.getMimetype(d)}),b.size!==c.length&&(b=new Blob([new Uint8Array(c).buffer],{type:g.getMimetype(d)}))}catch(a){aH("Blob constructor present but fails: "+a+"; falling back to blob builder")}b||(h=new g.BlobBuilder,h.append(new Uint8Array(c).buffer),b=h.getBlob()),e=g.URLObject.createObjectURL(b),a=new Image,a.onload=function(){var b,h;M(a.complete,"Image "+d+" could not be decoded"),b=document.createElement("canvas"),b.width=a.width,b.height=a.height,h=b.getContext("2d"),h.drawImage(a,0,0),f.preloadedImages[d]=b,g.URLObject.revokeObjectURL(e),i&&i(c)},a.onerror=function(b){console.log("Image "+e+" could not be decoded"),j&&j()},a.src=e},f.preloadPlugins.push(b),c={},c.canHandle=function(a){return!f.noAudioDecoding&&a.substr(-4)in{".ogg":1,".wav":1,".mp3":1}},c.handle=function(e,b,h,j){var c=!1,k,l,a;function d(a){if(c)return;c=!0,f.preloadedAudios[b]=a,h&&h(e)}function i(){if(c)return;c=!0,f.preloadedAudios[b]=new Audio,j&&j()}if(g.hasBlobConstructor){try{k=new Blob([e],{type:g.getMimetype(b)})}catch(a){return i()}l=g.URLObject.createObjectURL(k),a=new Audio,a.addEventListener("canplaythrough",function(){d(a)},!1),a.onerror=function(h){if(c)return;console.log("warning: browser could not fully decode audio "+b+", trying slower base64 approach");function f(g){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",f="=",a="",c=0,b=0,d=0,h;d<g.length;d++)for(c=c<<8|g[d],b+=8;b>=6;)h=c>>b-6&63,b-=6,a+=e[h];return b==2?(a+=e[(c&3)<<4],a+=f+f):b==4&&(a+=e[(c&15)<<2],a+=f),a}a.src="data:audio/x-"+b.substr(-3)+";base64,"+f(e),d(a)},a.src=l,g.safeSetTimeout(function(){d(a)},1e4)}else return i()},f.preloadPlugins.push(c);function d(){g.pointerLock=document.pointerLockElement===f.canvas||document.mozPointerLockElement===f.canvas||document.webkitPointerLockElement===f.canvas||document.msPointerLockElement===f.canvas}a=f.canvas,a&&(a.requestPointerLock=a.requestPointerLock||a.mozRequestPointerLock||a.webkitRequestPointerLock||a.msRequestPointerLock||function(){},a.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock||document.msExitPointerLock||function(){},a.exitPointerLock=a.exitPointerLock.bind(document),document.addEventListener("pointerlockchange",d,!1),document.addEventListener("mozpointerlockchange",d,!1),document.addEventListener("webkitpointerlockchange",d,!1),document.addEventListener("mspointerlockchange",d,!1),f.elementPointerLock&&a.addEventListener("click",function(a){!g.pointerLock&&f.canvas.requestPointerLock&&(f.canvas.requestPointerLock(),a.preventDefault())},!1))},createContext:function(h,b,l,i){var a,e,j,k;if(b&&f.ctx&&h==f.canvas)return f.ctx;if(b){if(j={antialias:!1,alpha:!1,majorVersion:typeof WebGL2RenderingContext!="undefined"?2:1},i)for(k in i)j[k]=i[k];typeof c!="undefined"&&(e=c.createContext(h,j),e&&(a=c.getContext(e).GLctx))}else a=h.getContext("2d");return a?(l&&(b||M(typeof d=="undefined","cannot set in module if GLctx is used, but we are a non-GL context that would replace it"),f.ctx=a,b&&c.makeContextCurrent(e),f.useWebGL=b,g.moduleContextCreatedCallbacks.forEach(function(a){a()}),g.init()),a):null},destroyContext:function(a,b,c){},fullscreenHandlersInstalled:!1,lockPointer:void 0,resizeCanvas:void 0,requestFullscreen:function(e,h,d){var b,a;g.lockPointer=e,g.resizeCanvas=h,g.vrDevice=d,typeof g.lockPointer=="undefined"&&(g.lockPointer=!0),typeof g.resizeCanvas=="undefined"&&(g.resizeCanvas=!1),typeof g.vrDevice=="undefined"&&(g.vrDevice=null),b=f.canvas;function c(){g.isFullscreen=!1;var a=b.parentNode;(document.fullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement||document.webkitCurrentFullScreenElement)===a?(b.exitFullscreen=g.exitFullscreen,g.lockPointer&&b.requestPointerLock(),g.isFullscreen=!0,g.resizeCanvas?g.setFullscreenCanvasSize():g.updateCanvasDimensions(b)):(a.parentNode.insertBefore(b,a),a.parentNode.removeChild(a),g.resizeCanvas?g.setWindowedCanvasSize():g.updateCanvasDimensions(b)),f.onFullScreen&&f.onFullScreen(g.isFullscreen),f.onFullscreen&&f.onFullscreen(g.isFullscreen)}g.fullscreenHandlersInstalled||(g.fullscreenHandlersInstalled=!0,document.addEventListener("fullscreenchange",c,!1),document.addEventListener("mozfullscreenchange",c,!1),document.addEventListener("webkitfullscreenchange",c,!1),document.addEventListener("MSFullscreenChange",c,!1)),a=document.createElement("div"),b.parentNode.insertBefore(a,b),a.appendChild(b),a.requestFullscreen=a.requestFullscreen||a.mozRequestFullScreen||a.msRequestFullscreen||(a.webkitRequestFullscreen?function(){a.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)}:null)||(a.webkitRequestFullScreen?function(){a.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT)}:null),d?a.requestFullscreen({vrDisplay:d}):a.requestFullscreen()},requestFullScreen:function(a,b,c){return t("Browser.requestFullScreen() is deprecated. Please call Browser.requestFullscreen instead."),g.requestFullScreen=function(a,b,c){return g.requestFullscreen(a,b,c)},g.requestFullscreen(a,b,c)},exitFullscreen:function(){if(!g.isFullscreen)return!1;var a=document.exitFullscreen||document.cancelFullScreen||document.mozCancelFullScreen||document.msExitFullscreen||document.webkitCancelFullScreen||function(){};return a.apply(document,[]),!0},nextRAF:0,fakeRequestAnimationFrame:function(b){var a=Date.now(),c;if(g.nextRAF===0)g.nextRAF=a+1e3/60;else while(a+2>=g.nextRAF)g.nextRAF+=1e3/60;c=Math.max(g.nextRAF-a,0),setTimeout(b,c)},requestAnimationFrame:function(a){if(typeof requestAnimationFrame=="function"){requestAnimationFrame(a);return}var b=g.fakeRequestAnimationFrame;b(a)},safeCallback:function(a){return function(){if(!ab)return a.apply(null,arguments)}},allowAsyncCallbacks:!0,queuedAsyncCallbacks:[],pauseAsyncCallbacks:function(){g.allowAsyncCallbacks=!1},resumeAsyncCallbacks:function(){if(g.allowAsyncCallbacks=!0,g.queuedAsyncCallbacks.length>0){var a=g.queuedAsyncCallbacks;g.queuedAsyncCallbacks=[],a.forEach(function(a){a()})}},safeRequestAnimationFrame:function(a){return g.requestAnimationFrame(function(){if(ab)return;g.allowAsyncCallbacks?a():g.queuedAsyncCallbacks.push(a)})},safeSetTimeout:function(a,b){return af=!0,setTimeout(function(){if(ab)return;g.allowAsyncCallbacks?a():g.queuedAsyncCallbacks.push(a)},b)},safeSetInterval:function(a,b){return af=!0,setInterval(function(){if(ab)return;g.allowAsyncCallbacks&&a()},b)},getMimetype:function(a){return{jpg:"image/jpeg",jpeg:"image/jpeg",png:"image/png",bmp:"image/bmp",ogg:"audio/ogg",wav:"audio/wav",mp3:"audio/mpeg"}[a.substr(a.lastIndexOf(".")+1)]},getUserMedia:function(a){window.getUserMedia||(window.getUserMedia=navigator.getUserMedia||navigator.mozGetUserMedia),window.getUserMedia(a)},getMovementX:function(a){return a.movementX||a.mozMovementX||a.webkitMovementX||0},getMovementY:function(a){return a.movementY||a.mozMovementY||a.webkitMovementY||0},getMouseWheelDelta:function(a){var b=0;switch(a.type){case"DOMMouseScroll":b=a.detail/3;break;case"mousewheel":b=a.wheelDelta/120;break;case"wheel":switch(b=a.deltaY,a.deltaMode){case 0:b/=100;break;case 1:b/=3;break;case 2:b*=80;break;default:throw"unrecognized mouse wheel delta mode: "+a.deltaMode}break;default:throw"unrecognized mouse wheel event: "+a.type}return b},mouseX:0,mouseY:0,mouseMovementX:0,mouseMovementY:0,touches:{},lastTouches:{},calculateMouseEvent:function(a){var b,o,l,m,n,c,j,k,d,i,e,h;if(g.pointerLock)a.type!="mousemove"&&"mozMovementX"in a?g.mouseMovementX=g.mouseMovementY=0:(g.mouseMovementX=g.getMovementX(a),g.mouseMovementY=g.getMovementY(a)),typeof SDL!="undefined"?(g.mouseX=SDL.mouseX+g.mouseMovementX,g.mouseY=SDL.mouseY+g.mouseMovementY):(g.mouseX+=g.mouseMovementX,g.mouseY+=g.mouseMovementY);else{if(b=f.canvas.getBoundingClientRect(),o=f.canvas.width,l=f.canvas.height,m=typeof window.scrollX!="undefined"?window.scrollX:window.pageXOffset,n=typeof window.scrollY!="undefined"?window.scrollY:window.pageYOffset,a.type==="touchstart"||a.type==="touchend"||a.type==="touchmove"){if(c=a.touch,c===void 0)return;j=c.pageX-(m+b.left),k=c.pageY-(n+b.top),j=j*(o/b.width),k=k*(l/b.height),d={x:j,y:k},a.type==="touchstart"?(g.lastTouches[c.identifier]=d,g.touches[c.identifier]=d):(a.type==="touchend"||a.type==="touchmove")&&(i=g.touches[c.identifier],i||(i=d),g.lastTouches[c.identifier]=i,g.touches[c.identifier]=d);return}e=a.pageX-(m+b.left),h=a.pageY-(n+b.top),e=e*(o/b.width),h=h*(l/b.height),g.mouseMovementX=e-g.mouseX,g.mouseMovementY=h-g.mouseY,g.mouseX=e,g.mouseY=h}},asyncLoad:function(a,d,c,e){var b=e?"":cz("al "+a);bm(a,function(c){M(c,'Loading data file "'+a+'" failed (no arrayBuffer).'),d(new Uint8Array(c)),b&&aQ(b)},function(b){if(c)c();else throw'Loading data file "'+a+'" failed.'}),b&&bt(b)},resizeListeners:[],updateResizeListeners:function(){var a=f.canvas;g.resizeListeners.forEach(function(b){b(a.width,a.height)})},setCanvasSize:function(a,b,c){var d=f.canvas;g.updateCanvasDimensions(d,a,b),c||g.updateResizeListeners()},windowedWidth:0,windowedHeight:0,setFullscreenCanvasSize:function(){if(typeof SDL!="undefined"){var a=E[SDL.screen>>2];a=a|8388608,e[SDL.screen>>2]=a}g.updateCanvasDimensions(f.canvas),g.updateResizeListeners()},setWindowedCanvasSize:function(){if(typeof SDL!="undefined"){var a=E[SDL.screen>>2];a=a&~8388608,e[SDL.screen>>2]=a}g.updateCanvasDimensions(f.canvas),g.updateResizeListeners()},updateCanvasDimensions:function(a,d,e){var b,c,h;d&&e?(a.widthNative=d,a.heightNative=e):(d=a.widthNative,e=a.heightNative),b=d,c=e,f.forcedAspectRatio&&f.forcedAspectRatio>0&&(b/c<f.forcedAspectRatio?b=Math.round(c*f.forcedAspectRatio):c=Math.round(b/f.forcedAspectRatio)),(document.fullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement||document.webkitCurrentFullScreenElement)===a.parentNode&&typeof screen!="undefined"&&(h=Math.min(screen.width/b,screen.height/c),b=Math.round(b*h),c=Math.round(c*h)),g.resizeCanvas?(a.width!=b&&(a.width=b),a.height!=c&&(a.height=c),typeof a.style!="undefined"&&(a.style.removeProperty("width"),a.style.removeProperty("height"))):(a.width!=d&&(a.width=d),a.height!=e&&(a.height=e),typeof a.style!="undefined"&&(b!=d||c!=e?(a.style.setProperty("width",b+"px","important"),a.style.setProperty("height",c+"px","important")):(a.style.removeProperty("width"),a.style.removeProperty("height"))))},wgetRequests:{},nextWgetRequestHandle:0,getNextWgetRequestHandle:function(){var a=g.nextWgetRequestHandle;return g.nextWgetRequestHandle++,a}},U={errorCode:12288,defaultDisplayInitialized:!1,currentContext:0,currentReadSurface:0,currentDrawSurface:0,contextAttributes:{alpha:!1,depth:!1,stencil:!1,antialias:!1},stringCache:{},setErrorCode:function(a){U.errorCode=a},chooseConfig:function(l,a,d,j,f){var b,g,h,i,c,k;if(l!=62e3)return U.setErrorCode(12296),0;if(a)for(;;){if(b=e[a>>2],b==12321)g=e[a+4>>2],U.contextAttributes.alpha=g>0;else if(b==12325)h=e[a+4>>2],U.contextAttributes.depth=h>0;else if(b==12326)i=e[a+4>>2],U.contextAttributes.stencil=i>0;else if(b==12337)c=e[a+4>>2],U.contextAttributes.antialias=c>0;else if(b==12338)c=e[a+4>>2],U.contextAttributes.antialias=c==1;else if(b==12544)k=e[a+4>>2],U.contextAttributes.lowLatency=k!=12547;else if(b==12344)break;a+=8}return(!d||!j)&&!f?(U.setErrorCode(12300),0):(f&&(e[f>>2]=1),d&&j>0&&(e[d>>2]=62002),U.setErrorCode(12288),1)}};function iX(a){return cp(a)}function iS(){g.mainLoop.pause(),g.mainLoop.func=null}j={keyEvent:0,mouseEvent:0,wheelEvent:0,uiEvent:0,focusEvent:0,deviceOrientationEvent:0,deviceMotionEvent:0,fullscreenChangeEvent:0,pointerlockChangeEvent:0,visibilityChangeEvent:0,touchEvent:0,previousFullscreenElement:null,previousScreenX:null,previousScreenY:null,removeEventListenersRegistered:!1,removeAllEventListeners:function(){for(var a=j.eventHandlers.length-1;a>=0;--a)j._removeHandler(a);j.eventHandlers=[],j.deferredCalls=[]},registerRemoveEventListeners:function(){j.removeEventListenersRegistered||(a$.push(j.removeAllEventListeners),j.removeEventListenersRegistered=!0)},deferredCalls:[],deferCall:function(b,e,c){var d,a;function f(a,b){if(a.length!=b.length)return!1;for(var c in a)if(a[c]!=b[c])return!1;return!0}for(d in j.deferredCalls)if(a=j.deferredCalls[d],a.targetFunction==b&&f(a.argsList,c))return;j.deferredCalls.push({targetFunction:b,precedence:e,argsList:c}),j.deferredCalls.sort(function(a,b){return a.precedence<b.precedence})},removeDeferredCalls:function(b){for(var a=0;a<j.deferredCalls.length;++a)j.deferredCalls[a].targetFunction==b&&(j.deferredCalls.splice(a,1),--a)},canPerformEventHandlerRequests:function(){return j.inEventHandler&&j.currentEventHandler.allowsDeferredCalls},runDeferredCalls:function(){var a,b;if(!j.canPerformEventHandlerRequests())return;for(a=0;a<j.deferredCalls.length;++a)b=j.deferredCalls[a],j.deferredCalls.splice(a,1),--a,b.targetFunction.apply(this,b.argsList)},inEventHandler:0,currentEventHandler:null,eventHandlers:[],isInternetExplorer:function(){return navigator.userAgent.indexOf("MSIE")!==-1||navigator.appVersion.indexOf("Trident/")>0},removeAllHandlersOnTarget:function(c,b){for(var a=0;a<j.eventHandlers.length;++a)j.eventHandlers[a].target==c&&(!b||b==j.eventHandlers[a].eventTypeString)&&j._removeHandler(a--)},_removeHandler:function(b){var a=j.eventHandlers[b];a.target.removeEventListener(a.eventTypeString,a.eventListenerFunc,a.useCapture),j.eventHandlers.splice(b,1)},registerOrRemoveHandler:function(a){var c=function(b){++j.inEventHandler,j.currentEventHandler=a,j.runDeferredCalls(),a.handlerFunc(b),j.runDeferredCalls(),--j.inEventHandler},b;if(a.callbackfunc)a.eventListenerFunc=c,a.target.addEventListener(a.eventTypeString,c,a.useCapture),j.eventHandlers.push(a),j.registerRemoveEventListeners();else for(b=0;b<j.eventHandlers.length;++b)j.eventHandlers[b].target==a.target&&j.eventHandlers[b].eventTypeString==a.eventTypeString&&j._removeHandler(b--)},getBoundingClientRectOrZeros:function(a){return a.getBoundingClientRect?a.getBoundingClientRect():{left:0,top:0}},pageScrollPos:function(){return pageXOffset>0||pageYOffset>0?[pageXOffset,pageYOffset]:typeof document.documentElement.scrollLeft!="undefined"||typeof document.documentElement.scrollTop!="undefined"?[document.documentElement.scrollLeft,document.documentElement.scrollTop]:[document.body.scrollLeft|0,document.body.scrollTop|0]},getNodeNameForTarget:function(a){return a?a==window?"#window":a==screen?"#screen":a&&a.nodeName?a.nodeName:"":""},tick:function(){return window.performance&&window.performance.now?window.performance.now():Date.now()},fullscreenEnabled:function(){return document.fullscreenEnabled||document.mozFullScreenEnabled||document.webkitFullscreenEnabled||document.msFullscreenEnabled}};function aK(a,b,c){j.isInternetExplorer()?(a.style.marginLeft=a.style.marginRight=c+"px",a.style.marginTop=a.style.marginBottom=b+"px"):(a.style.paddingLeft=a.style.paddingRight=c+"px",a.style.paddingTop=a.style.paddingBottom=b+"px")}function iO(f){for(var c=f,d=c.parentNode,e=[],b,a;c!=document.body;){b=d.children;for(a=0;a<b.length;++a)b[a]!=c&&(e.push({node:b[a],displayState:b[a].style.display}),b[a].style.display="none");c=d,d=d.parentNode}return e}aM=null,aT=[0,typeof document!="undefined"?document:0,typeof window!="undefined"?window:0];function S(a){try{return a?(typeof a=="number"&&(a=aT[a]||l(a)),a==="#window")?window:a==="#document"?document:a==="#screen"?screen:a==="#canvas"?f.canvas:typeof a=="string"?document.getElementById(a):a:window}catch(a){return null}}function bx(a){return typeof a=="number"&&(a=l(a)),!a||a==="#canvas"?typeof c!="undefined"&&c.offscreenCanvases.canvas?c.offscreenCanvases.canvas:f.canvas:typeof c!="undefined"&&c.offscreenCanvases[a]?c.offscreenCanvases[a]:S(a)}function cw(b,c,d){var a=bx(b);if(!a)return-4;e[c>>2]=a.width,e[d>>2]=a.height}function bv(a){var f=F(),b=_(8),c=b+4,d=_(a.id.length+1),h,g;return q(a.id,d,a.id.length+1),h=cw(d,b,c),g=[e[b>>2],e[c>>2]],D(f),g}function cy(b,d,e){var a=bx(b);return a?(a.width=d,a.height=e,a.GLctxObject&&c.resizeOffscreenFramebuffer(a.GLctxObject),0):-4}function bu(a,c,d){var e,b;a.controlTransferredOffscreen?(e=F(),b=_(a.id.length+1),q(a.id,b,a.id.length+1),cy(b,c,d),D(e)):(a.width=c,a.height=d)}function iN(a){var f=bv(a),e=f[0],d=f[1],l=a.style.width,k=a.style.height,h=a.style.backgroundColor,c=document.body.style.backgroundColor,i=a.style.paddingLeft,j=a.style.paddingRight,u=a.style.paddingTop,g=a.style.paddingBottom,m=a.style.marginLeft,n=a.style.marginRight,o=a.style.marginTop,p=a.style.marginBottom,q=document.body.style.margin,r=document.documentElement.style.overflow,s=document.body.scroll,t=a.style.imageRendering;function b(){var f=document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement;f||(document.removeEventListener("fullscreenchange",b),document.removeEventListener("mozfullscreenchange",b),document.removeEventListener("webkitfullscreenchange",b),document.removeEventListener("MSFullscreenChange",b),bu(a,e,d),a.style.width=l,a.style.height=k,a.style.backgroundColor=h,c||(document.body.style.backgroundColor="white"),document.body.style.backgroundColor=c,a.style.paddingLeft=i,a.style.paddingRight=j,a.style.paddingTop=u,a.style.paddingBottom=g,a.style.marginLeft=m,a.style.marginRight=n,a.style.marginTop=o,a.style.marginBottom=p,document.body.style.margin=q,document.documentElement.style.overflow=r,document.body.scroll=s,a.style.imageRendering=t,a.GLctxObject&&a.GLctxObject.GLctx.viewport(0,0,e,d),C.canvasResizedCallback&&K(C.canvasResizedCallback,37,0,C.canvasResizedCallbackUserData))}return document.addEventListener("fullscreenchange",b),document.addEventListener("mozfullscreenchange",b),document.addEventListener("webkitfullscreenchange",b),document.addEventListener("MSFullscreenChange",b),b}function iJ(b){for(var a=0;a<b.length;++a)b[a].node.style.display=b[a].displayState}C={};function cD(){var e=devicePixelRatio,h=C.canvasResolutionScaleMode==2,p=C.scaleMode==2,m=C.canvasResolutionScaleMode!=0,l=C.scaleMode==3,n=h?Math.round(innerWidth*e):innerWidth,k=h?Math.round(innerHeight*e):innerHeight,a=n,b=k,c=C.target,j=bv(c),f=j[0],g=j[1],d,o,i;p&&(a*g<f*b?b=a*g/f|0:a*g>f*b&&(a=b*f/g|0),d=(k-b)/2|0),m&&(bu(c,a,b),c.GLctxObject&&c.GLctxObject.GLctx.viewport(0,0,a,b)),h&&(d/=e,a/=e,b/=e,a=Math.round(a*1e4)/1e4,b=Math.round(b*1e4)/1e4,d=Math.round(d*1e4)/1e4),l?(o=(innerHeight-parseInt(c.style.height))/2,i=(innerWidth-parseInt(c.style.width))/2,aK(c,o,i)):(c.style.width=a+"px",c.style.height=b+"px",i=(innerWidth-a)/2,aK(c,d,i)),!l&&C.canvasResizedCallback&&K(C.canvasResizedCallback,37,0,C.canvasResizedCallbackUserData)}function cE(a,d){var p=iN(a),b=d.softFullscreen?innerWidth:screen.width,c=d.softFullscreen?innerHeight:screen.height,e=a.getBoundingClientRect(),j=e.right-e.left,i=e.bottom-e.top,h=bv(a),g=h[0],f=h[1],l,m,n,k,o;return d.scaleMode==3?(aK(a,(c-i)/2,(b-j)/2),b=j,c=i):d.scaleMode==2&&(b*f<g*c?(l=f*b/g,aK(a,(c-l)/2,0),c=l):(m=g*c/f,aK(a,0,(b-m)/2),b=m)),a.style.backgroundColor||(a.style.backgroundColor="black"),document.body.style.backgroundColor||(document.body.style.backgroundColor="black"),a.style.width=b+"px",a.style.height=c+"px",d.filteringMode==1&&(a.style.imageRendering="optimizeSpeed",a.style.imageRendering="-moz-crisp-edges",a.style.imageRendering="-o-crisp-edges",a.style.imageRendering="-webkit-optimize-contrast",a.style.imageRendering="optimize-contrast",a.style.imageRendering="crisp-edges",a.style.imageRendering="pixelated"),n=d.canvasResolutionScaleMode==2?devicePixelRatio:1,d.canvasResolutionScaleMode!=0&&(k=b*n|0,o=c*n|0,bu(a,k,o),a.GLctxObject&&a.GLctxObject.GLctx.viewport(0,0,k,o)),p}function iG(b,c){var a,d,f;if(b||(b="#canvas"),b=S(b),!b)return-4;a={},a.scaleMode=e[c>>2],a.canvasResolutionScaleMode=e[c+4>>2],a.filteringMode=e[c+8>>2],a.canvasResizedCallback=e[c+12>>2],a.canvasResizedCallbackUserData=e[c+16>>2],a.target=b,a.softFullscreen=!0,d=cE(b,a),document.documentElement.style.overflow="hidden",document.body.scroll="no",document.body.style.margin="0px",f=iO(b);function g(){d(),iJ(f),removeEventListener("resize",cD),a.canvasResizedCallback&&K(a.canvasResizedCallback,37,0,a.canvasResizedCallbackUserData),C=0}return aM=g,C=a,addEventListener("resize",cD),a.canvasResizedCallback&&K(a.canvasResizedCallback,37,0,a.canvasResizedCallbackUserData),0}function bp(a,b){if((b.scaleMode!=0||b.canvasResolutionScaleMode!=0)&&cE(a,b),a.requestFullscreen)a.requestFullscreen();else if(a.msRequestFullscreen)a.msRequestFullscreen();else if(a.mozRequestFullScreen)a.mozRequestFullScreen();else if(a.mozRequestFullscreen)a.mozRequestFullscreen();else if(a.webkitRequestFullscreen)a.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT);else return j.fullscreenEnabled()?-3:-1;return b.canvasResizedCallback&&K(b.canvasResizedCallback,37,0,b.canvasResizedCallbackUserData),0}function iE(){if(!j.fullscreenEnabled())return-1;j.removeDeferredCalls(bp);var a=aT[1];if(a.exitFullscreen)a.fullscreenElement&&a.exitFullscreen();else if(a.msExitFullscreen)a.msFullscreenElement&&a.msExitFullscreen();else if(a.mozCancelFullScreen)a.mozFullScreenElement&&a.mozCancelFullScreen();else if(a.webkitExitFullscreen)a.webkitFullscreenElement&&a.webkitExitFullscreen();else return-1;return C.canvasResizedCallback&&(K(C.canvasResizedCallback,37,0,C.canvasResizedCallbackUserData),C=0),0}function bk(a){if(a.requestPointerLock)a.requestPointerLock();else if(a.mozRequestPointerLock)a.mozRequestPointerLock();else if(a.webkitRequestPointerLock)a.webkitRequestPointerLock();else if(a.msRequestPointerLock)a.msRequestPointerLock();else return document.body.requestPointerLock||document.body.mozRequestPointerLock||document.body.webkitRequestPointerLock||document.body.msRequestPointerLock?-3:-1;return 0}function ir(){if(j.removeDeferredCalls(bk),document.exitPointerLock)document.exitPointerLock();else if(document.msExitPointerLock)document.msExitPointerLock();else if(document.mozExitPointerLock)document.mozExitPointerLock();else if(document.webkitExitPointerLock)document.webkitExitPointerLock();else return-1;return 0}function iq(){return aM&&aM(),aM=null,0}function gH(a){af=!1,bj(a)}function gG(a,c,d){if(a=a?S(a):f.canvas,!a)return-4;if(a.getBoundingClientRect){var b=a.getBoundingClientRect();z[c>>3]=b.right-b.left,z[d>>3]=b.bottom-b.top}else z[c>>3]=a.clientWidth,z[d>>3]=a.clientHeight;return 0}function cN(a,h){var c=document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement,d=!!c,b,f,g;e[a>>2]=d,e[a+4>>2]=j.fullscreenEnabled(),b=d?c:j.previousFullscreenElement,f=j.getNodeNameForTarget(b),g=b&&b.id?b.id:"",q(f,a+8,128),q(g,a+136,128),e[a+264>>2]=b?b.clientWidth:0,e[a+268>>2]=b?b.clientHeight:0,e[a+272>>2]=screen.width,e[a+276>>2]=screen.height,d&&(j.previousFullscreenElement=c)}function gF(a){return j.fullscreenEnabled()?(cN(a),0):-1}function c$(c,b){var a;z[c>>3]=b.timestamp;for(a=0;a<b.axes.length;++a)z[c+a*8+16>>3]=b.axes[a];for(a=0;a<b.buttons.length;++a)typeof b.buttons[a]=="object"?z[c+a*8+528>>3]=b.buttons[a].value:z[c+a*8+528>>3]=b.buttons[a];for(a=0;a<b.buttons.length;++a)typeof b.buttons[a]=="object"?e[c+a*4+1040>>2]=b.buttons[a].pressed:e[c+a*4+1040>>2]=b.buttons[a]==1;e[c+1296>>2]=b.connected,e[c+1300>>2]=b.index,e[c+8>>2]=b.axes.length,e[c+12>>2]=b.buttons.length,q(b.id,c+1304,64),q(b.mapping,c+1368,64)}function gE(a,b){return a<0||a>=j.lastGamepadState.length?-5:j.lastGamepadState[a]?(c$(b,j.lastGamepadState[a]),0):-7}function cR(){return s.length}function gD(){return j.lastGamepadState.length}function gq(b,g){var a=document.pointerLockElement||document.mozPointerLockElement||document.webkitPointerLockElement||document.msPointerLockElement,c=!!a,d,f;e[b>>2]=c,d=j.getNodeNameForTarget(a),f=a&&a.id?a.id:"",q(d,b+4,128),q(f,b+132,128)}function fX(a){return a&&gq(a),!document.body||!document.body.requestPointerLock&&!document.body.mozRequestPointerLock&&!document.body.webkitRequestPointerLock&&!document.body.msRequestPointerLock?-1:0}c={counter:1,lastError:0,buffers:[],mappedBuffers:{},programs:[],framebuffers:[],renderbuffers:[],textures:[],uniforms:[],shaders:[],vaos:[],contexts:{},currentContext:null,offscreenCanvases:{},timerQueriesEXT:[],queries:[],samplers:[],transformFeedbacks:[],syncs:[],programInfos:{},stringCache:{},stringiCache:{},unpackAlignment:4,init:function(){c.miniTempBuffer=new Float32Array(c.MINI_TEMP_BUFFER_SIZE);for(var a=0;a<c.MINI_TEMP_BUFFER_SIZE;a++)c.miniTempBufferViews[a]=c.miniTempBuffer.subarray(0,a+1)},recordError:function(a){c.lastError||(c.lastError=a)},getNewId:function(b){for(var d=c.counter++,a=b.length;a<d;a++)b[a]=null;return d},MINI_TEMP_BUFFER_SIZE:256,miniTempBuffer:null,miniTempBufferViews:[0],getSource:function(h,f,g,c){for(var d="",a=0,b;a<f;++a)b=c?e[c+a*4>>2]:-1,d+=l(e[g+a*4>>2],b<0?void 0:b);return d},createContext:function(b,a){var d,e;return a.renderViaOffscreenBackBuffer&&(a.preserveDrawingBuffer=!0),d=a.majorVersion>1?b.getContext("webgl2",a):b.getContext("webgl",a)||b.getContext("experimental-webgl",a),!d?0:(e=c.registerContext(d,a),e)},enableOffscreenFramebufferAttributes:function(a){a.renderViaOffscreenBackBuffer=!0,a.preserveDrawingBuffer=!0},createOffscreenFramebuffer:function(b){var a=b.GLctx,g=a.createFramebuffer(),i,j,n,m,h,k,e,l,f,d;a.bindFramebuffer(a.FRAMEBUFFER,g),b.defaultFbo=g,b.defaultFboForbidBlitFramebuffer=!1,a.getContextAttributes().antialias?b.defaultFboForbidBlitFramebuffer=!0:(i=navigator.userAgent.toLowerCase().match(/firefox\/(\d\d)/),i!=null&&(j=i[1],b.defaultFboForbidBlitFramebuffer=j<67)),b.defaultColorTarget=a.createTexture(),b.defaultDepthTarget=a.createRenderbuffer(),c.resizeOffscreenFramebuffer(b),a.bindTexture(a.TEXTURE_2D,b.defaultColorTarget),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.NEAREST),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.NEAREST),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.canvas.width,a.canvas.height,0,a.RGBA,a.UNSIGNED_BYTE,null),a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,b.defaultColorTarget,0),a.bindTexture(a.TEXTURE_2D,null),n=a.createRenderbuffer(),a.bindRenderbuffer(a.RENDERBUFFER,b.defaultDepthTarget),a.renderbufferStorage(a.RENDERBUFFER,a.DEPTH_COMPONENT16,a.canvas.width,a.canvas.height),a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_ATTACHMENT,a.RENDERBUFFER,b.defaultDepthTarget),a.bindRenderbuffer(a.RENDERBUFFER,null),m=[-1,-1,-1,1,1,-1,1,1],h=a.createBuffer(),a.bindBuffer(a.ARRAY_BUFFER,h),a.bufferData(a.ARRAY_BUFFER,new Float32Array(m),a.STATIC_DRAW),a.bindBuffer(a.ARRAY_BUFFER,null),b.blitVB=h,k="attribute vec2 pos;varying lowp vec2 tex;void main() { tex = pos * 0.5 + vec2(0.5,0.5); gl_Position = vec4(pos, 0.0, 1.0); }",e=a.createShader(a.VERTEX_SHADER),a.shaderSource(e,k),a.compileShader(e),l="varying lowp vec2 tex;uniform sampler2D sampler;void main() { gl_FragColor = texture2D(sampler, tex); }",f=a.createShader(a.FRAGMENT_SHADER),a.shaderSource(f,l),a.compileShader(f),d=a.createProgram(),a.attachShader(d,e),a.attachShader(d,f),a.linkProgram(d),b.blitProgram=d,b.blitPosLoc=a.getAttribLocation(d,"pos"),a.useProgram(d),a.uniform1i(a.getUniformLocation(d,"sampler"),0),a.useProgram(null),b.defaultVao=void 0,a.createVertexArray&&(b.defaultVao=a.createVertexArray(),a.bindVertexArray(b.defaultVao),a.enableVertexAttribArray(b.blitPosLoc),a.bindVertexArray(null))},resizeOffscreenFramebuffer:function(b){var a=b.GLctx,c,d;b.defaultColorTarget&&(c=a.getParameter(a.TEXTURE_BINDING_2D),a.bindTexture(a.TEXTURE_2D,b.defaultColorTarget),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.drawingBufferWidth,a.drawingBufferHeight,0,a.RGBA,a.UNSIGNED_BYTE,null),a.bindTexture(a.TEXTURE_2D,c)),b.defaultDepthTarget&&(d=a.getParameter(a.RENDERBUFFER_BINDING),a.bindRenderbuffer(a.RENDERBUFFER,b.defaultDepthTarget),a.renderbufferStorage(a.RENDERBUFFER,a.DEPTH_COMPONENT16,a.drawingBufferWidth,a.drawingBufferHeight),a.bindRenderbuffer(a.RENDERBUFFER,d))},blitOffscreenFramebuffer:function(b){var a=b.GLctx,k=a.getParameter(a.SCISSOR_TEST),t,s,r,q,p,i,j,n,l,u,d,h,f,c,e,g,o;if(k&&a.disable(a.SCISSOR_TEST),t=a.getParameter(a.FRAMEBUFFER_BINDING),a.blitFramebuffer&&!b.defaultFboForbidBlitFramebuffer)a.bindFramebuffer(a.READ_FRAMEBUFFER,b.defaultFbo),a.bindFramebuffer(a.DRAW_FRAMEBUFFER,null),a.blitFramebuffer(0,0,a.canvas.width,a.canvas.height,0,0,a.canvas.width,a.canvas.height,a.COLOR_BUFFER_BIT,a.NEAREST);else{a.bindFramebuffer(a.FRAMEBUFFER,null),s=a.getParameter(a.CURRENT_PROGRAM),a.useProgram(b.blitProgram),r=a.getParameter(a.ARRAY_BUFFER_BINDING),a.bindBuffer(a.ARRAY_BUFFER,b.blitVB),q=a.getParameter(a.ACTIVE_TEXTURE),a.activeTexture(a.TEXTURE0),p=a.getParameter(a.TEXTURE_BINDING_2D),a.bindTexture(a.TEXTURE_2D,b.defaultColorTarget),i=a.getParameter(a.BLEND),i&&a.disable(a.BLEND),j=a.getParameter(a.CULL_FACE),j&&a.disable(a.CULL_FACE),n=a.getParameter(a.DEPTH_TEST),n&&a.disable(a.DEPTH_TEST),l=a.getParameter(a.STENCIL_TEST),l&&a.disable(a.STENCIL_TEST);function m(){a.vertexAttribPointer(b.blitPosLoc,2,a.FLOAT,!1,0,0),a.drawArrays(a.TRIANGLE_STRIP,0,4)}if(b.defaultVao)u=a.getParameter(34229),a.bindVertexArray(b.defaultVao),m(),a.bindVertexArray(u);else{d={buffer:a.getVertexAttrib(b.blitPosLoc,a.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING),size:a.getVertexAttrib(b.blitPosLoc,a.VERTEX_ATTRIB_ARRAY_SIZE),stride:a.getVertexAttrib(b.blitPosLoc,a.VERTEX_ATTRIB_ARRAY_STRIDE),type:a.getVertexAttrib(b.blitPosLoc,a.VERTEX_ATTRIB_ARRAY_TYPE),normalized:a.getVertexAttrib(b.blitPosLoc,a.VERTEX_ATTRIB_ARRAY_NORMALIZED),pointer:a.getVertexAttribOffset(b.blitPosLoc,a.VERTEX_ATTRIB_ARRAY_POINTER)},h=a.getParameter(a.MAX_VERTEX_ATTRIBS),f=[];for(c=0;c<h;++c)e=a.getVertexAttrib(c,a.VERTEX_ATTRIB_ARRAY_ENABLED),g=c==b.blitPosLoc,e&&!g&&a.disableVertexAttribArray(c),!e&&g&&a.enableVertexAttribArray(c),f[c]=e;m();for(c=0;c<h;++c)e=f[c],o=c==b.blitPosLoc,e&&!o&&a.enableVertexAttribArray(c),!e&&o&&a.disableVertexAttribArray(c);a.bindBuffer(a.ARRAY_BUFFER,d.buffer),a.vertexAttribPointer(b.blitPosLoc,d.size,d.type,d.normalized,d.stride,d.offset)}l&&a.enable(a.STENCIL_TEST),n&&a.enable(a.DEPTH_TEST),j&&a.enable(a.CULL_FACE),i&&a.enable(a.BLEND),a.bindTexture(a.TEXTURE_2D,p),a.activeTexture(q),a.bindBuffer(a.ARRAY_BUFFER,r),a.useProgram(s)}a.bindFramebuffer(a.FRAMEBUFFER,t),k&&a.enable(a.SCISSOR_TEST)},registerContext:function(d,b){var e=B(8),a={handle:e,attributes:b,version:b.majorVersion,GLctx:d};function f(){var a=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./);return!!a&&parseInt(a[2],10)}return a.supportsWebGL2EntryPoints=a.version>=2&&(f()===!1||f()>=58),d.canvas&&(d.canvas.GLctxObject=a),c.contexts[e]=a,(typeof b.enableExtensionsByDefault=="undefined"||b.enableExtensionsByDefault)&&c.initExtensions(a),b.renderViaOffscreenBackBuffer&&c.createOffscreenFramebuffer(a),e},makeContextCurrent:function(a){return c.currentContext=c.contexts[a],f.ctx=d=c.currentContext&&c.currentContext.GLctx,!(a&&!d)},getContext:function(a){return c.contexts[a]},deleteContext:function(a){c.currentContext===c.contexts[a]&&(c.currentContext=null),typeof j=="object"&&j.removeAllHandlersOnTarget(c.contexts[a].GLctx.canvas),c.contexts[a]&&c.contexts[a].GLctx.canvas&&(c.contexts[a].GLctx.canvas.GLctxObject=void 0),ah(c.contexts[a]),c.contexts[a]=null},acquireInstancedArraysExtension:function(a){var b=a.getExtension("ANGLE_instanced_arrays");b&&(a.vertexAttribDivisor=function(a,c){b.vertexAttribDivisorANGLE(a,c)},a.drawArraysInstanced=function(a,c,d,e){b.drawArraysInstancedANGLE(a,c,d,e)},a.drawElementsInstanced=function(a,c,d,e,f){b.drawElementsInstancedANGLE(a,c,d,e,f)})},acquireVertexArrayObjectExtension:function(a){var b=a.getExtension("OES_vertex_array_object");b&&(a.createVertexArray=function(){return b.createVertexArrayOES()},a.deleteVertexArray=function(a){b.deleteVertexArrayOES(a)},a.bindVertexArray=function(a){b.bindVertexArrayOES(a)},a.isVertexArray=function(a){return b.isVertexArrayOES(a)})},acquireDrawBuffersExtension:function(a){var b=a.getExtension("WEBGL_draw_buffers");b&&(a.drawBuffers=function(a,c){b.drawBuffersWEBGL(a,c)})},initExtensions:function(b){var a,d,e;if(b||(b=c.currentContext),b.initExtensionsDone)return;b.initExtensionsDone=!0,a=b.GLctx,b.version<2&&(c.acquireInstancedArraysExtension(a),c.acquireVertexArrayObjectExtension(a),c.acquireDrawBuffersExtension(a)),a.disjointTimerQueryExt=a.getExtension("EXT_disjoint_timer_query"),d=["OES_texture_float","OES_texture_half_float","OES_standard_derivatives","OES_vertex_array_object","WEBGL_compressed_texture_s3tc","WEBGL_depth_texture","OES_element_index_uint","EXT_texture_filter_anisotropic","EXT_frag_depth","WEBGL_draw_buffers","ANGLE_instanced_arrays","OES_texture_float_linear","OES_texture_half_float_linear","EXT_blend_minmax","EXT_shader_texture_lod","WEBGL_compressed_texture_pvrtc","EXT_color_buffer_half_float","WEBGL_color_buffer_float","EXT_sRGB","WEBGL_compressed_texture_etc1","EXT_disjoint_timer_query","WEBGL_compressed_texture_etc","WEBGL_compressed_texture_astc","EXT_color_buffer_float","WEBGL_compressed_texture_s3tc_srgb","EXT_disjoint_timer_query_webgl2"],e=a.getSupportedExtensions()||[],e.forEach(function(b){d.indexOf(b)!=-1&&a.getExtension(b)})},populateUniformTable:function(k){for(var f=c.programs[k],j=c.programInfos[k]={uniforms:{},maxUniformLength:0,maxAttributeLength:-1,maxUniformBlockNameLength:-1},l=j.uniforms,m=d.getProgramParameter(f,35718),i=0,g,a,b,e,h,n;i<m;++i)if(g=d.getActiveUniform(f,i),a=g.name,j.maxUniformLength=Math.max(j.maxUniformLength,a.length+1),a.slice(-1)=="]"&&(a=a.slice(0,a.lastIndexOf("["))),b=d.getUniformLocation(f,a),b){e=c.getNewId(c.uniforms),l[a]=[g.size,e],c.uniforms[e]=b;for(h=1;h<g.size;++h)n=a+"["+h+"]",b=d.getUniformLocation(f,n),e=c.getNewId(c.uniforms),c.uniforms[e]=b}}};function fT(a){d.activeTexture(a)}function fJ(a,b){d.attachShader(c.programs[a],c.shaders[b])}function fm(a,b){d.beginQuery(a,c.queries[b])}function fd(a,b){d.disjointTimerQueryExt.beginQueryEXT(a,c.timerQueriesEXT[b])}function eM(a){d.beginTransformFeedback(a)}function ex(a,b,e){d.bindAttribLocation(c.programs[a],b,l(e))}function en(a,b){a==35051?d.currentPixelPackBufferBinding=b:a==35052&&(d.currentPixelUnpackBufferBinding=b),d.bindBuffer(a,c.buffers[b])}function db(a,b,e){d.bindBufferBase(a,b,c.buffers[e])}function dc(a,b,e,f,g){d.bindBufferRange(a,b,c.buffers[e],f,g)}function dd(b,a){d.bindFramebuffer(b,a?c.framebuffers[a]:c.currentContext.defaultFbo)}function de(a,b){d.bindRenderbuffer(a,c.renderbuffers[b])}function df(a,b){d.bindSampler(a,c.samplers[b])}function dg(a,b){d.bindTexture(a,c.textures[b])}function dh(a,b){d.bindTransformFeedback(a,c.transformFeedbacks[b])}function di(a){d.bindVertexArray(c.vaos[a])}function dj(a){d.bindVertexArray(c.vaos[a])}function dk(a,b,c,e){d.blendColor(a,b,c,e)}function dl(a){d.blendEquation(a)}function dm(a,b){d.blendEquationSeparate(a,b)}function dn(a,b){d.blendFunc(a,b)}function dp(a,b,c,e){d.blendFuncSeparate(a,b,c,e)}function dq(a,b,c,e,f,g,h,i,j,k){d.blitFramebuffer(a,b,c,e,f,g,h,i,j,k)}function dr(e,b,a,f){c.currentContext.supportsWebGL2EntryPoints?a?d.bufferData(e,m,f,a,b):d.bufferData(e,b,f):d.bufferData(e,a?m.subarray(a,a+b):b,f)}function ds(b,e,f,a){if(c.currentContext.supportsWebGL2EntryPoints){d.bufferSubData(b,e,m,a,f);return}d.bufferSubData(b,e,m.subarray(a,a+f))}function dt(a){return d.checkFramebufferStatus(a)}function du(a){d.clear(a)}function dv(a,b,c,e){d.clearBufferfi(a,b,c,e)}function dw(a,b,c){d.clearBufferfv(a,b,h,c>>2)}function dx(a,b,c){d.clearBufferiv(a,b,e,c>>2)}function dy(a,b,c){d.clearBufferuiv(a,b,E,c>>2)}function dz(a,b,c,e){d.clearColor(a,b,c,e)}function dA(a){d.clearDepth(a)}function dB(a){d.clearStencil(a)}function dC(e,f,a,b){a=a>>>0,b=b>>>0;var g=a==4294967295&&b==4294967295?-1:cH(a,b,!0);return d.clientWaitSync(c.syncs[e],f,g)}function dD(a,b,c,e){d.colorMask(!!a,!!b,!!c,!!e)}function dE(a){d.compileShader(c.shaders[a])}function dF(b,j,e,f,g,h,i,a){if(c.currentContext.supportsWebGL2EntryPoints){d.currentPixelUnpackBufferBinding?d.compressedTexImage2D(b,j,e,f,g,h,i,a):d.compressedTexImage2D(b,j,e,f,g,h,m,a,i);return}d.compressedTexImage2D(b,j,e,f,g,h,a?m.subarray(a,a+i):null)}function dG(b,e,k,f,g,h,i,j,a){c.currentContext.supportsWebGL2EntryPoints?d.currentPixelUnpackBufferBinding?d.compressedTexImage3D(b,e,k,f,g,h,i,j,a):d.compressedTexImage3D(b,e,k,f,g,h,i,m,a,j):d.compressedTexImage3D(b,e,k,f,g,h,i,a?m.subarray(a,a+j):null)}function dH(b,e,k,f,g,h,i,j,a){if(c.currentContext.supportsWebGL2EntryPoints){d.currentPixelUnpackBufferBinding?d.compressedTexSubImage2D(b,e,k,f,g,h,i,j,a):d.compressedTexSubImage2D(b,e,k,f,g,h,i,m,a,j);return}d.compressedTexSubImage2D(b,e,k,f,g,h,i,a?m.subarray(a,a+j):null)}function dI(b,e,f,g,n,h,i,j,k,l,a){c.currentContext.supportsWebGL2EntryPoints?d.currentPixelUnpackBufferBinding?d.compressedTexSubImage3D(b,e,f,g,n,h,i,j,k,l,a):d.compressedTexSubImage3D(b,e,f,g,n,h,i,j,k,m,a,l):d.compressedTexSubImage3D(b,e,f,g,n,h,i,j,k,a?m.subarray(a,a+l):null)}function dJ(a,b,c,e,f){d.copyBufferSubData(a,b,c,e,f)}function dK(a,b,c,e,f,g,h,i){d.copyTexImage2D(a,b,c,e,f,g,h,i)}function dL(a,b,c,e,f,g,h,i){d.copyTexSubImage2D(a,b,c,e,f,g,h,i)}function dM(a,b,c,e,f,g,h,i,j){d.copyTexSubImage3D(a,b,c,e,f,g,h,i,j)}function dN(){var a=c.getNewId(c.programs),b=d.createProgram();return b.name=a,c.programs[a]=b,a}function dO(b){var a=c.getNewId(c.shaders);return c.shaders[a]=d.createShader(b),a}function dP(a){d.cullFace(a)}function dQ(g,h){for(var b=0,a,f;b<g;b++){if(a=e[h+b*4>>2],f=c.buffers[a],!f)continue;d.deleteBuffer(f),f.name=0,c.buffers[a]=null,a==c.currArrayBuffer&&(c.currArrayBuffer=0),a==c.currElementArrayBuffer&&(c.currElementArrayBuffer=0),a==d.currentPixelPackBufferBinding&&(d.currentPixelPackBufferBinding=0),a==d.currentPixelUnpackBufferBinding&&(d.currentPixelUnpackBufferBinding=0)}}function dR(g,h){for(var a=0,f,b;a<g;++a){if(f=e[h+a*4>>2],b=c.framebuffers[f],!b)continue;d.deleteFramebuffer(b),b.name=0,c.framebuffers[f]=null}}function dS(a){if(!a)return;var b=c.programs[a];if(!b){c.recordError(1281);return}d.deleteProgram(b),b.name=0,c.programs[a]=null,c.programInfos[a]=null}function dT(g,h){for(var a=0,b,f;a<g;a++){if(b=e[h+a*4>>2],f=c.queries[b],!f)continue;d.deleteQuery(f),c.queries[b]=null}}function dU(g,h){for(var a=0,b,f;a<g;a++){if(b=e[h+a*4>>2],f=c.timerQueriesEXT[b],!f)continue;d.disjointTimerQueryExt.deleteQueryEXT(f),c.timerQueriesEXT[b]=null}}function dV(g,h){for(var a=0,f,b;a<g;a++){if(f=e[h+a*4>>2],b=c.renderbuffers[f],!b)continue;d.deleteRenderbuffer(b),b.name=0,c.renderbuffers[f]=null}}function dW(g,h){for(var a=0,f,b;a<g;a++){if(f=e[h+a*4>>2],b=c.samplers[f],!b)continue;d.deleteSampler(b),b.name=0,c.samplers[f]=null}}function dX(a){if(!a)return;var b=c.shaders[a];if(!b){c.recordError(1281);return}d.deleteShader(b),c.shaders[a]=null}function dY(a){if(!a)return;var b=c.syncs[a];if(!b){c.recordError(1281);return}d.deleteSync(b),b.name=0,c.syncs[a]=null}function dZ(g,h){for(var a=0,f,b;a<g;a++){if(f=e[h+a*4>>2],b=c.textures[f],!b)continue;d.deleteTexture(b),b.name=0,c.textures[f]=null}}function d_(g,h){for(var a=0,f,b;a<g;a++){if(f=e[h+a*4>>2],b=c.transformFeedbacks[f],!b)continue;d.deleteTransformFeedback(b),b.name=0,c.transformFeedbacks[f]=null}}function d$(f,g){for(var a=0,b;a<f;a++)b=e[g+a*4>>2],d.deleteVertexArray(c.vaos[b]),c.vaos[b]=null}function ea(f,g){for(var a=0,b;a<f;a++)b=e[g+a*4>>2],d.deleteVertexArray(c.vaos[b]),c.vaos[b]=null}function eb(a){d.depthFunc(a)}function ec(a){d.depthMask(!!a)}function ed(a,b){d.depthRange(a,b)}function ee(a,b){d.detachShader(c.programs[a],c.shaders[b])}function ef(a){d.disable(a)}function eg(a){d.disableVertexAttribArray(a)}function eh(a,b,c){d.drawArrays(a,b,c)}function ei(a,b,c,e){d.drawArraysInstanced(a,b,c,e)}function ej(a,b,c,e){d.drawArraysInstanced(a,b,c,e)}function ek(a,b,c,e){d.drawArraysInstanced(a,b,c,e)}function el(a,b,c,e){d.drawArraysInstanced(a,b,c,e)}function em(a,b,c,e){d.drawArraysInstanced(a,b,c,e)}ac=[];function eo(b,f){for(var c=ac[b],a=0;a<b;a++)c[a]=e[f+a*4>>2];d.drawBuffers(c)}function ep(b,f){for(var c=ac[b],a=0;a<b;a++)c[a]=e[f+a*4>>2];d.drawBuffers(c)}function eq(b,f){for(var c=ac[b],a=0;a<b;a++)c[a]=e[f+a*4>>2];d.drawBuffers(c)}function er(a,b,c,e){d.drawElements(a,b,c,e)}function es(a,b,c,e,f){d.drawElementsInstanced(a,b,c,e,f)}function et(a,b,c,e,f){d.drawElementsInstanced(a,b,c,e,f)}function eu(a,b,c,e,f){d.drawElementsInstanced(a,b,c,e,f)}function ev(a,b,c,e,f){d.drawElementsInstanced(a,b,c,e,f)}function ew(a,b,c,e,f){d.drawElementsInstanced(a,b,c,e,f)}function cb(a,b,c,e){d.drawElements(a,b,c,e)}function ey(a,e,f,b,c,d){cb(a,b,c,d)}function ez(a){d.enable(a)}function eA(a){d.enableVertexAttribArray(a)}function eB(a){d.endQuery(a)}function eC(a){d.disjointTimerQueryExt.endQueryEXT(a)}function eD(){d.endTransformFeedback()}function eE(e,f){var a=d.fenceSync(e,f),b;return a?(b=c.getNewId(c.syncs),a.name=b,c.syncs[b]=a,b):0}function eF(){d.finish()}function eG(){d.flush()}function eH(){t("missing function: emscripten_glFlushMappedBufferRange"),o(-1)}function eI(a,b,e,f){d.framebufferRenderbuffer(a,b,e,c.renderbuffers[f])}function eJ(a,b,e,f,g){d.framebufferTexture2D(a,b,e,c.textures[f],g)}function eK(a,b,e,f,g){d.framebufferTextureLayer(a,b,c.textures[e],f,g)}function eL(a){d.frontFace(a)}function L(j,h,i,g){for(var f=0,a,b;f<j;f++)a=d[i](),b=a&&c.getNewId(g),a?(a.name=b,g[b]=a):c.recordError(1282),e[h+f*4>>2]=b}function eN(a,b){L(a,b,"createBuffer",c.buffers)}function eO(a,b){L(a,b,"createFramebuffer",c.framebuffers)}function eP(a,b){L(a,b,"createQuery",c.queries)}function eQ(g,h){for(var a=0,b,f;a<g;a++){if(b=d.disjointTimerQueryExt.createQueryEXT(),!b){for(c.recordError(1282);a<g;)e[h+a++*4>>2]=0;return}f=c.getNewId(c.timerQueriesEXT),b.name=f,c.timerQueriesEXT[f]=b,e[h+a*4>>2]=f}}function eR(a,b){L(a,b,"createRenderbuffer",c.renderbuffers)}function eS(a,b){L(a,b,"createSampler",c.samplers)}function eT(a,b){L(a,b,"createTexture",c.textures)}function eU(a,b){L(a,b,"createTransformFeedback",c.transformFeedbacks)}function eV(a,b){L(a,b,"createVertexArray",c.vaos)}function eW(a,b){L(a,b,"createVertexArray",c.vaos)}function eX(a){d.generateMipmap(a)}function eY(b,l,f,g,h,i,j){var a,k;if(b=c.programs[b],a=d.getActiveAttrib(b,l),!a)return;k=f>0&&j?q(a.name,j,f):0,g&&(e[g>>2]=k),h&&(e[h>>2]=a.size),i&&(e[i>>2]=a.type)}function eZ(b,l,f,g,h,i,j){var a,k;if(b=c.programs[b],a=d.getActiveUniform(b,l),!a)return;k=f>0&&j?q(a.name,j,f):0,g&&(e[g>>2]=k),h&&(e[h>>2]=a.size),i&&(e[i>>2]=a.type)}function e_(b,j,g,a,h){var f,i;if(b=c.programs[b],f=d.getActiveUniformBlockName(b,j),!f)return;h&&g>0?(i=q(f,h,g),a&&(e[a>>2]=i)):a&&(e[a>>2]=0)}function e$(g,h,i,f){var j,a,b;if(!f){c.recordError(1281);return}switch(g=c.programs[g],i){case 35393:j=d.getActiveUniformBlockName(g,h),e[f>>2]=j.length+1;return;default:if(a=d.getActiveUniformBlockParameter(g,h,i),!a)return;if(typeof a=="number")e[f>>2]=a;else for(b=0;b<a.length;b++)e[f+b*4>>2]=a[b]}}function fa(g,j,h,l,i){var f,a,b,k;if(!i){c.recordError(1281);return}if(j>0&&h==0){c.recordError(1281);return}g=c.programs[g],f=[];for(a=0;a<j;a++)f.push(e[h+a*4>>2]);if(b=d.getActiveUniforms(g,f,l),!b)return;k=b.length;for(a=0;a<k;a++)e[i+a*4>>2]=b[a]}function fb(j,f,h,i){var g=d.getAttachedShaders(c.programs[j]),b=g.length,a,k;b>f&&(b=f),e[h>>2]=b;for(a=0;a<b;++a)k=c.shaders.indexOf(g[a]),e[i+a*4>>2]=k}function fc(a,b){return d.getAttribLocation(c.programs[a],l(b))}function ao(j,f,i){var b,l,m,a,g;if(!f){c.recordError(1281);return}switch(b=void 0,j){case 36346:b=1;break;case 36344:i!=0&&i!=1&&c.recordError(1280);return;case 34814:case 36345:b=0;break;case 34466:l=d.getParameter(34467),b=l?l.length:0;break;case 33309:if(c.currentContext.version<2){c.recordError(1282);return}m=d.getSupportedExtensions()||[],b=2*m.length;break;case 33307:case 33308:if(c.currentContext.version<2){c.recordError(1280);return}b=j==33307?3:0;break}if(b===void 0)switch(a=d.getParameter(j),typeof a){case"number":b=a;break;case"boolean":b=a?1:0;break;case"string":c.recordError(1280);return;case"object":if(a===null)switch(j){case 34964:case 35725:case 34965:case 36006:case 36007:case 32873:case 34229:case 35097:case 36389:case 34068:{b=0;break}default:{c.recordError(1280);return}}else if(a instanceof Float32Array||a instanceof Uint32Array||a instanceof Int32Array||a instanceof Array){for(g=0;g<a.length;++g)switch(i){case 0:e[f+g*4>>2]=a[g];break;case 2:h[f+g*4>>2]=a[g];break;case 4:s[f+g>>0]=a[g]?1:0;break}return}else try{b=a.name|0}catch(a){c.recordError(1280),t("GL_INVALID_ENUM in glGet"+i+"v: Unknown object returned from WebGL getParameter("+j+")! (error: "+a+")");return}break;default:c.recordError(1280),t("GL_INVALID_ENUM in glGet"+i+"v: Native code calling glGet"+i+"v("+j+") and it returns "+a+" of type "+typeof a+"!");return}switch(i){case 1:r=[b>>>0,(k=b,+Q(k)>=1?k>0?(R(+N(k/4294967296),4294967295)|0)>>>0:~~+O((k-+(~~k>>>0))/4294967296)>>>0:0)],e[f>>2]=r[0],e[f+4>>2]=r[1];break;case 0:e[f>>2]=b;break;case 2:h[f>>2]=b;break;case 4:s[f>>0]=b?1:0;break}}function fe(a,b){ao(a,b,4)}function ff(b,f,a){if(!a){c.recordError(1281);return}r=[d.getBufferParameter(b,f)>>>0,(k=d.getBufferParameter(b,f),+Q(k)>=1?k>0?(R(+N(k/4294967296),4294967295)|0)>>>0:~~+O((k-+(~~k>>>0))/4294967296)>>>0:0)],e[a>>2]=r[0],e[a+4>>2]=r[1]}function fg(b,f,a){if(!a){c.recordError(1281);return}e[a>>2]=d.getBufferParameter(b,f)}function fh(){t("missing function: emscripten_glGetBufferPointerv"),o(-1)}function fi(){var a=d.getError()||c.lastError;return c.lastError=0,a}function fj(a,b){ao(a,b,2)}function fk(a,b){return d.getFragDataLocation(c.programs[a],l(b))}function fl(b,c,f,g){var a=d.getFramebufferAttachmentParameter(b,c,f);(a instanceof WebGLRenderbuffer||a instanceof WebGLTexture)&&(a=a.name|0),e[g>>2]=a}function cY(g,j,f,i){var b,a;if(!f){c.recordError(1281);return}switch(b=d.getIndexedParameter(g,j),typeof b){case"boolean":a=b?1:0;break;case"number":a=b;break;case"object":if(b===null)switch(g){case 35983:case 35368:a=0;break;default:{c.recordError(1280);return}}else if(b instanceof WebGLBuffer)a=b.name|0;else{c.recordError(1280);return}break;default:c.recordError(1280);return}switch(i){case 1:r=[a>>>0,(k=a,+Q(k)>=1?k>0?(R(+N(k/4294967296),4294967295)|0)>>>0:~~+O((k-+(~~k>>>0))/4294967296)>>>0:0)],e[f>>2]=r[0],e[f+4>>2]=r[1];break;case 0:e[f>>2]=a;break;case 2:h[f>>2]=a;break;case 4:s[f>>0]=a?1:0;break;default:throw"internal emscriptenWebGLGetIndexed() error, bad type: "+i}}function fn(a,b,c){cY(a,b,c,1)}function fo(a,b){ao(a,b,1)}function fp(a,b,c){cY(a,b,c,0)}function fq(a,b){ao(a,b,0)}function fr(j,h,i,f,g){var b,a;if(f<0){c.recordError(1281);return}if(!g){c.recordError(1281);return}if(b=d.getInternalformatParameter(j,h,i),b===null)return;for(a=0;a<b.length&&a<f;++a)e[g+a>>2]=b[a]}function fs(a,b,d,e,f){c.recordError(1282)}function ft(h,b,f,g){var a=d.getProgramInfoLog(c.programs[h]),i;a===null&&(a="(unknown error)"),i=b>0&&g?q(a,g,b):0,f&&(e[f>>2]=i)}function fu(b,h,g){var a,i,j,f,k,l,m;if(!g){c.recordError(1281);return}if(b>=c.counter){c.recordError(1281);return}if(a=c.programInfos[b],!a){c.recordError(1282);return}if(h==35716)i=d.getProgramInfoLog(c.programs[b]),i===null&&(i="(unknown error)"),e[g>>2]=i.length+1;else if(h==35719)e[g>>2]=a.maxUniformLength;else if(h==35722){if(a.maxAttributeLength==-1){b=c.programs[b],j=d.getProgramParameter(b,35721),a.maxAttributeLength=0;for(f=0;f<j;++f)k=d.getActiveAttrib(b,f),a.maxAttributeLength=Math.max(a.maxAttributeLength,k.name.length+1)}e[g>>2]=a.maxAttributeLength}else if(h==35381){if(a.maxUniformBlockNameLength==-1){b=c.programs[b],l=d.getProgramParameter(b,35382),a.maxUniformBlockNameLength=0;for(f=0;f<l;++f)m=d.getActiveUniformBlockName(b,f),a.maxUniformBlockNameLength=Math.max(a.maxUniformBlockNameLength,m.length+1)}e[g>>2]=a.maxUniformBlockNameLength}else e[g>>2]=d.getProgramParameter(c.programs[b],h)}function fv(h,i,f){var g,b,a;if(!f){c.recordError(1281);return}g=c.timerQueriesEXT[h],b=d.disjointTimerQueryExt.getQueryObjectEXT(g,i),typeof b=="boolean"?a=b?1:0:a=b,r=[a>>>0,(k=a,+Q(k)>=1?k>0?(R(+N(k/4294967296),4294967295)|0)>>>0:~~+O((k-+(~~k>>>0))/4294967296)>>>0:0)],e[f>>2]=r[0],e[f+4>>2]=r[1]}function fw(h,i,f){var g,a,b;if(!f){c.recordError(1281);return}g=c.timerQueriesEXT[h],a=d.disjointTimerQueryExt.getQueryObjectEXT(g,i),typeof a=="boolean"?b=a?1:0:b=a,e[f>>2]=b}function fx(h,i,f){var g,b,a;if(!f){c.recordError(1281);return}g=c.timerQueriesEXT[h],b=d.disjointTimerQueryExt.getQueryObjectEXT(g,i),typeof b=="boolean"?a=b?1:0:a=b,r=[a>>>0,(k=a,+Q(k)>=1?k>0?(R(+N(k/4294967296),4294967295)|0)>>>0:~~+O((k-+(~~k>>>0))/4294967296)>>>0:0)],e[f>>2]=r[0],e[f+4>>2]=r[1]}function fy(h,i,f){var g,a,b;if(!f){c.recordError(1281);return}g=c.queries[h],a=d.getQueryParameter(g,i),typeof a=="boolean"?b=a?1:0:b=a,e[f>>2]=b}function fz(h,i,f){var g,a,b;if(!f){c.recordError(1281);return}g=c.timerQueriesEXT[h],a=d.disjointTimerQueryExt.getQueryObjectEXT(g,i),typeof a=="boolean"?b=a?1:0:b=a,e[f>>2]=b}function fA(b,f,a){if(!a){c.recordError(1281);return}e[a>>2]=d.getQuery(b,f)}function fB(b,f,a){if(!a){c.recordError(1281);return}e[a>>2]=d.disjointTimerQueryExt.getQueryEXT(b,f)}function fC(b,f,a){if(!a){c.recordError(1281);return}e[a>>2]=d.getRenderbufferParameter(b,f)}function fD(a,e,b){if(!b){c.recordError(1281);return}a=c.samplers[a],h[b>>2]=d.getSamplerParameter(a,e)}function fE(a,f,b){if(!b){c.recordError(1281);return}a=c.samplers[a],e[b>>2]=d.getSamplerParameter(a,f)}function fF(h,b,f,g){var a=d.getShaderInfoLog(c.shaders[h]),i;a===null&&(a="(unknown error)"),i=b>0&&g?q(a,g,b):0,f&&(e[f>>2]=i)}function fG(c,f,b,g){var a=d.getShaderPrecisionFormat(c,f);e[b>>2]=a.rangeMin,e[b+4>>2]=a.rangeMax,e[g>>2]=a.precision}function fH(h,a,b,f){var g=d.getShaderSource(c.shaders[h]),i;if(!g)return;i=a>0&&f?q(g,f,a):0,b&&(e[b>>2]=i)}function fI(g,h,a){var b,f,i;if(!a){c.recordError(1281);return}h==35716?(b=d.getShaderInfoLog(c.shaders[g]),b===null&&(b="(unknown error)"),e[a>>2]=b.length+1):h==35720?(f=d.getShaderSource(c.shaders[g]),i=f===null||f.length==0?0:f.length+1,e[a>>2]=i):e[a>>2]=d.getShaderParameter(c.shaders[g],h)}function Z(a){var b=V(a)+1,c=B(b);return q(a,c,b),c}function fK(f){var a,g,i,b,h,j,e;if(c.stringCache[f])return c.stringCache[f];switch(f){case 7939:g=d.getSupportedExtensions()||[],g=g.concat(g.map(function(a){return"GL_"+a})),a=Z(g.join(" "));break;case 7936:case 7937:case 37445:case 37446:i=d.getParameter(f),i||c.recordError(1280),a=Z(i);break;case 7938:b=d.getParameter(d.VERSION),c.currentContext.version>=2?b="OpenGL ES 3.0 ("+b+")":b="OpenGL ES 2.0 ("+b+")",a=Z(b);break;case 35724:h=d.getParameter(d.SHADING_LANGUAGE_VERSION),j=/^WebGL GLSL ES ([0-9]\.[0-9][0-9]?)(?:$| .*)/,e=h.match(j),e!==null&&(e[1].length==3&&(e[1]=e[1]+"0"),h="OpenGL ES GLSL ES "+e[1]+" ("+h+")"),a=Z(h);break;default:return c.recordError(1280),0}return c.stringCache[f]=a,a}function fL(f,e){var a,b;if(c.currentContext.version<2)return c.recordError(1282),0;if(a=c.stringiCache[f],a)return e<0||e>=a.length?(c.recordError(1281),0):a[e];switch(f){case 7939:return b=d.getSupportedExtensions()||[],b=b.concat(b.map(function(a){return"GL_"+a})),b=b.map(function(a){return Z(a)}),a=c.stringiCache[f]=b,e<0||e>=a.length?(c.recordError(1281),0):a[e];default:return c.recordError(1280),0}}function fM(f,g,h,a,i){if(h<0){c.recordError(1281);return}if(!i){c.recordError(1281);return}var b=d.getSyncParameter(c.syncs[f],g);e[a>>2]=b,b!==null&&a&&(e[a>>2]=1)}function fN(b,e,a){if(!a){c.recordError(1281);return}h[a>>2]=d.getTexParameter(b,e)}function fO(b,f,a){if(!a){c.recordError(1281);return}e[a>>2]=d.getTexParameter(b,f)}function fP(f,l,g,b,h,i,j){var a,k;if(f=c.programs[f],a=d.getTransformFeedbackVarying(f,l),!a)return;j&&g>0?(k=q(a.name,j,g),b&&(e[b>>2]=k)):b&&(e[b>>2]=0),h&&(e[h>>2]=a.size),i&&(e[i>>2]=a.type)}function fQ(a,b){return d.getUniformBlockIndex(c.programs[a],l(b))}function fR(h,i,j,f){var g,a,b,k;if(!f){c.recordError(1281);return}if(i>0&&(j==0||f==0)){c.recordError(1281);return}h=c.programs[h],g=[];for(a=0;a<i;a++)g.push(l(e[j+a*4>>2]));if(b=d.getUniformIndices(h,g),!b)return;k=b.length;for(a=0;a<k;a++)e[f+a*4>>2]=b[a]}function fS(f,a){var b,d,e;return a=l(a),b=0,a[a.length-1]=="]"&&(d=a.lastIndexOf("["),b=a[d+1]!="]"?parseInt(a.slice(d+1)):0,a=a.slice(0,d)),e=c.programInfos[f]&&c.programInfos[f].uniforms[a],e&&b>=0&&b<e[0]?e[1]+b:-1}function bi(i,j,f,g){var a,b;if(!f){c.recordError(1281);return}if(a=d.getUniform(c.programs[i],c.uniforms[j]),typeof a=="number"||typeof a=="boolean")switch(g){case 0:e[f>>2]=a;break;case 2:h[f>>2]=a;break;default:throw"internal emscriptenWebGLGetUniform() error, bad type: "+g}else for(b=0;b<a.length;b++)switch(g){case 0:e[f+b*4>>2]=a[b];break;case 2:h[f+b*4>>2]=a[b];break;default:throw"internal emscriptenWebGLGetUniform() error, bad type: "+g}}function fU(a,b,c){bi(a,b,c,2)}function fV(a,b,c){bi(a,b,c,0)}function fW(a,b,c){bi(a,b,c,0)}function aS(j,i,f,g){var a,b;if(!f){c.recordError(1281);return}if(a=d.getVertexAttrib(j,i),i==34975)e[f>>2]=a.name;else if(typeof a=="number"||typeof a=="boolean")switch(g){case 0:e[f>>2]=a;break;case 2:h[f>>2]=a;break;case 5:e[f>>2]=Math.fround(a);break;default:throw"internal emscriptenWebGLGetVertexAttrib() error, bad type: "+g}else for(b=0;b<a.length;b++)switch(g){case 0:e[f+b*4>>2]=a[b];break;case 2:h[f+b*4>>2]=a[b];break;case 5:e[f+b*4>>2]=Math.fround(a[b]);break;default:throw"internal emscriptenWebGLGetVertexAttrib() error, bad type: "+g}}function fY(a,b,c){aS(a,b,c,0)}function fZ(a,b,c){aS(a,b,c,0)}function f_(b,f,a){if(!a){c.recordError(1281);return}e[a>>2]=d.getVertexAttribOffset(b,f)}function f$(a,b,c){aS(a,b,c,2)}function ga(a,b,c){aS(a,b,c,5)}function gb(a,b){d.hint(a,b)}function gc(f,b,g){for(var c=ac[b],a=0;a<b;a++)c[a]=e[g+a*4>>2];d.invalidateFramebuffer(f,c)}function gd(f,b,k,g,h,i,j){for(var c=ac[b],a=0;a<b;a++)c[a]=e[k+a*4>>2];d.invalidateSubFramebuffer(f,c,g,h,i,j)}function ge(b){var a=c.buffers[b];return a?d.isBuffer(a):0}function gf(a){return d.isEnabled(a)}function gg(b){var a=c.framebuffers[b];return a?d.isFramebuffer(a):0}function gh(a){return a=c.programs[a],!a?0:d.isProgram(a)}function gi(b){var a=c.queries[b];return a?d.isQuery(a):0}function gj(b){var a=c.timerQueriesEXT[b];return a?d.disjointTimerQueryExt.isQueryEXT(a):0}function gk(b){var a=c.renderbuffers[b];return a?d.isRenderbuffer(a):0}function gl(b){var a=c.samplers[b];return a?d.isSampler(a):0}function gm(b){var a=c.shaders[b];return a?d.isShader(a):0}function gn(a){var a=c.syncs[a];return a?d.isSync(a):0}function go(b){var a=c.textures[b];return a?d.isTexture(a):0}function gp(a){return d.isTransformFeedback(c.transformFeedbacks[a])}function da(b){var a=c.vaos[b];return a?d.isVertexArray(a):0}function gr(b){var a=c.vaos[b];return a?d.isVertexArray(a):0}function gs(a){d.lineWidth(a)}function gt(a){d.linkProgram(c.programs[a]),c.populateUniformTable(a)}function gu(){t("missing function: emscripten_glMapBufferRange"),o(-1)}function gv(){d.pauseTransformFeedback()}function gw(a,b){a==3317&&(c.unpackAlignment=b),d.pixelStorei(a,b)}function gx(a,b){d.polygonOffset(a,b)}function gy(a,b,d,e){c.recordError(1280)}function gz(a,b,d){c.recordError(1280)}function gA(a,b){d.disjointTimerQueryExt.queryCounterEXT(c.timerQueriesEXT[a],b)}function gB(a){d.readBuffer(a)}function gC(g,c,d,e){var b,a;function f(b,a){return b+a-1&-a}return b=g*d,a=f(b,e),c*a}cS={6402:1,6403:1,6406:1,6407:3,6408:4,6409:1,6410:2,33319:2,33320:2,35904:3,35906:4,36244:1,36248:3,36249:4},cQ={5120:1,5121:1,5122:2,5123:2,5124:4,5125:4,5126:4,5131:2,32819:2,32820:2,33635:2,33640:4,34042:4,35899:4,35902:4,36193:2};function al(d,g,k,i,a,l){var f=cS[g]*cQ[d],j,b;if(!f){c.recordError(1280);return}switch(j=gC(k,i,f,c.unpackAlignment),b=a+j,d){case 5120:return s.subarray(a,b);case 5121:return m.subarray(a,b);case 5122:return I.subarray(a>>1,b>>1);case 5124:return e.subarray(a>>2,b>>2);case 5126:return h.subarray(a>>2,b>>2);case 5125:case 34042:case 35902:case 33640:case 35899:return E.subarray(a>>2,b>>2);case 5123:case 33635:case 32819:case 32820:case 36193:case 5131:return aF.subarray(a>>1,b>>1);default:c.recordError(1280)}}function $(a){switch(a){case 5120:return s;case 5121:return m;case 5122:return I;case 5123:case 33635:case 32819:case 32820:case 36193:case 5131:return aF;case 5124:return e;case 5125:case 34042:case 35902:case 33640:case 35899:case 34042:return E;case 5126:return h}}T={5122:1,5123:1,5124:2,5125:2,5126:2,5131:1,32819:1,32820:1,33635:1,33640:2,34042:2,35899:2,35902:2,36193:1};function gI(g,h,e,f,b,a,i){if(c.currentContext.supportsWebGL2EntryPoints){d.currentPixelPackBufferBinding?d.readPixels(g,h,e,f,b,a,i):d.readPixels(g,h,e,f,b,a,$(a),i>>(T[a]|0));return}var j=al(a,b,e,f,i,b);if(!j){c.recordError(1280);return}d.readPixels(g,h,e,f,b,a,j)}function gJ(){}function gK(a,b,c,e){d.renderbufferStorage(a,b,c,e)}function gL(a,b,c,e,f){d.renderbufferStorageMultisample(a,b,c,e,f)}function gM(){d.resumeTransformFeedback()}function gN(a,b){d.sampleCoverage(a,!!b)}function gO(a,b,e){d.samplerParameterf(c.samplers[a],b,e)}function gP(a,b,e){var f=h[e>>2];d.samplerParameterf(c.samplers[a],b,f)}function gQ(a,b,e){d.samplerParameteri(c.samplers[a],b,e)}function gR(a,b,f){var g=e[f>>2];d.samplerParameteri(c.samplers[a],b,g)}function gS(a,b,c,e){d.scissor(a,b,c,e)}function gT(){c.recordError(1280)}function gU(a,b,e,f){var g=c.getSource(a,b,e,f);d.shaderSource(c.shaders[a],g)}function gV(a,b,c){d.stencilFunc(a,b,c)}function gW(a,b,c,e){d.stencilFuncSeparate(a,b,c,e)}function gX(a){d.stencilMask(a)}function gY(a,b){d.stencilMaskSeparate(a,b)}function gZ(a,b,c){d.stencilOp(a,b,c)}function g_(a,b,c,e){d.stencilOpSeparate(a,b,c,e)}function g$(j,k,e,f,g,i,b,a,h){if(c.currentContext.supportsWebGL2EntryPoints){d.currentPixelUnpackBufferBinding?d.texImage2D(j,k,e,f,g,i,b,a,h):h!=0?d.texImage2D(j,k,e,f,g,i,b,a,$(a),h>>(T[a]|0)):d.texImage2D(j,k,e,f,g,i,b,a,null);return}d.texImage2D(j,k,e,f,g,i,b,a,h?al(a,b,f,g,h,e):null)}function ha(b,c,j,e,f,g,h,i,a,k){d.currentPixelUnpackBufferBinding?d.texImage3D(b,c,j,e,f,g,h,i,a,k):k!=0?d.texImage3D(b,c,j,e,f,g,h,i,a,$(a),k>>(T[a]|0)):d.texImage3D(b,c,j,e,f,g,h,i,a,null)}function hb(a,b,c){d.texParameterf(a,b,c)}function hc(a,b,c){var e=h[c>>2];d.texParameterf(a,b,e)}function hd(a,b,c){d.texParameteri(a,b,c)}function he(a,b,c){var f=e[c>>2];d.texParameteri(a,b,f)}function hf(a,b,c,e,f){d.texStorage2D(a,b,c,e,f)}function hg(a,b,c,e,f,g){d.texStorage3D(a,b,c,e,f,g)}function hh(i,j,k,h,f,g,b,a,e){if(c.currentContext.supportsWebGL2EntryPoints){d.currentPixelUnpackBufferBinding?d.texSubImage2D(i,j,k,h,f,g,b,a,e):e!=0?d.texSubImage2D(i,j,k,h,f,g,b,a,$(a),e>>(T[a]|0)):d.texSubImage2D(i,j,k,h,f,g,b,a,null);return}var l=null;e&&(l=al(a,b,f,g,e,0)),d.texSubImage2D(i,j,k,h,f,g,b,a,l)}function hi(b,c,e,k,f,g,h,i,j,a,l){d.currentPixelUnpackBufferBinding?d.texSubImage3D(b,c,e,k,f,g,h,i,j,a,l):l!=0?d.texSubImage3D(b,c,e,k,f,g,h,i,j,a,$(a),l>>(T[a]|0)):d.texSubImage3D(b,c,e,k,f,g,h,i,j,a,null)}function hj(b,g,h,i){var f,a;b=c.programs[b],f=[];for(a=0;a<g;a++)f.push(l(e[h+a*4>>2]));d.transformFeedbackVaryings(b,f,i)}function hk(a,b){d.uniform1f(c.uniforms[a],b)}function hl(g,a,e){var f,b;if(c.currentContext.supportsWebGL2EntryPoints){d.uniform1fv(c.uniforms[g],h,e>>2,a);return}if(a<=c.MINI_TEMP_BUFFER_SIZE){f=c.miniTempBufferViews[a-1];for(b=0;b<a;++b)f[b]=h[e+4*b>>2]}else f=h.subarray(e>>2,e+a*4>>2);d.uniform1fv(c.uniforms[g],f)}function hm(a,b){d.uniform1i(c.uniforms[a],b)}function hn(b,f,a){if(c.currentContext.supportsWebGL2EntryPoints){d.uniform1iv(c.uniforms[b],e,a>>2,f);return}d.uniform1iv(c.uniforms[b],e.subarray(a>>2,a+f*4>>2))}function ho(a,b){d.uniform1ui(c.uniforms[a],b)}function hp(b,e,a){c.currentContext.supportsWebGL2EntryPoints?d.uniform1uiv(c.uniforms[b],E,a>>2,e):d.uniform1uiv(c.uniforms[b],E.subarray(a>>2,a+e*4>>2))}function hq(a,b,e){d.uniform2f(c.uniforms[a],b,e)}function hr(g,b,e){var f,a;if(c.currentContext.supportsWebGL2EntryPoints){d.uniform2fv(c.uniforms[g],h,e>>2,b*2);return}if(2*b<=c.MINI_TEMP_BUFFER_SIZE){f=c.miniTempBufferViews[2*b-1];for(a=0;a<2*b;a+=2)f[a]=h[e+4*a>>2],f[a+1]=h[e+(4*a+4)>>2]}else f=h.subarray(e>>2,e+b*8>>2);d.uniform2fv(c.uniforms[g],f)}function hs(a,b,e){d.uniform2i(c.uniforms[a],b,e)}function ht(b,f,a){if(c.currentContext.supportsWebGL2EntryPoints){d.uniform2iv(c.uniforms[b],e,a>>2,f*2);return}d.uniform2iv(c.uniforms[b],e.subarray(a>>2,a+f*8>>2))}function hu(a,b,e){d.uniform2ui(c.uniforms[a],b,e)}function hv(b,e,a){c.currentContext.supportsWebGL2EntryPoints?d.uniform2uiv(c.uniforms[b],E,a>>2,e*2):d.uniform2uiv(c.uniforms[b],E.subarray(a>>2,a+e*8>>2))}function hw(a,b,e,f){d.uniform3f(c.uniforms[a],b,e,f)}function hx(g,f,b){var e,a;if(c.currentContext.supportsWebGL2EntryPoints){d.uniform3fv(c.uniforms[g],h,b>>2,f*3);return}if(3*f<=c.MINI_TEMP_BUFFER_SIZE){e=c.miniTempBufferViews[3*f-1];for(a=0;a<3*f;a+=3)e[a]=h[b+4*a>>2],e[a+1]=h[b+(4*a+4)>>2],e[a+2]=h[b+(4*a+8)>>2]}else e=h.subarray(b>>2,b+f*12>>2);d.uniform3fv(c.uniforms[g],e)}function hy(a,b,e,f){d.uniform3i(c.uniforms[a],b,e,f)}function hz(b,f,a){if(c.currentContext.supportsWebGL2EntryPoints){d.uniform3iv(c.uniforms[b],e,a>>2,f*3);return}d.uniform3iv(c.uniforms[b],e.subarray(a>>2,a+f*12>>2))}function hA(a,b,e,f){d.uniform3ui(c.uniforms[a],b,e,f)}function hB(b,e,a){c.currentContext.supportsWebGL2EntryPoints?d.uniform3uiv(c.uniforms[b],E,a>>2,e*3):d.uniform3uiv(c.uniforms[b],E.subarray(a>>2,a+e*12>>2))}function hC(a,b,e,f,g){d.uniform4f(c.uniforms[a],b,e,f,g)}function hD(g,f,b){var e,a;if(c.currentContext.supportsWebGL2EntryPoints){d.uniform4fv(c.uniforms[g],h,b>>2,f*4);return}if(4*f<=c.MINI_TEMP_BUFFER_SIZE){e=c.miniTempBufferViews[4*f-1];for(a=0;a<4*f;a+=4)e[a]=h[b+4*a>>2],e[a+1]=h[b+(4*a+4)>>2],e[a+2]=h[b+(4*a+8)>>2],e[a+3]=h[b+(4*a+12)>>2]}else e=h.subarray(b>>2,b+f*16>>2);d.uniform4fv(c.uniforms[g],e)}function hE(a,b,e,f,g){d.uniform4i(c.uniforms[a],b,e,f,g)}function hF(b,f,a){if(c.currentContext.supportsWebGL2EntryPoints){d.uniform4iv(c.uniforms[b],e,a>>2,f*4);return}d.uniform4iv(c.uniforms[b],e.subarray(a>>2,a+f*16>>2))}function hG(a,b,e,f,g){d.uniform4ui(c.uniforms[a],b,e,f,g)}function hH(b,e,a){c.currentContext.supportsWebGL2EntryPoints?d.uniform4uiv(c.uniforms[b],E,a>>2,e*4):d.uniform4uiv(c.uniforms[b],E.subarray(a>>2,a+e*16>>2))}function hI(a,b,e){a=c.programs[a],d.uniformBlockBinding(a,b,e)}function hJ(g,f,i,b){var e,a;if(c.currentContext.supportsWebGL2EntryPoints){d.uniformMatrix2fv(c.uniforms[g],!!i,h,b>>2,f*4);return}if(4*f<=c.MINI_TEMP_BUFFER_SIZE){e=c.miniTempBufferViews[4*f-1];for(a=0;a<4*f;a+=4)e[a]=h[b+4*a>>2],e[a+1]=h[b+(4*a+4)>>2],e[a+2]=h[b+(4*a+8)>>2],e[a+3]=h[b+(4*a+12)>>2]}else e=h.subarray(b>>2,b+f*16>>2);d.uniformMatrix2fv(c.uniforms[g],!!i,e)}function hK(b,e,f,a){c.currentContext.supportsWebGL2EntryPoints?d.uniformMatrix2x3fv(c.uniforms[b],!!f,h,a>>2,e*6):d.uniformMatrix2x3fv(c.uniforms[b],!!f,h.subarray(a>>2,a+e*24>>2))}function hL(b,e,f,a){c.currentContext.supportsWebGL2EntryPoints?d.uniformMatrix2x4fv(c.uniforms[b],!!f,h,a>>2,e*8):d.uniformMatrix2x4fv(c.uniforms[b],!!f,h.subarray(a>>2,a+e*32>>2))}function hM(g,f,i,b){var e,a;if(c.currentContext.supportsWebGL2EntryPoints){d.uniformMatrix3fv(c.uniforms[g],!!i,h,b>>2,f*9);return}if(9*f<=c.MINI_TEMP_BUFFER_SIZE){e=c.miniTempBufferViews[9*f-1];for(a=0;a<9*f;a+=9)e[a]=h[b+4*a>>2],e[a+1]=h[b+(4*a+4)>>2],e[a+2]=h[b+(4*a+8)>>2],e[a+3]=h[b+(4*a+12)>>2],e[a+4]=h[b+(4*a+16)>>2],e[a+5]=h[b+(4*a+20)>>2],e[a+6]=h[b+(4*a+24)>>2],e[a+7]=h[b+(4*a+28)>>2],e[a+8]=h[b+(4*a+32)>>2]}else e=h.subarray(b>>2,b+f*36>>2);d.uniformMatrix3fv(c.uniforms[g],!!i,e)}function hN(b,e,f,a){c.currentContext.supportsWebGL2EntryPoints?d.uniformMatrix3x2fv(c.uniforms[b],!!f,h,a>>2,e*6):d.uniformMatrix3x2fv(c.uniforms[b],!!f,h.subarray(a>>2,a+e*24>>2))}function hO(b,e,f,a){c.currentContext.supportsWebGL2EntryPoints?d.uniformMatrix3x4fv(c.uniforms[b],!!f,h,a>>2,e*12):d.uniformMatrix3x4fv(c.uniforms[b],!!f,h.subarray(a>>2,a+e*48>>2))}function hP(g,f,i,b){var e,a;if(c.currentContext.supportsWebGL2EntryPoints){d.uniformMatrix4fv(c.uniforms[g],!!i,h,b>>2,f*16);return}if(16*f<=c.MINI_TEMP_BUFFER_SIZE){e=c.miniTempBufferViews[16*f-1];for(a=0;a<16*f;a+=16)e[a]=h[b+4*a>>2],e[a+1]=h[b+(4*a+4)>>2],e[a+2]=h[b+(4*a+8)>>2],e[a+3]=h[b+(4*a+12)>>2],e[a+4]=h[b+(4*a+16)>>2],e[a+5]=h[b+(4*a+20)>>2],e[a+6]=h[b+(4*a+24)>>2],e[a+7]=h[b+(4*a+28)>>2],e[a+8]=h[b+(4*a+32)>>2],e[a+9]=h[b+(4*a+36)>>2],e[a+10]=h[b+(4*a+40)>>2],e[a+11]=h[b+(4*a+44)>>2],e[a+12]=h[b+(4*a+48)>>2],e[a+13]=h[b+(4*a+52)>>2],e[a+14]=h[b+(4*a+56)>>2],e[a+15]=h[b+(4*a+60)>>2]}else e=h.subarray(b>>2,b+f*64>>2);d.uniformMatrix4fv(c.uniforms[g],!!i,e)}function hQ(b,e,f,a){c.currentContext.supportsWebGL2EntryPoints?d.uniformMatrix4x2fv(c.uniforms[b],!!f,h,a>>2,e*8):d.uniformMatrix4x2fv(c.uniforms[b],!!f,h.subarray(a>>2,a+e*32>>2))}function hR(b,e,f,a){c.currentContext.supportsWebGL2EntryPoints?d.uniformMatrix4x3fv(c.uniforms[b],!!f,h,a>>2,e*12):d.uniformMatrix4x3fv(c.uniforms[b],!!f,h.subarray(a>>2,a+e*48>>2))}function hS(){t("missing function: emscripten_glUnmapBuffer"),o(-1)}function hT(a){d.useProgram(c.programs[a])}function hU(a){d.validateProgram(c.programs[a])}function hV(a,b){d.vertexAttrib1f(a,b)}function hW(a,b){d.vertexAttrib1f(a,h[b>>2])}function hX(a,b,c){d.vertexAttrib2f(a,b,c)}function hY(b,a){d.vertexAttrib2f(b,h[a>>2],h[a+4>>2])}function hZ(a,b,c,e){d.vertexAttrib3f(a,b,c,e)}function h_(b,a){d.vertexAttrib3f(b,h[a>>2],h[a+4>>2],h[a+8>>2])}function h$(a,b,c,e,f){d.vertexAttrib4f(a,b,c,e,f)}function ia(b,a){d.vertexAttrib4f(b,h[a>>2],h[a+4>>2],h[a+8>>2],h[a+12>>2])}function ib(a,b){d.vertexAttribDivisor(a,b)}function ic(a,b){d.vertexAttribDivisor(a,b)}function id(a,b){d.vertexAttribDivisor(a,b)}function ie(a,b){d.vertexAttribDivisor(a,b)}function ig(a,b){d.vertexAttribDivisor(a,b)}function ih(a,b,c,e,f){d.vertexAttribI4i(a,b,c,e,f)}function ii(b,a){d.vertexAttribI4i(b,e[a>>2],e[a+4>>2],e[a+8>>2],e[a+12>>2])}function ij(a,b,c,e,f){d.vertexAttribI4ui(a,b,c,e,f)}function ik(b,a){d.vertexAttribI4ui(b,E[a>>2],E[a+4>>2],E[a+8>>2],E[a+12>>2])}function il(a,b,c,e,f){d.vertexAttribIPointer(a,b,c,e,f)}function im(a,b,c,e,f,g){d.vertexAttribPointer(a,b,c,!!e,f,g)}function io(a,b,c,e){d.viewport(a,b,c,e)}function ip(e,f,a,b){a=a>>>0,b=b>>>0;var g=a==4294967295&&b==4294967295?-1:cH(a,b,!0);d.waitSync(c.syncs[e],f,g)}aI=0;function cJ(d,f,a,b){d=d|0,f=f|0,a=a|0,b=b|0;var c=0;for(aI=aI+1|0,e[d>>2]=aI;(c|0)<(b|0);){if((e[a+(c<<3)>>2]|0)==0)return e[a+(c<<3)>>2]=aI,e[a+((c<<3)+4)>>2]=f,e[a+((c<<3)+8)>>2]=0,be(b|0),a|0;c=c+1|0}return b=b*2|0,a=b$(a|0,8*(b+1|0)|0)|0,a=cJ(d|0,f|0,a|0,b|0)|0,be(b|0),a|0}function is(c,b,d){c=c|0,b=b|0,d=d|0;for(var a=0,f=0;(a|0)<(d|0);){if(f=e[b+(a<<3)>>2]|0,(f|0)==0)break;if((f|0)==(c|0))return e[b+((a<<3)+4)>>2]|0;a=a+1|0}return 0}function it(a,b){throw H(a,b||1),"longjmp"}function iu(a,b){it(a,b)}function iv(b,a,c){m.set(m.subarray(a,a+c),b)}function iw(){g.mainLoop.pause()}function ix(a,b){if(!j.fullscreenEnabled())return-1;if(a||(a="#canvas"),a=S(a),!a)return-4;if(!a.requestFullscreen&&!a.msRequestFullscreen&&!a.mozRequestFullScreen&&!a.mozRequestFullscreen&&!a.webkitRequestFullscreen)return-3;var c=j.canPerformEventHandlerRequests();return c?bp(a,b):b.deferUntilInEventHandler?(j.deferCall(bp,1,[a,b]),1):-2}function iy(c,d,b){var a={};return a.scaleMode=e[b>>2],a.canvasResolutionScaleMode=e[b+4>>2],a.filteringMode=e[b+8>>2],a.deferUntilInEventHandler=d,a.canvasResizedCallback=e[b+12>>2],a.canvasResizedCallbackUserData=e[b+16>>2],C=a,ix(c,a)}function iz(a,b){if(a||(a="#canvas"),a=S(a),!a)return-4;if(!a.requestPointerLock&&!a.mozRequestPointerLock&&!a.webkitRequestPointerLock&&!a.msRequestPointerLock)return-1;var c=j.canPerformEventHandlerRequests();return c?bk(a):b?(j.deferCall(bk,2,[a]),1):-2}function iA(a){try{return ai.grow(a-ax.byteLength+65535>>16),bV(ai.buffer),1}catch(a){}}function iB(c){var e=cR(),b=65536,d=2147483648-b,f,a,g;if(c>d)return!1;for(f=16777216,a=Math.max(e,f);a<c;)a<=536870912?a=bW(2*a,b):a=Math.min(bW((3*a+2147483648)/4,b),d);return!(g=iA(a),!g)}function iC(){g.mainLoop.resume()}function iD(){return(j.lastGamepadState=navigator.getGamepads?navigator.getGamepads():navigator.webkitGetGamepads?navigator.webkitGetGamepads():null)?0:-1}function aV(d,g,h,c,e,f,i){var a,b;j.fullscreenChangeEvent||(j.fullscreenChangeEvent=B(280)),a=function(d){var a=d||event,b=j.fullscreenChangeEvent;cN(b,a),K(c,e,b,g)&&a.preventDefault()},b={target:d,allowsDeferredCalls:!1,eventTypeString:f,callbackfunc:c,handlerFunc:a,useCapture:h},j.registerOrRemoveHandler(b)}function iF(a,b,c,d,e){return j.fullscreenEnabled()?(a=a?S(a):aT[1],!a)?-4:(aV(a,b,c,d,19,"fullscreenchange",e),aV(a,b,c,d,19,"mozfullscreenchange",e),aV(a,b,c,d,19,"webkitfullscreenchange",e),aV(a,b,c,d,19,"msfullscreenchange",e),0):-1}function cF(d,g,h,c,e,f,i){var a,b;j.gamepadEvent||(j.gamepadEvent=B(1432)),a=function(d){var a=d||event,b=j.gamepadEvent;c$(b,a.gamepad),K(c,e,b,g)&&a.preventDefault()},b={target:S(d),allowsDeferredCalls:!0,eventTypeString:f,callbackfunc:c,handlerFunc:a,useCapture:h},j.registerOrRemoveHandler(b)}function iH(a,b,c,d){return!navigator.getGamepads&&!navigator.webkitGetGamepads?-1:(cF(2,a,b,c,26,"gamepadconnected",d),0)}function iI(a,b,c,d){return!navigator.getGamepads&&!navigator.webkitGetGamepads?-1:(cF(2,a,b,c,27,"gamepaddisconnected",d),0)}function bl(d,h,i,c,f,g,k){var a,b;j.keyEvent||(j.keyEvent=B(164)),a=function(d){var a=d||event,b=j.keyEvent;q(a.key?a.key:"",b+0,32),q(a.code?a.code:"",b+32,32),e[b+64>>2]=a.location,e[b+68>>2]=a.ctrlKey,e[b+72>>2]=a.shiftKey,e[b+76>>2]=a.altKey,e[b+80>>2]=a.metaKey,e[b+84>>2]=a.repeat,q(a.locale?a.locale:"",b+88,32),q(a.char?a.char:"",b+120,32),e[b+152>>2]=a.charCode,e[b+156>>2]=a.keyCode,e[b+160>>2]=a.which,K(c,f,b,h)&&a.preventDefault()},b={target:S(d),allowsDeferredCalls:!j.isInternetExplorer(),eventTypeString:g,callbackfunc:c,handlerFunc:a,useCapture:i},j.registerOrRemoveHandler(b)}function iK(a,b,c,d,e){return bl(a,b,c,d,2,"keydown",e),0}function iL(a,b,c,d,e){return bl(a,b,c,d,1,"keypress",e),0}function iM(a,b,c,d,e){return bl(a,b,c,d,3,"keyup",e),0}function bs(b,a,d){var c;z[b>>3]=j.tick(),e[b+8>>2]=a.screenX,e[b+12>>2]=a.screenY,e[b+16>>2]=a.clientX,e[b+20>>2]=a.clientY,e[b+24>>2]=a.ctrlKey,e[b+28>>2]=a.shiftKey,e[b+32>>2]=a.altKey,e[b+36>>2]=a.metaKey,I[b+40>>1]=a.button,I[b+42>>1]=a.buttons,e[b+44>>2]=a.movementX||a.mozMovementX||a.webkitMovementX||a.screenX-j.previousScreenX,e[b+48>>2]=a.movementY||a.mozMovementY||a.webkitMovementY||a.screenY-j.previousScreenY,f.canvas?(c=f.canvas.getBoundingClientRect(),e[b+60>>2]=a.clientX-c.left,e[b+64>>2]=a.clientY-c.top):(e[b+60>>2]=0,e[b+64>>2]=0),d?(c=j.getBoundingClientRectOrZeros(d),e[b+52>>2]=a.clientX-c.left,e[b+56>>2]=a.clientY-c.top):(e[b+52>>2]=0,e[b+56>>2]=0),a.type!=="wheel"&&a.type!=="mousewheel"&&(j.previousScreenX=a.screenX,j.previousScreenY=a.screenY)}function bB(b,g,h,e,f,a,i){var d,c;j.mouseEvent||(j.mouseEvent=B(72)),b=S(b),d=function(c){var a=c||event;bs(j.mouseEvent,a,b),K(e,f,j.mouseEvent,g)&&a.preventDefault()},c={target:b,allowsDeferredCalls:a!="mousemove"&&a!="mouseenter"&&a!="mouseleave",eventTypeString:a,callbackfunc:e,handlerFunc:d,useCapture:h},j.isInternetExplorer()&&a=="mousedown"&&(c.allowsDeferredCalls=!1),j.registerOrRemoveHandler(c)}function iP(a,b,c,d,e){return bB(a,b,c,d,5,"mousedown",e),0}function iQ(a,b,c,d,e){return bB(a,b,c,d,8,"mousemove",e),0}function iR(a,b,c,d,e){return bB(a,b,c,d,6,"mouseup",e),0}function aX(a,i,k,g,h,b,l){var c,d;j.touchEvent||(j.touchEvent=B(1684)),a=S(a),c=function(r){for(var k=r||event,m={},c=0,l,n,b,o,p,q,d;c<k.touches.length;++c)l=k.touches[c],l.changed=!1,m[l.identifier]=l;for(c=0;c<k.changedTouches.length;++c)l=k.changedTouches[c],m[l.identifier]=l,l.changed=!0;for(c=0;c<k.targetTouches.length;++c)l=k.targetTouches[c],m[l.identifier].onTarget=!0;n=j.touchEvent,b=n,e[b+4>>2]=k.ctrlKey,e[b+8>>2]=k.shiftKey,e[b+12>>2]=k.altKey,e[b+16>>2]=k.metaKey,b+=20,o=f.canvas?f.canvas.getBoundingClientRect():void 0,p=j.getBoundingClientRectOrZeros(a),q=0;for(c in m)if(d=m[c],e[b>>2]=d.identifier,e[b+4>>2]=d.screenX,e[b+8>>2]=d.screenY,e[b+12>>2]=d.clientX,e[b+16>>2]=d.clientY,e[b+20>>2]=d.pageX,e[b+24>>2]=d.pageY,e[b+28>>2]=d.changed,e[b+32>>2]=d.onTarget,o?(e[b+44>>2]=d.clientX-o.left,e[b+48>>2]=d.clientY-o.top):(e[b+44>>2]=0,e[b+48>>2]=0),e[b+36>>2]=d.clientX-p.left,e[b+40>>2]=d.clientY-p.top,b+=52,++q>=32)break;e[n>>2]=q,K(g,h,n,i)&&k.preventDefault()},d={target:a,allowsDeferredCalls:b=="touchstart"||b=="touchend",eventTypeString:b,callbackfunc:g,handlerFunc:c,useCapture:k},j.registerOrRemoveHandler(d)}function iT(a,b,c,d,e){return aX(a,b,c,d,25,"touchcancel",e),0}function iU(a,b,c,d,e){return aX(a,b,c,d,23,"touchend",e),0}function iV(a,b,c,d,e){return aX(a,b,c,d,24,"touchmove",e),0}function iW(a,b,c,d,e){return aX(a,b,c,d,22,"touchstart",e),0}function cn(a,c,k,b,f,g,l){var h,d,i;j.wheelEvent||(j.wheelEvent=B(104)),h=function(h){var d=h||event,g=j.wheelEvent;bs(g,d,a),z[g+72>>3]=d.deltaX,z[g+80>>3]=d.deltaY,z[g+88>>3]=d.deltaZ,e[g+96>>2]=d.deltaMode,K(b,f,g,c)&&d.preventDefault()},d=function(g){var d=g||event,h;bs(j.wheelEvent,d,a),z[j.wheelEvent+72>>3]=d.wheelDeltaX||0,z[j.wheelEvent+80>>3]=-(d.wheelDeltaY||d.wheelDelta),z[j.wheelEvent+88>>3]=0,e[j.wheelEvent+96>>2]=0,h=K(b,f,j.wheelEvent,c),h&&d.preventDefault()},i={target:a,allowsDeferredCalls:!0,eventTypeString:g,callbackfunc:b,handlerFunc:g=="wheel"?h:d,useCapture:k},j.registerOrRemoveHandler(i)}function iY(a,b,c,d,e){return a=S(a),typeof a.onwheel!="undefined"?(cn(a,b,c,d,9,"wheel",e),0):typeof a.onmousewheel!="undefined"?(cn(a,b,c,d,9,"mousewheel",e),0):-1}cj=["default","low-power","high-performance"];function i_(f,g){var a={},b=g>>2,h,d,i;return a.alpha=!!e[b+(0>>2)],a.depth=!!e[b+(4>>2)],a.stencil=!!e[b+(8>>2)],a.antialias=!!e[b+(12>>2)],a.premultipliedAlpha=!!e[b+(16>>2)],a.preserveDrawingBuffer=!!e[b+(20>>2)],h=e[b+(24>>2)],a.powerPreference=cj[h],a.failIfMajorPerformanceCaveat=!!e[b+(28>>2)],a.majorVersion=e[b+(32>>2)],a.minorVersion=e[b+(36>>2)],a.enableExtensionsByDefault=e[b+(40>>2)],a.explicitSwapControl=e[b+(44>>2)],a.proxyContextToMainThread=e[b+(48>>2)],a.renderViaOffscreenBackBuffer=e[b+(52>>2)],d=bx(f),!d?0:(a.explicitSwapControl&&!a.renderViaOffscreenBackBuffer&&(a.renderViaOffscreenBackBuffer=!0),i=c.createContext(d,a),i)}function i$(a,b){return i_(a,b)}function ja(a){c.currentContext==a&&(c.currentContext=0),c.deleteContext(a)}function jb(a){return ja(a)}function jc(c){for(var a=c>>2,b=0;b<56>>2;++b)e[a+b]=0;e[a+(0>>2)]=e[a+(4>>2)]=e[a+(12>>2)]=e[a+(16>>2)]=e[a+(32>>2)]=e[a+(40>>2)]=1}function ci(a){var b=c.makeContextCurrent(a);return b?0:-5}f._emscripten_webgl_make_context_current=ci;function aD(){var a,b,c;if(!aD.strings){a={},a.USER=a.LOGNAME="web_user",a.PATH="/",a.PWD="/",a.HOME="/home/web_user",a.LANG=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",a._=aZ,b=[];for(c in a)b.push(c+"="+a[c]);aD.strings=b}return aD.strings}function jf(b,c){var d=aD(),a=0;return d.forEach(function(d,g){var f=c+a;e[b+g*4>>2]=f,ca(d,f),a+=d.length+1}),0}function jg(c,d){var a=aD(),b;return e[c>>2]=a.length,b=0,a.forEach(function(a){b+=a.length+1}),e[d>>2]=b,0}function jh(a){bj(a)}function ji(a){try{var c=i.getStreamFromFD(a);return b.close(c),0}catch(a){return(typeof b=="undefined"||!(a instanceof b.ErrnoError))&&o(a),a.errno}}function jj(d,f,g,h){var a,c;try{return a=i.getStreamFromFD(d),c=i.doWritev(a,f,g),e[h>>2]=c,0}catch(a){return(typeof b=="undefined"||!(a instanceof b.ErrnoError))&&o(a),a.errno}}J={};function az(a){var c=256,b;return az.buffer||(az.buffer=B(c),J[0]="Success",J[""+-1]="Invalid value for 'ai_flags' field",J[""+-2]="NAME or SERVICE is unknown",J[""+-3]="Temporary failure in name resolution",J[""+-4]="Non-recoverable failure in name res",J[""+-6]="'ai_family' not supported",J[""+-7]="'ai_socktype' not supported",J[""+-8]="SERVICE not supported for 'ai_socktype'",J[""+-10]="Memory allocation failure",J[""+-11]="System error returned in 'errno'",J[""+-12]="Argument buffer overflow"),b="Unknown error",a in J&&(J[a].length>c-1?b="Message too long":b=J[a]),ca(b,az.buffer),az.buffer}function jm(){return cB()|0}function jn(d,k,h,m){var b=0,j=0,g=0,a=0,c=0,f=0,i;function n(b,i,j,k,c,h){var f=b===10?28:16,d,a,g;return c=b===10?cs(c):by(c),d=B(f),g=ap(d,b,c,h),M(!g.errno),a=B(32),e[a+4>>2]=b,e[a+8>>2]=i,e[a+12>>2]=j,e[a+24>>2]=k,e[a+20>>2]=d,b===10?e[a+16>>2]=28:e[a+16>>2]=16,e[a+28>>2]=0,a}if(h&&(g=e[h>>2],a=e[h+4>>2],c=e[h+8>>2],f=e[h+12>>2]),c&&!f&&(f=c===2?17:6),!c&&f&&(c=f===17?2:1),f===0&&(f=6),c===0&&(c=1),!d&&!k)return-2;if(g&~(1|2|4|1024|8|16|32))return-1;if(h!==0&&e[h>>2]&2&&!d)return-1;if(g&32)return-2;if(c!==0&&c!==1&&c!==2)return-7;if(a!==0&&a!==2&&a!==10)return-6;if(k)if(k=l(k),j=parseInt(k,10),isNaN(j))return g&1024?-2:-8;if(!d)return a===0&&(a=2),(g&1)===0&&(a===2?b=bc(2130706433):b=[0,0,0,1]),i=n(a,c,f,null,b,j),e[m>>2]=i,0;if(d=l(d),b=aG(d),b!==null)if(a===0||a===2)a=2;else if(a===10&&g&8)b=[0,0,bc(65535),b],a=10;else return-2;else if(b=bw(d),b!==null)if(a===0||a===10)a=10;else return-2;return b!=null?(i=n(a,c,f,d,b,j),e[m>>2]=i,0):g&4?-2:(d=G.lookup_name(d),b=aG(d),a===0?a=2:a===10&&(b=[0,0,bc(65535),b]),i=n(a,c,f,null,b,j),e[m>>2]=i,0)}function jo(m,l,j,d,i,f,h){var a=bA(m,l),e,c,b,k,g;if(a.errno)return-6;if(e=a.port,c=a.addr,b=!1,j&&d){if(h&1||!(k=G.lookup_addr(c))){if(h&8)return-2}else c=k;g=q(c,j,d),g+1>=d&&(b=!0)}return i&&f&&(e=""+e,g=q(e,i,f),g+1>=f&&(b=!0)),b?-12:0}function jp(a){var b=Date.now();return e[a>>2]=b/1e3|0,e[a+4>>2]=b%1e3*1e3|0,0}function jq(a){d.activeTexture(a)}function jr(a,b){d.attachShader(c.programs[a],c.shaders[b])}function js(a){d.beginTransformFeedback(a)}function jt(a,b,e){d.bindAttribLocation(c.programs[a],b,l(e))}function ju(a,b){a==35051?d.currentPixelPackBufferBinding=b:a==35052&&(d.currentPixelUnpackBufferBinding=b),d.bindBuffer(a,c.buffers[b])}function jv(a,b,e){d.bindBufferBase(a,b,c.buffers[e])}function jw(b,a){d.bindFramebuffer(b,a?c.framebuffers[a]:c.currentContext.defaultFbo)}function jx(a,b){d.bindRenderbuffer(a,c.renderbuffers[b])}function jy(a,b){d.bindTexture(a,c.textures[b])}function jz(a){d.bindVertexArray(c.vaos[a])}function jA(a){d.blendEquation(a)}function jB(a,b){d.blendFunc(a,b)}function jC(a,b,c,e){d.blendFuncSeparate(a,b,c,e)}function jD(a,b,c,e,f,g,h,i,j,k){d.blitFramebuffer(a,b,c,e,f,g,h,i,j,k)}function jE(e,b,a,f){c.currentContext.supportsWebGL2EntryPoints?a?d.bufferData(e,m,f,a,b):d.bufferData(e,b,f):d.bufferData(e,a?m.subarray(a,a+b):b,f)}function jF(b,e,f,a){if(c.currentContext.supportsWebGL2EntryPoints){d.bufferSubData(b,e,m,a,f);return}d.bufferSubData(b,e,m.subarray(a,a+f))}function jG(a){return d.checkFramebufferStatus(a)}function jH(a){d.clear(a)}function jI(a,b,c){d.clearBufferfv(a,b,h,c>>2)}function jJ(a,b,c,e){d.clearColor(a,b,c,e)}function jK(a){d.clearDepth(a)}function jL(a,b,c,e){d.colorMask(!!a,!!b,!!c,!!e)}function jM(a){d.compileShader(c.shaders[a])}function jN(b,j,e,f,g,h,i,a){if(c.currentContext.supportsWebGL2EntryPoints){d.currentPixelUnpackBufferBinding?d.compressedTexImage2D(b,j,e,f,g,h,i,a):d.compressedTexImage2D(b,j,e,f,g,h,m,a,i);return}d.compressedTexImage2D(b,j,e,f,g,h,a?m.subarray(a,a+i):null)}function jO(b,e,k,f,g,h,i,j,a){c.currentContext.supportsWebGL2EntryPoints?d.currentPixelUnpackBufferBinding?d.compressedTexImage3D(b,e,k,f,g,h,i,j,a):d.compressedTexImage3D(b,e,k,f,g,h,i,m,a,j):d.compressedTexImage3D(b,e,k,f,g,h,i,a?m.subarray(a,a+j):null)}function jP(b,e,k,f,g,h,i,j,a){if(c.currentContext.supportsWebGL2EntryPoints){d.currentPixelUnpackBufferBinding?d.compressedTexSubImage2D(b,e,k,f,g,h,i,j,a):d.compressedTexSubImage2D(b,e,k,f,g,h,i,m,a,j);return}d.compressedTexSubImage2D(b,e,k,f,g,h,i,a?m.subarray(a,a+j):null)}function jQ(b,e,f,g,n,h,i,j,k,l,a){c.currentContext.supportsWebGL2EntryPoints?d.currentPixelUnpackBufferBinding?d.compressedTexSubImage3D(b,e,f,g,n,h,i,j,k,l,a):d.compressedTexSubImage3D(b,e,f,g,n,h,i,j,k,m,a,l):d.compressedTexSubImage3D(b,e,f,g,n,h,i,j,k,a?m.subarray(a,a+l):null)}function jR(a,b,c,e,f){d.copyBufferSubData(a,b,c,e,f)}function jS(a,b,c,e,f,g,h,i){d.copyTexSubImage2D(a,b,c,e,f,g,h,i)}function jT(){var a=c.getNewId(c.programs),b=d.createProgram();return b.name=a,c.programs[a]=b,a}function jU(b){var a=c.getNewId(c.shaders);return c.shaders[a]=d.createShader(b),a}function jV(a){d.cullFace(a)}function jW(g,h){for(var b=0,a,f;b<g;b++){if(a=e[h+b*4>>2],f=c.buffers[a],!f)continue;d.deleteBuffer(f),f.name=0,c.buffers[a]=null,a==c.currArrayBuffer&&(c.currArrayBuffer=0),a==c.currElementArrayBuffer&&(c.currElementArrayBuffer=0),a==d.currentPixelPackBufferBinding&&(d.currentPixelPackBufferBinding=0),a==d.currentPixelUnpackBufferBinding&&(d.currentPixelUnpackBufferBinding=0)}}function jX(g,h){for(var a=0,f,b;a<g;++a){if(f=e[h+a*4>>2],b=c.framebuffers[f],!b)continue;d.deleteFramebuffer(b),b.name=0,c.framebuffers[f]=null}}function jY(a){if(!a)return;var b=c.programs[a];if(!b){c.recordError(1281);return}d.deleteProgram(b),b.name=0,c.programs[a]=null,c.programInfos[a]=null}function jZ(g,h){for(var a=0,f,b;a<g;a++){if(f=e[h+a*4>>2],b=c.renderbuffers[f],!b)continue;d.deleteRenderbuffer(b),b.name=0,c.renderbuffers[f]=null}}function j_(a){if(!a)return;var b=c.shaders[a];if(!b){c.recordError(1281);return}d.deleteShader(b),c.shaders[a]=null}function j$(g,h){for(var a=0,f,b;a<g;a++){if(f=e[h+a*4>>2],b=c.textures[f],!b)continue;d.deleteTexture(b),b.name=0,c.textures[f]=null}}function ka(f,g){for(var a=0,b;a<f;a++)b=e[g+a*4>>2],d.deleteVertexArray(c.vaos[b]),c.vaos[b]=null}function kb(a){d.depthFunc(a)}function kc(a){d.depthMask(!!a)}function kd(a){d.disable(a)}function ke(a){d.disableVertexAttribArray(a)}function kf(a,b,c){d.drawArrays(a,b,c)}function kg(a,b,c,e){d.drawArraysInstanced(a,b,c,e)}function kh(b,f){for(var c=ac[b],a=0;a<b;a++)c[a]=e[f+a*4>>2];d.drawBuffers(c)}function ki(a,b,c,e,f){d.drawElementsInstanced(a,b,c,e,f)}function kj(a){d.enable(a)}function kk(a){d.enableVertexAttribArray(a)}function kl(){d.endTransformFeedback()}function km(){d.finish()}function kn(a,b,e,f){d.framebufferRenderbuffer(a,b,e,c.renderbuffers[f])}function ko(a,b,e,f,g){d.framebufferTexture2D(a,b,e,c.textures[f],g)}function kp(a,b,e,f,g){d.framebufferTextureLayer(a,b,c.textures[e],f,g)}function kq(a){d.frontFace(a)}function kr(a,b){L(a,b,"createBuffer",c.buffers)}function ks(a,b){L(a,b,"createFramebuffer",c.framebuffers)}function kt(a,b){L(a,b,"createRenderbuffer",c.renderbuffers)}function ku(a,b){L(a,b,"createTexture",c.textures)}function kv(a,b){L(a,b,"createVertexArray",c.vaos)}function kw(a){d.generateMipmap(a)}function kx(a,b){ao(a,b,2)}function ky(a,b){ao(a,b,0)}function kz(h,b,f,g){var a=d.getProgramInfoLog(c.programs[h]),i;a===null&&(a="(unknown error)"),i=b>0&&g?q(a,g,b):0,f&&(e[f>>2]=i)}function kA(b,h,g){var a,i,j,f,k,l,m;if(!g){c.recordError(1281);return}if(b>=c.counter){c.recordError(1281);return}if(a=c.programInfos[b],!a){c.recordError(1282);return}if(h==35716)i=d.getProgramInfoLog(c.programs[b]),i===null&&(i="(unknown error)"),e[g>>2]=i.length+1;else if(h==35719)e[g>>2]=a.maxUniformLength;else if(h==35722){if(a.maxAttributeLength==-1){b=c.programs[b],j=d.getProgramParameter(b,35721),a.maxAttributeLength=0;for(f=0;f<j;++f)k=d.getActiveAttrib(b,f),a.maxAttributeLength=Math.max(a.maxAttributeLength,k.name.length+1)}e[g>>2]=a.maxAttributeLength}else if(h==35381){if(a.maxUniformBlockNameLength==-1){b=c.programs[b],l=d.getProgramParameter(b,35382),a.maxUniformBlockNameLength=0;for(f=0;f<l;++f)m=d.getActiveUniformBlockName(b,f),a.maxUniformBlockNameLength=Math.max(a.maxUniformBlockNameLength,m.length+1)}e[g>>2]=a.maxUniformBlockNameLength}else e[g>>2]=d.getProgramParameter(c.programs[b],h)}function kB(h,b,f,g){var a=d.getShaderInfoLog(c.shaders[h]),i;a===null&&(a="(unknown error)"),i=b>0&&g?q(a,g,b):0,f&&(e[f>>2]=i)}function kC(g,h,a){var b,f,i;if(!a){c.recordError(1281);return}h==35716?(b=d.getShaderInfoLog(c.shaders[g]),b===null&&(b="(unknown error)"),e[a>>2]=b.length+1):h==35720?(f=d.getShaderSource(c.shaders[g]),i=f===null||f.length==0?0:f.length+1,e[a>>2]=i):e[a>>2]=d.getShaderParameter(c.shaders[g],h)}function kD(f){var a,g,i,b,h,j,e;if(c.stringCache[f])return c.stringCache[f];switch(f){case 7939:g=d.getSupportedExtensions()||[],g=g.concat(g.map(function(a){return"GL_"+a})),a=Z(g.join(" "));break;case 7936:case 7937:case 37445:case 37446:i=d.getParameter(f),i||c.recordError(1280),a=Z(i);break;case 7938:b=d.getParameter(d.VERSION),c.currentContext.version>=2?b="OpenGL ES 3.0 ("+b+")":b="OpenGL ES 2.0 ("+b+")",a=Z(b);break;case 35724:h=d.getParameter(d.SHADING_LANGUAGE_VERSION),j=/^WebGL GLSL ES ([0-9]\.[0-9][0-9]?)(?:$| .*)/,e=h.match(j),e!==null&&(e[1].length==3&&(e[1]=e[1]+"0"),h="OpenGL ES GLSL ES "+e[1]+" ("+h+")"),a=Z(h);break;default:return c.recordError(1280),0}return c.stringCache[f]=a,a}function kE(f,e){var a,b;if(c.currentContext.version<2)return c.recordError(1282),0;if(a=c.stringiCache[f],a)return e<0||e>=a.length?(c.recordError(1281),0):a[e];switch(f){case 7939:return b=d.getSupportedExtensions()||[],b=b.concat(b.map(function(a){return"GL_"+a})),b=b.map(function(a){return Z(a)}),a=c.stringiCache[f]=b,e<0||e>=a.length?(c.recordError(1281),0):a[e];default:return c.recordError(1280),0}}function kF(a,b){return d.getUniformBlockIndex(c.programs[a],l(b))}function kG(f,a){var b,d,e;return a=l(a),b=0,a[a.length-1]=="]"&&(d=a.lastIndexOf("["),b=a[d+1]!="]"?parseInt(a.slice(d+1)):0,a=a.slice(0,d)),e=c.programInfos[f]&&c.programInfos[f].uniforms[a],e&&b>=0&&b<e[0]?e[1]+b:-1}function kH(f,b,g){for(var c=ac[b],a=0;a<b;a++)c[a]=e[g+a*4>>2];d.invalidateFramebuffer(f,c)}function kI(a){d.linkProgram(c.programs[a]),c.populateUniformTable(a)}function kJ(a,b){a==3317&&(c.unpackAlignment=b),d.pixelStorei(a,b)}function kK(a){d.readBuffer(a)}function kL(g,h,e,f,b,a,i){if(c.currentContext.supportsWebGL2EntryPoints){d.currentPixelPackBufferBinding?d.readPixels(g,h,e,f,b,a,i):d.readPixels(g,h,e,f,b,a,$(a),i>>(T[a]|0));return}var j=al(a,b,e,f,i,b);if(!j){c.recordError(1280);return}d.readPixels(g,h,e,f,b,a,j)}function kM(a,b,c,e){d.renderbufferStorage(a,b,c,e)}function kN(a,b,c,e,f){d.renderbufferStorageMultisample(a,b,c,e,f)}function kO(a,b,c,e){d.scissor(a,b,c,e)}function kP(a,b,e,f){var g=c.getSource(a,b,e,f);d.shaderSource(c.shaders[a],g)}function kQ(j,k,e,f,g,i,b,a,h){if(c.currentContext.supportsWebGL2EntryPoints){d.currentPixelUnpackBufferBinding?d.texImage2D(j,k,e,f,g,i,b,a,h):h!=0?d.texImage2D(j,k,e,f,g,i,b,a,$(a),h>>(T[a]|0)):d.texImage2D(j,k,e,f,g,i,b,a,null);return}d.texImage2D(j,k,e,f,g,i,b,a,h?al(a,b,f,g,h,e):null)}function kR(b,c,j,e,f,g,h,i,a,k){d.currentPixelUnpackBufferBinding?d.texImage3D(b,c,j,e,f,g,h,i,a,k):k!=0?d.texImage3D(b,c,j,e,f,g,h,i,a,$(a),k>>(T[a]|0)):d.texImage3D(b,c,j,e,f,g,h,i,a,null)}function kS(a,b,c){d.texParameterf(a,b,c)}function kT(a,b,c){d.texParameteri(a,b,c)}function kU(a,b,c,e,f){d.texStorage2D(a,b,c,e,f)}function kV(i,j,k,h,f,g,b,a,e){if(c.currentContext.supportsWebGL2EntryPoints){d.currentPixelUnpackBufferBinding?d.texSubImage2D(i,j,k,h,f,g,b,a,e):e!=0?d.texSubImage2D(i,j,k,h,f,g,b,a,$(a),e>>(T[a]|0)):d.texSubImage2D(i,j,k,h,f,g,b,a,null);return}var l=null;e&&(l=al(a,b,f,g,e,0)),d.texSubImage2D(i,j,k,h,f,g,b,a,l)}function kW(b,c,e,k,f,g,h,i,j,a,l){d.currentPixelUnpackBufferBinding?d.texSubImage3D(b,c,e,k,f,g,h,i,j,a,l):l!=0?d.texSubImage3D(b,c,e,k,f,g,h,i,j,a,$(a),l>>(T[a]|0)):d.texSubImage3D(b,c,e,k,f,g,h,i,j,a,null)}function kX(b,g,h,i){var f,a;b=c.programs[b],f=[];for(a=0;a<g;a++)f.push(l(e[h+a*4>>2]));d.transformFeedbackVaryings(b,f,i)}function kY(a,b){d.uniform1f(c.uniforms[a],b)}function kZ(a,b){d.uniform1i(c.uniforms[a],b)}function k_(b,f,a){if(c.currentContext.supportsWebGL2EntryPoints){d.uniform1iv(c.uniforms[b],e,a>>2,f);return}d.uniform1iv(c.uniforms[b],e.subarray(a>>2,a+f*4>>2))}function k$(a,b){d.uniform1ui(c.uniforms[a],b)}function la(a,b,e){d.uniform2f(c.uniforms[a],b,e)}function lb(g,b,e){var f,a;if(c.currentContext.supportsWebGL2EntryPoints){d.uniform2fv(c.uniforms[g],h,e>>2,b*2);return}if(2*b<=c.MINI_TEMP_BUFFER_SIZE){f=c.miniTempBufferViews[2*b-1];for(a=0;a<2*b;a+=2)f[a]=h[e+4*a>>2],f[a+1]=h[e+(4*a+4)>>2]}else f=h.subarray(e>>2,e+b*8>>2);d.uniform2fv(c.uniforms[g],f)}function lc(a,b,e){d.uniform2i(c.uniforms[a],b,e)}function ld(b,f,a){if(c.currentContext.supportsWebGL2EntryPoints){d.uniform2iv(c.uniforms[b],e,a>>2,f*2);return}d.uniform2iv(c.uniforms[b],e.subarray(a>>2,a+f*8>>2))}function le(a,b,e,f){d.uniform3f(c.uniforms[a],b,e,f)}function lf(g,f,b){var e,a;if(c.currentContext.supportsWebGL2EntryPoints){d.uniform3fv(c.uniforms[g],h,b>>2,f*3);return}if(3*f<=c.MINI_TEMP_BUFFER_SIZE){e=c.miniTempBufferViews[3*f-1];for(a=0;a<3*f;a+=3)e[a]=h[b+4*a>>2],e[a+1]=h[b+(4*a+4)>>2],e[a+2]=h[b+(4*a+8)>>2]}else e=h.subarray(b>>2,b+f*12>>2);d.uniform3fv(c.uniforms[g],e)}function lg(a,b,e,f){d.uniform3i(c.uniforms[a],b,e,f)}function lh(a,b,e,f,g){d.uniform4f(c.uniforms[a],b,e,f,g)}function li(g,f,b){var e,a;if(c.currentContext.supportsWebGL2EntryPoints){d.uniform4fv(c.uniforms[g],h,b>>2,f*4);return}if(4*f<=c.MINI_TEMP_BUFFER_SIZE){e=c.miniTempBufferViews[4*f-1];for(a=0;a<4*f;a+=4)e[a]=h[b+4*a>>2],e[a+1]=h[b+(4*a+4)>>2],e[a+2]=h[b+(4*a+8)>>2],e[a+3]=h[b+(4*a+12)>>2]}else e=h.subarray(b>>2,b+f*16>>2);d.uniform4fv(c.uniforms[g],e)}function lj(a,b,e,f,g){d.uniform4i(c.uniforms[a],b,e,f,g)}function lk(a,b,e){a=c.programs[a],d.uniformBlockBinding(a,b,e)}function ll(g,f,i,b){var e,a;if(c.currentContext.supportsWebGL2EntryPoints){d.uniformMatrix2fv(c.uniforms[g],!!i,h,b>>2,f*4);return}if(4*f<=c.MINI_TEMP_BUFFER_SIZE){e=c.miniTempBufferViews[4*f-1];for(a=0;a<4*f;a+=4)e[a]=h[b+4*a>>2],e[a+1]=h[b+(4*a+4)>>2],e[a+2]=h[b+(4*a+8)>>2],e[a+3]=h[b+(4*a+12)>>2]}else e=h.subarray(b>>2,b+f*16>>2);d.uniformMatrix2fv(c.uniforms[g],!!i,e)}function lm(g,f,i,b){var e,a;if(c.currentContext.supportsWebGL2EntryPoints){d.uniformMatrix3fv(c.uniforms[g],!!i,h,b>>2,f*9);return}if(9*f<=c.MINI_TEMP_BUFFER_SIZE){e=c.miniTempBufferViews[9*f-1];for(a=0;a<9*f;a+=9)e[a]=h[b+4*a>>2],e[a+1]=h[b+(4*a+4)>>2],e[a+2]=h[b+(4*a+8)>>2],e[a+3]=h[b+(4*a+12)>>2],e[a+4]=h[b+(4*a+16)>>2],e[a+5]=h[b+(4*a+20)>>2],e[a+6]=h[b+(4*a+24)>>2],e[a+7]=h[b+(4*a+28)>>2],e[a+8]=h[b+(4*a+32)>>2]}else e=h.subarray(b>>2,b+f*36>>2);d.uniformMatrix3fv(c.uniforms[g],!!i,e)}function ln(g,f,i,b){var e,a;if(c.currentContext.supportsWebGL2EntryPoints){d.uniformMatrix4fv(c.uniforms[g],!!i,h,b>>2,f*16);return}if(16*f<=c.MINI_TEMP_BUFFER_SIZE){e=c.miniTempBufferViews[16*f-1];for(a=0;a<16*f;a+=16)e[a]=h[b+4*a>>2],e[a+1]=h[b+(4*a+4)>>2],e[a+2]=h[b+(4*a+8)>>2],e[a+3]=h[b+(4*a+12)>>2],e[a+4]=h[b+(4*a+16)>>2],e[a+5]=h[b+(4*a+20)>>2],e[a+6]=h[b+(4*a+24)>>2],e[a+7]=h[b+(4*a+28)>>2],e[a+8]=h[b+(4*a+32)>>2],e[a+9]=h[b+(4*a+36)>>2],e[a+10]=h[b+(4*a+40)>>2],e[a+11]=h[b+(4*a+44)>>2],e[a+12]=h[b+(4*a+48)>>2],e[a+13]=h[b+(4*a+52)>>2],e[a+14]=h[b+(4*a+56)>>2],e[a+15]=h[b+(4*a+60)>>2]}else e=h.subarray(b>>2,b+f*64>>2);d.uniformMatrix4fv(c.uniforms[g],!!i,e)}function lo(a){d.useProgram(c.programs[a])}function lp(a,b,c,e,f){d.vertexAttrib4f(a,b,c,e,f)}function lq(b,a){d.vertexAttrib4f(b,h[a>>2],h[a+4>>2],h[a+8>>2],h[a+12>>2])}function lr(a,b){d.vertexAttribDivisor(a,b)}function ls(a,b,c,e,f){d.vertexAttribI4ui(a,b,c,e,f)}function lt(a,b,c,e,f){d.vertexAttribIPointer(a,b,c,e,f)}function lu(a,b,c,e,f,g){d.vertexAttribPointer(a,b,c,!!e,f,g)}function lv(a,b,c,e){d.viewport(a,b,c,e)}bR=(q("GMT",2054384,4),2054384);function lx(c,a){var b=new Date(e[c>>2]*1e3),d,f;return e[a>>2]=b.getUTCSeconds(),e[a+4>>2]=b.getUTCMinutes(),e[a+8>>2]=b.getUTCHours(),e[a+12>>2]=b.getUTCDate(),e[a+16>>2]=b.getUTCMonth(),e[a+20>>2]=b.getUTCFullYear()-1900,e[a+24>>2]=b.getUTCDay(),e[a+36>>2]=0,e[a+32>>2]=0,d=Date.UTC(b.getUTCFullYear(),0,1,0,0,0,0),f=(b.getTime()-d)/(1e3*60*60*24)|0,e[a+28>>2]=f,e[a+40>>2]=bR,a}x={requests:[],getUnusedRequestId:function(){for(var b=x.requests.length,a=0;a<b;++a){if(x.requests[a]instanceof XMLHttpRequest)continue;return a}return x.requests.push(null),b},setupRequest:function(a){a.responseType="arraybuffer"}};function lz(a){x.requests[a].abort(),x.requests[a]=null}function lA(a){return x.requests[a].readyState}function lB(b,c,d){var a=x.requests[b].response;if(a===null)return;a=new Uint8Array(a).subarray(0,d),m.set(a,c)}function lC(c,d,e){var b=x.requests[c].getAllResponseHeaders(),a;if(b===null)return;a=new Uint8Array(e+1),ay(b,a,0,a.length),a=a.subarray(0,-1),m.set(a,d)}function lD(b){var a=x.requests[b].getAllResponseHeaders();return a===null?0:V(a)}function lE(b){var a=x.requests[b].response;return a===null?0:a.byteLength}function lF(a){return x.requests[a].status}function lG(){var a=x.getUnusedRequestId();return x.requests[a]=new XMLHttpRequest,x.setupRequest(x.requests[a]),a}function lH(c,d,e,a,b){a=a>0?l(a):null,b=b>0?l(b):null,x.requests[c].open(l(d),l(e),!0,a,b)}function lI(a){x.requests[a]=new XMLHttpRequest,x.setupRequest(x.requests[a])}function lJ(c,a,b){if(!a){t("Failed to send data per XHR: null pointer");return}if(b<0){t("Failed to send data per XHR: buffer length less than 0");return}x.requests[c].send(m.subarray(a,a+b))}function lK(b,a){if(!a){t("Failed to send string per XHR: null pointer");return}x.requests[b].send(l(a))}function lL(a,b,c){x.requests[a].setRequestHeader(l(b),l(c))}function lM(b){var a=aG(l(b));return a===null?-1:a}function lN(a,b){return W(v.EPERM),-1}function bH(){var c,a,b,h,i,d,f;if(bH.called)return;bH.called=!0,e[cg()>>2]=(new Date).getTimezoneOffset()*60,c=(new Date).getFullYear(),a=new Date(c,0,1),b=new Date(c,6,1),e[ce()>>2]=Number(a.getTimezoneOffset()!=b.getTimezoneOffset());function g(b){var a=b.toTimeString().match(/\(([A-Za-z ]+)\)$/);return a?a[1]:"GMT"}h=g(a),i=g(b),d=cm(at(h),"i8",bC),f=cm(at(i),"i8",bC),b.getTimezoneOffset()<a.getTimezoneOffset()?(e[aw()>>2]=d,e[aw()+4>>2]=f):(e[aw()>>2]=f,e[aw()+4>>2]=d)}function nE(j,b){var a,d,h,f,c,g,i;return bH(),a=new Date(e[j>>2]*1e3),e[b>>2]=a.getSeconds(),e[b+4>>2]=a.getMinutes(),e[b+8>>2]=a.getHours(),e[b+12>>2]=a.getDate(),e[b+16>>2]=a.getMonth(),e[b+20>>2]=a.getFullYear()-1900,e[b+24>>2]=a.getDay(),d=new Date(a.getFullYear(),0,1),h=(a.getTime()-d.getTime())/(1e3*60*60*24)|0,e[b+28>>2]=h,e[b+36>>2]=-(a.getTimezoneOffset()*60),f=new Date(a.getFullYear(),6,1).getTimezoneOffset(),c=d.getTimezoneOffset(),g=(f!=c&&a.getTimezoneOffset()==Math.min(c,f))|0,e[b+32>>2]=g,i=e[aw()+(g?4:0)>>2],e[b+40>>2]=i,b}function lQ(c){var b=c/1e3,a;if((aj||P)&&self.performance&&self.performance.now)for(a=self.performance.now();self.performance.now()-a<b;);else for(a=Date.now();Date.now()-a<b;);return 0}function lR(b,c){var d,a;return b===0?(W(28),-1):(d=e[b>>2],a=e[b+4>>2],a<0||a>999999999||d<0)?(W(28),-1):(c!==0&&(e[c>>2]=0,e[c+4>>2]=0),lQ(d*1e6+a/1e3))}function lS(a){return a=+a,a>=+0?+N(a+ +.5):+O(a-+.5)}function lT(a){be(a|0)}function lU(a,b,c){return 0}function ba(a){return a%4===0&&(a%100!==0||a%400===0)}function bM(c,d){for(var a=0,b=0;b<=d;a+=c[b++]);return a}aE=[31,29,31,30,31,30,31,31,30,31,30,31],aA=[31,28,31,30,31,30,31,31,30,31,30,31];function aU(e,b){for(var a=new Date(e.getTime()),f,c,d;b>0;)if(f=ba(a.getFullYear()),c=a.getMonth(),d=(f?aE:aA)[c],b>d-a.getDate())b-=d-a.getDate()+1,a.setDate(1),c<11?a.setMonth(c+1):(a.setMonth(0),a.setFullYear(a.getFullYear()+1));else return a.setDate(a.getDate()+b),a;return a}function bU(t,s,r,b){var k=e[b+40>>2],q={tm_sec:e[b>>2],tm_min:e[b+4>>2],tm_hour:e[b+8>>2],tm_mday:e[b+12>>2],tm_mon:e[b+16>>2],tm_year:e[b+20>>2],tm_wday:e[b+24>>2],tm_yday:e[b+28>>2],tm_isdst:e[b+32>>2],tm_gmtoff:e[b+36>>2],tm_zone:k?l(k):""},f=l(r),j={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"},d,i,m,p,h;for(d in j)f=f.replace(new RegExp(d,"g"),j[d]);i=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],m=["January","February","March","April","May","June","July","August","September","October","November","December"];function n(b,c,d){for(var a=typeof b=="number"?b.toString():b||"";a.length<c;)a=d[0]+a;return a}function a(a,b){return n(a,b,"0")}function c(b,c){function d(a){return a<0?-1:a>0?1:0}var a;return(a=d(b.getFullYear()-c.getFullYear()))===0&&(a=d(b.getMonth()-c.getMonth()))===0&&(a=d(b.getDate()-c.getDate())),a}function g(a){switch(a.getDay()){case 0:return new Date(a.getFullYear()-1,11,29);case 1:return a;case 2:return new Date(a.getFullYear(),0,3);case 3:return new Date(a.getFullYear(),0,2);case 4:return new Date(a.getFullYear(),0,1);case 5:return new Date(a.getFullYear()-1,11,31);case 6:return new Date(a.getFullYear()-1,11,30)}}function o(b){var a=aU(new Date(b.tm_year+1900,0,1),b.tm_yday),d=new Date(a.getFullYear(),0,4),e=new Date(a.getFullYear()+1,0,4),f=g(d),h=g(e);return c(f,a)<=0?c(h,a)<=0?a.getFullYear()+1:a.getFullYear():a.getFullYear()-1}p={"%a":function(a){return i[a.tm_wday].substring(0,3)},"%A":function(a){return i[a.tm_wday]},"%b":function(a){return m[a.tm_mon].substring(0,3)},"%B":function(a){return m[a.tm_mon]},"%C":function(b){var c=b.tm_year+1900;return a(c/100|0,2)},"%d":function(b){return a(b.tm_mday,2)},"%e":function(a){return n(a.tm_mday,2," ")},"%g":function(a){return o(a).toString().substring(2)},"%G":function(a){return o(a)},"%H":function(b){return a(b.tm_hour,2)},"%I":function(c){var b=c.tm_hour;return b==0?b=12:b>12&&(b-=12),a(b,2)},"%j":function(b){return a(b.tm_mday+bM(ba(b.tm_year+1900)?aE:aA,b.tm_mon-1),3)},"%m":function(b){return a(b.tm_mon+1,2)},"%M":function(b){return a(b.tm_min,2)},"%n":function(){return"\n"},"%p":function(a){return a.tm_hour>=0&&a.tm_hour<12?"AM":"PM"},"%S":function(b){return a(b.tm_sec,2)},"%t":function(){return"	"},"%u":function(a){return a.tm_wday||7},"%U":function(d){var b=new Date(d.tm_year+1900,0,1),f=b.getDay()===0?b:aU(b,7-b.getDay()),e=new Date(d.tm_year+1900,d.tm_mon,d.tm_mday),g,h,i;return c(f,e)<0?(g=bM(ba(e.getFullYear())?aE:aA,e.getMonth()-1)-31,h=31-f.getDate(),i=h+g+e.getDate(),a(Math.ceil(i/7),2)):c(f,b)===0?"01":"00"},"%V":function(b){var h=new Date(b.tm_year+1900,0,4),i=new Date(b.tm_year+1901,0,4),d=g(h),j=g(i),f=aU(new Date(b.tm_year+1900,0,1),b.tm_yday),e;return c(f,d)<0?"53":c(j,f)<=0?"01":(d.getFullYear()<b.tm_year+1900?e=b.tm_yday+32-d.getDate():e=b.tm_yday+1-d.getDate(),a(Math.ceil(e/7),2))},"%w":function(a){return a.tm_wday},"%W":function(d){var b=new Date(d.tm_year,0,1),f=b.getDay()===1?b:aU(b,b.getDay()===0?1:7-b.getDay()+1),e=new Date(d.tm_year+1900,d.tm_mon,d.tm_mday),g,h,i;return c(f,e)<0?(g=bM(ba(e.getFullYear())?aE:aA,e.getMonth()-1)-31,h=31-f.getDate(),i=h+g+e.getDate(),a(Math.ceil(i/7),2)):c(f,b)===0?"01":"00"},"%y":function(a){return(a.tm_year+1900).toString().substring(2)},"%Y":function(a){return a.tm_year+1900},"%z":function(b){var a=b.tm_gmtoff,c=a>=0;return a=Math.abs(a)/60,a=a/60*100+a%60,(c?"+":"-")+String("0000"+a).slice(-4)},"%Z":function(a){return a.tm_zone},"%%":function(){return"%"}};for(d in p)f.indexOf(d)>=0&&(f=f.replace(new RegExp(d,"g"),p[d](q)));return h=at(f,!1),h.length>s?0:(cd(h,t),h.length-1)}function l$(a,b,c,d){return bU(a,b,c,d)}function ma(a){switch(a){case 30:return bL;case 85:var b=2*1024*1024*1024-65536;return b/bL;case 132:case 133:case 12:case 137:case 138:case 15:case 235:case 16:case 17:case 18:case 19:case 20:case 149:case 13:case 10:case 236:case 153:case 9:case 21:case 22:case 159:case 154:case 14:case 77:case 78:case 139:case 80:case 81:case 82:case 68:case 67:case 164:case 11:case 29:case 47:case 48:case 95:case 52:case 51:case 46:return 200809;case 79:return 0;case 27:case 246:case 127:case 128:case 23:case 24:case 160:case 161:case 181:case 182:case 242:case 183:case 184:case 243:case 244:case 245:case 165:case 178:case 179:case 49:case 50:case 168:case 169:case 175:case 170:case 171:case 172:case 97:case 76:case 32:case 173:case 35:return-1;case 176:case 177:case 7:case 155:case 8:case 157:case 125:case 126:case 92:case 93:case 129:case 130:case 131:case 94:case 91:return 1;case 74:case 60:case 69:case 70:case 4:return 1024;case 31:case 42:case 72:return 32;case 87:case 26:case 33:return 2147483647;case 34:case 1:return 47839;case 38:case 36:return 99;case 43:case 37:return 2048;case 0:return 2097152;case 3:return 65536;case 28:return 32768;case 44:return 32767;case 75:return 16384;case 39:return 1e3;case 89:return 700;case 71:return 256;case 40:return 255;case 2:return 100;case 180:return 64;case 25:return 20;case 5:return 16;case 6:return 6;case 73:return 4;case 84:return typeof navigator=="object"?navigator.hardwareConcurrency||1:1}return W(28),-1}function mb(a){var b=Date.now()/1e3|0;return a&&(e[a>>2]=b),b}function mc(a){return W(12),-1}function md(){return mc.apply(null,arguments)}b.staticInit(),typeof dateNow!="undefined"?ak=dateNow:typeof performance=="object"&&performance&&typeof performance.now=="function"?ak=function(){return performance.now()}:ak=Date.now,f.requestFullScreen=function(a,b,c){t("Module.requestFullScreen is deprecated. Please call Module.requestFullscreen instead."),f.requestFullScreen=f.requestFullscreen,g.requestFullScreen(a,b,c)},f.requestFullscreen=function(a,b,c){g.requestFullscreen(a,b,c)},f.requestAnimationFrame=function(a){g.requestAnimationFrame(a)},f.setCanvasSize=function(a,b,c){g.setCanvasSize(a,b,c)},f.pauseMainLoop=function(){g.mainLoop.pause()},f.resumeMainLoop=function(){g.mainLoop.resume()},f.getUserMedia=function(){g.getUserMedia()},f.createContext=function(a,b,c,d){return g.createContext(a,b,c,d)},c.init();for(a_=0;a_<32;a_++)ac.push(new Array(a_));function at(b,d,c){var e=c>0?c:V(b)+1,a=new Array(e),f=ay(b,a,0,a.length);return d&&(a.length=f),a}bQ={r:mW,Ab:mV,Uh:mU,ki:mT,pa:mS,$h:mR,mi:mQ,ei:mP,li:mO,ii:mz,di:my,Yh:mx,hi:mw,_h:mu,Xh:mt,X:mj,gi:mi,ai:mh,Zh:mg,oi:mf,fi:me,ci:l_,ji:lZ,Cb:lY,hb:lX,Th:lV,Ma:lP,oa:lO,Ta:lw,Ub:jl,sb:jk,Vb:bb,Tb:je,Gb:iX,fc:nb,v:na,Pb:iS,Bb:iG,Sh:iE,zb:ir,ib:iq,Fi:gH,$a:cw,wh:gG,qi:gF,vg:gE,Hh:ak,Gg:gD,Sg:fX,th:fT,sh:fJ,ie:fm,Lh:fd,Kd:eM,rh:ex,qh:en,Hd:db,Id:dc,ph:dd,oh:de,Lc:df,nh:dg,Dc:dh,Qd:di,Ch:dj,mh:dk,lh:dl,kh:dm,jh:dn,ih:dp,Vd:dq,hh:dr,gh:ds,fh:dt,eh:du,id:dv,jd:dw,ld:dx,kd:dy,dh:dz,ch:dA,ah:dB,Uc:dC,$g:dD,_g:dE,Zg:dF,ne:dG,Yg:dH,me:dI,gd:dJ,Xg:dK,Wg:dL,oe:dM,Vg:dN,Ug:dO,Tg:dP,Rg:dQ,Qg:dR,Pg:dS,ke:dT,Nh:dU,Og:dV,Nc:dW,Ng:dX,Vc:dY,Mg:dZ,Cc:d_,Pd:d$,Bh:ea,Lg:eb,Kg:ec,Jg:ed,Ig:ee,Fg:ef,Eg:eg,Dg:eh,_c:ei,xh:ej,jc:ek,we:el,kc:em,be:eo,ue:ep,yh:eq,Cg:er,Zc:es,vh:et,hc:eu,ic:ev,ve:ew,se:ey,Bg:ez,Ag:eA,he:eB,Kh:eC,Jd:eD,Yc:eE,zg:eF,yg:eG,Rd:eH,xg:eI,wg:eJ,Td:eK,ug:eL,tg:eN,rg:eO,le:eP,Oh:eQ,qg:eR,Oc:eS,pg:eT,zc:eU,Od:eV,Ah:eW,sg:eX,og:eY,ng:eZ,ad:e_,bd:e$,dd:fa,mg:fb,lg:fc,jg:fe,Pc:ff,ig:fg,ce:fh,hg:fi,gg:fj,vd:fk,fg:fl,Qc:fn,Sc:fo,Ld:fp,eg:fq,nc:fr,vc:fs,cg:ft,dg:fu,Eh:fv,Gh:fw,Dh:fx,ee:fy,Fh:fz,fe:fA,Ih:fB,bg:fC,Fc:fD,Gc:fE,_f:fF,Zf:fG,Yf:fH,ag:fI,Xf:fK,hd:fL,Rc:fM,Wf:fN,Vf:fO,Fd:fP,cd:fQ,ed:fR,Sf:fS,Uf:fU,Tf:fV,wd:fW,Dd:fY,Cd:fZ,Of:f_,Rf:f$,Pf:ga,Nf:gb,sc:gc,rc:gd,Mf:ge,Lf:gf,Kf:gg,Jf:gh,je:gi,Mh:gj,If:gk,Mc:gl,Hf:gm,Xc:gn,Gf:go,yc:gp,Nd:da,zh:gr,Ef:gs,Df:gt,Sd:gu,xc:gv,Cf:gw,Bf:gx,uc:gy,tc:gz,Jh:gA,te:gB,Af:gI,zf:gJ,yf:gK,Ud:gL,wc:gM,xf:gN,Ic:gO,Hc:gP,Kc:gQ,Jc:gR,wf:gS,vf:gT,tf:gU,sf:gV,rf:gW,qf:gX,pf:gY,of:gZ,nf:g_,mf:g$,qe:ha,lf:hb,kf:hc,hf:hd,gf:he,qc:hf,oc:hg,ff:hh,pe:hi,Gd:hj,ef:hk,df:hl,cf:hm,bf:hn,ud:ho,pd:hp,af:hq,$e:hr,_e:hs,Ye:ht,td:hu,od:hv,Xe:hw,We:hx,Ve:hy,Ue:hz,sd:hA,nd:hB,Te:hC,Se:hD,Re:hE,Qe:hF,rd:hG,md:hH,$c:hI,Pe:hJ,ae:hK,_d:hL,Ne:hM,$d:hN,Yd:hO,Me:hP,Zd:hQ,Wd:hR,de:hS,Le:hT,Ke:hU,Je:hV,Ie:hW,He:hX,Ge:hY,Fe:hZ,Ee:h_,Be:h$,Ae:ia,Ec:ib,uh:ic,lc:id,xe:ie,mc:ig,Ad:ih,yd:ii,zd:ij,xd:ik,Ed:il,ze:im,ye:io,Tc:ip,H:iu,Ph:iv,xi:iw,bi:iy,bh:iz,Qh:iB,Ci:iC,Ac:iD,Wa:cy,qd:iF,fd:iH,Wc:iI,Xd:iK,Md:iL,Bd:iM,Ob:ck,uf:iP,Ff:iQ,jf:iR,ge:iT,re:iU,Ce:iV,Oe:iW,Ze:iY,yb:iZ,$f:i$,pc:jb,kg:jc,Qf:ci,Vh:jf,Wh:jg,bc:jh,za:ji,ni:jj,fb:az,o:jm,gb:jn,dc:jo,xb:jp,b:jq,Va:jr,nb:js,Jb:jt,c:ju,U:jv,e:jw,ga:jx,a:jy,l:jz,M:jA,Z:jB,J:jC,sa:jD,u:jE,x:jF,R:jG,P:jH,Ba:jI,T:jJ,ha:jK,S:jL,Ya:jM,Mb:jN,zi:jO,Bi:jP,pb:jQ,yi:jR,jb:jS,Kb:jT,_a:jU,Ca:jV,Q:jW,K:jX,V:jY,ba:jZ,N:j_,G:j$,ja:ka,ea:kb,L:kc,n:kd,s:ke,C:kf,xa:kg,Ra:kh,_:cb,Ka:ki,z:kj,j:kk,mb:kl,Gi:km,fa:kn,E:ko,Ai:kp,Nb:kq,F:kr,I:ks,ra:kt,B:ku,da:kv,Y:kw,vi:kx,ua:ky,Hb:kz,Ua:kA,Xa:kB,Aa:kC,ab:kD,wi:kE,ti:kF,Ea:kG,Ei:kH,Ib:kI,ta:kJ,wa:kK,ob:kL,qa:kM,Oa:kN,W:kO,Za:kP,A:kQ,Qa:kR,h:kS,d:kT,Di:kU,Pa:kV,bb:kW,ui:kX,g:kY,m:kZ,qb:k_,Lb:k$,lb:la,k:lb,Ia:lc,va:ld,kb:le,ca:lf,Ha:lg,Fa:lh,t:li,Ga:lj,si:lk,Fb:ll,Eb:lm,f:ln,ia:lo,w:lp,aa:lq,D:lr,cb:ls,Ja:lt,i:lu,y:lv,ub:lx,Hi:lz,ec:lA,Ji:lB,Zb:lC,ac:lD,Sb:lE,Bc:lF,Ii:lG,Qb:lH,rb:lI,Hg:lJ,De:lK,ri:lL,cc:lM,wb:nt,ma:nm,la:no,La:ns,eb:np,$b:nq,pi:nw,Db:nv,gc:nx,Da:nn,O:nk,ya:nj,na:nl,ka:nr,vb:nu,Xb:lN,db:nE,memory:ai,Yb:lR,Na:lS,$:cJ,p:lT,_b:lU,tb:bU,Rh:l$,Rb:ma,table:ct,q:is,Sa:mb,Wb:md},bP=nc(),f.asm=bP,bS=f.___wasm_call_ctors=function(){return f.asm.Ki.apply(null,arguments)},mk=f._audio_driver_js_mix=function(){return f.asm.Li.apply(null,arguments)},ml=f._audio_driver_process_capture=function(){return f.asm.Mi.apply(null,arguments)},mm=f._resize_poolbytearray_and_open_write=function(){return f.asm.Ni.apply(null,arguments)},mn=f.__drop_files_callback=function(){return f.asm.Oi.apply(null,arguments)},mo=f._cleanup_after_sync=function(){return f.asm.Pi.apply(null,arguments)},mp=f._main_after_fs_sync=function(){return f.asm.Qi.apply(null,arguments)},mq=f._main=function(){return f.asm.Ri.apply(null,arguments)},mr=f._update_clipboard=function(){return f.asm.Si.apply(null,arguments)},ms=f._send_notification=function(){return f.asm.Ti.apply(null,arguments)},B=f._malloc=function(){return f.asm.Ui.apply(null,arguments)},ah=f._free=function(){return f.asm.Vi.apply(null,arguments)},mv=f._fflush=function(){return f.asm.Wi.apply(null,arguments)},bc=f._htonl=function(){return f.asm.Xi.apply(null,arguments)},aN=f._htons=function(){return f.asm.Yi.apply(null,arguments)},bI=f._ntohs=function(){return f.asm.Zi.apply(null,arguments)},b$=f._realloc=function(){return f.asm._i.apply(null,arguments)},mA=f.___errno_location=function(){return f.asm.$i.apply(null,arguments)},mB=f.__emrtc_on_ch_error=function(){return f.asm.aj.apply(null,arguments)},mC=f.__emrtc_on_ch_open=function(){return f.asm.bj.apply(null,arguments)},mD=f.__emrtc_on_ch_close=function(){return f.asm.cj.apply(null,arguments)},mE=f.__emrtc_on_ch_message=function(){return f.asm.dj.apply(null,arguments)},mF=f.__emrtc_on_ice_candidate=function(){return f.asm.ej.apply(null,arguments)},mG=f.__emrtc_session_description_created=function(){return f.asm.fj.apply(null,arguments)},mH=f.__emrtc_on_connection_state_changed=function(){return f.asm.gj.apply(null,arguments)},mI=f.__emrtc_on_error=function(){return f.asm.hj.apply(null,arguments)},mJ=f.__emrtc_emit_channel=function(){return f.asm.ij.apply(null,arguments)},mK=f.__esws_on_connect=function(){return f.asm.jj.apply(null,arguments)},mL=f.__esws_on_message=function(){return f.asm.kj.apply(null,arguments)},mM=f.__esws_on_error=function(){return f.asm.lj.apply(null,arguments)},mN=f.__esws_on_close=function(){return f.asm.mj.apply(null,arguments)},aw=f.__get_tzname=function(){return f.asm.nj.apply(null,arguments)},ce=f.__get_daylight=function(){return f.asm.oj.apply(null,arguments)},cg=f.__get_timezone=function(){return f.asm.pj.apply(null,arguments)},H=f._setThrew=function(){return f.asm.qj.apply(null,arguments)},cp=f._emscripten_GetProcAddress=function(){return f.asm.rj.apply(null,arguments)},cA=f.dynCall_i=function(){return f.asm.sj.apply(null,arguments)},cU=f.dynCall_ii=function(){return f.asm.tj.apply(null,arguments)},cX=f.dynCall_iii=function(){return f.asm.uj.apply(null,arguments)},K=f.dynCall_iiii=function(){return f.asm.vj.apply(null,arguments)},ch=f.dynCall_iiiii=function(){return f.asm.wj.apply(null,arguments)},cZ=f.dynCall_iiiiii=function(){return f.asm.xj.apply(null,arguments)},cW=f.dynCall_iiiiiii=function(){return f.asm.yj.apply(null,arguments)},cT=f.dynCall_iiiiiiiiii=function(){return f.asm.zj.apply(null,arguments)},cr=f.dynCall_iiiij=function(){return f.asm.Aj.apply(null,arguments)},cP=f.dynCall_v=function(){return f.asm.Bj.apply(null,arguments)},cO=f.dynCall_vi=function(){return f.asm.Cj.apply(null,arguments)},cL=f.dynCall_vii=function(){return f.asm.Dj.apply(null,arguments)},cG=f.dynCall_viii=function(){return f.asm.Ej.apply(null,arguments)},cx=f.dynCall_viiii=function(){return f.asm.Fj.apply(null,arguments)},cv=f.dynCall_viiiiiii=function(){return f.asm.Gj.apply(null,arguments)},F=f.stackSave=function(){return f.asm.Hj.apply(null,arguments)},_=f.stackAlloc=function(){return f.asm.Ij.apply(null,arguments)},D=f.stackRestore=function(){return f.asm.Jj.apply(null,arguments)};function nj(a,b,c){var d=F();try{cL(a,b,c)}catch(a){if(D(d),a!==a+0&&a!=="longjmp")throw a;H(1,0)}}function nk(a,b){var c=F();try{cO(a,b)}catch(a){if(D(c),a!==a+0&&a!=="longjmp")throw a;H(1,0)}}function nl(a,b,c,d){var e=F();try{cG(a,b,c,d)}catch(a){if(D(e),a!==a+0&&a!=="longjmp")throw a;H(1,0)}}function nm(a,b){var c=F();try{return cU(a,b)}catch(a){if(D(c),a!==a+0&&a!=="longjmp")throw a;H(1,0)}}function nn(a){var b=F();try{cP(a)}catch(a){if(D(b),a!==a+0&&a!=="longjmp")throw a;H(1,0)}}function no(a,b,c){var d=F();try{return cX(a,b,c)}catch(a){if(D(d),a!==a+0&&a!=="longjmp")throw a;H(1,0)}}function np(a,b,c,d,e){var f=F();try{return ch(a,b,c,d,e)}catch(a){if(D(f),a!==a+0&&a!=="longjmp")throw a;H(1,0)}}function nq(a,b,c,d,e,f){var g=F();try{return cZ(a,b,c,d,e,f)}catch(a){if(D(g),a!==a+0&&a!=="longjmp")throw a;H(1,0)}}function nr(a,b,c,d,e){var f=F();try{cx(a,b,c,d,e)}catch(a){if(D(f),a!==a+0&&a!=="longjmp")throw a;H(1,0)}}function ns(a,b,c,d){var e=F();try{return K(a,b,c,d)}catch(a){if(D(e),a!==a+0&&a!=="longjmp")throw a;H(1,0)}}function nt(a){var b=F();try{return cA(a)}catch(a){if(D(b),a!==a+0&&a!=="longjmp")throw a;H(1,0)}}function nu(a,b,c,d,e,f,g,h){var i=F();try{cv(a,b,c,d,e,f,g,h)}catch(a){if(D(i),a!==a+0&&a!=="longjmp")throw a;H(1,0)}}function nv(a,b,c,d,e,f,g,h,i,j){var k=F();try{return cT(a,b,c,d,e,f,g,h,i,j)}catch(a){if(D(k),a!==a+0&&a!=="longjmp")throw a;H(1,0)}}function nw(a,b,c,d,e,f,g){var h=F();try{return cW(a,b,c,d,e,f,g)}catch(a){if(D(h),a!==a+0&&a!=="longjmp")throw a;H(1,0)}}function nx(a,b,c,d,e,f){var g=F();try{return cr(a,b,c,d,e,f)}catch(a){if(D(g),a!==a+0&&a!=="longjmp")throw a;H(1,0)}}f.asm=bP,f.FS=b,f.callMain=cK,f.then=function(a){if(au)a(f);else{var b=f.onRuntimeInitialized;f.onRuntimeInitialized=function(){b&&b(),a(f)}}return f};function bG(a){this.name="ExitStatus",this.message="Program terminated with exit("+a+")",this.status=a}cf=!1,am=function a(){au||bo(),au||(am=a)};function cK(d){var a,b,c,h,g;d=d||[],a=d.length+1,b=_((a+1)*4),e[b>>2]=bF(aZ);for(c=1;c<a;c++)e[(b>>2)+c]=bF(d[c-1]);e[(b>>2)+a]=0;try{h=f._main(a,b),bj(h,!0)}catch(a){if(a instanceof bG)return;if(a=="SimulateInfiniteLoop"){af=!0;return}g=a,a&&typeof a=="object"&&a.stack&&(g=[a,a.stack]),t("exception thrown: "+g),bd(1,a)}finally{cf=!0}}function bo(a){if(a=a||bg,ag>0)return;if(nz(),ag>0)return;function b(){if(au)return;if(au=!0,ab)return;ny(),ni(),f.onRuntimeInitialized&&f.onRuntimeInitialized(),bJ&&cK(a),ng()}f.setStatus?(f.setStatus("Running..."),setTimeout(function(){setTimeout(function(){f.setStatus("")},1),b()},1)):b()}f.run=bo;function bj(a,b){if(b&&af&&a===0)return;af||(ab=!0,bz=a,nh(),f.onExit&&f.onExit(a)),bd(a,new bG(a))}if(f.preInit)for(typeof f.preInit=="function"&&(f.preInit=[f.preInit]);f.preInit.length>0;)f.preInit.pop()();return bJ=!1,f.noInitialRun&&(bJ=!1),bo(),aL}}(),Preloader,Utils;typeof exports=='object'&&typeof module=='object'?module.exports=Godot:typeof define=='function'&&define.amd?define([],function(){return Godot}):typeof exports=='object'&&(exports.Godot=Godot),Preloader=function(){var e=4,b=null,a={loaded:0,total:0},c={},f;this.preloadedFiles=[];function d(c,d,b,e){var a=new XMLHttpRequest;a.open('GET',b),b.endsWith('.js')||(a.responseType='arraybuffer'),['loadstart','progress','load','error','abort'].forEach(function(f){a.addEventListener(f,g.bind(a,c,d,b,e))}),a.send()}function g(g,c,a,b,f){if(this.status>=400){if(this.status<500||++b[a].attempts>=e){c(new Error("Failed loading file '"+a+"': "+this.statusText)),this.abort();return}setTimeout(d.bind(null,g,c,a,b),1e3)}switch(f.type){case'loadstart':b[a]===void 0&&(b[a]={total:f.total,loaded:f.loaded,attempts:0,final:!1});break;case'progress':b[a].loaded=f.loaded,b[a].total=f.total;break;case'load':b[a].final=!0,g(this);break;case'error':++b[a].attempts>=e?(b[a].final=!0,c(new Error("Failed loading file '"+a+"'"))):setTimeout(d.bind(null,g,c,a,b),1e3);break;case'abort':b[a].final=!0,c(new Error("Loading file '"+a+"' was aborted."));break}}this.loadPromise=function(a){return new Promise(function(b,e){d(b,e,a,c)})},this.preload=function(a,b){if(a instanceof ArrayBuffer?a=new Uint8Array(a):ArrayBuffer.isView(a)&&(a=new Uint8Array(a.buffer)),a instanceof Uint8Array)return this.preloadedFiles.push({path:b,buffer:a}),Promise.resolve();if(typeof a=='string'){var c=this;return this.loadPromise(a).then(function(d){return c.preloadedFiles.push({path:b||a,buffer:d.response}),Promise.resolve()})}throw Promise.reject("Invalid object for preloading")},f=function(){var e=0,d=0,g=!0,h=!0;Object.keys(c).forEach(function(b){const a=c[b];a.final||(h=!1),!g||a.total===0?(g=!1,d=0):d+=a.total,e+=a.loaded}),(e!==a.loaded||d!==a.total)&&(a.loaded=e,a.total=d,typeof b=='function'&&b(e,d)),h||requestAnimationFrame(f)},this.animateProgress=f,this.setProgressFunc=function(a){b=a}},Utils={createLocateRewrite:function(a){function b(b){if(b.endsWith('.worker.js'))return a+'.worker.js';if(b.endsWith('.js'))return a+'.js';if(b.endsWith('.wasm'))return a+'.wasm'}return b},createInstantiatePromise:function(a){function b(b,c){return a.then(function(a){WebAssembly.instantiate(a.response,b).then(function(a){c(a.instance,a.module)})}),a=null,{}}return b},findCanvas:function(){var a=document.getElementsByTagName('canvas');if(a.length&&a[0]instanceof HTMLCanvasElement)return a[0];throw new Error("No canvas found")},isWebGLAvailable:function(c=1){var b=!1,a;try{a=document.createElement('canvas'),c===1?b=a.getContext('webgl')||a.getContext('experimental-webgl'):c===2&&(b=a.getContext('webgl2')||a.getContext('experimental-webgl2'))}catch(a){}return!!b}},Function('return this')().Engine=function(){var c=new Preloader,i='.wasm',g=!0,h='',d=null,b=null,f=null,e=null,j=null;function k(a){return d==null&&(h=a,d=c.loadPromise(a+i),c.setProgressFunc(j),requestAnimationFrame(c.animateProgress)),d}function l(){d=null}function a(){this.canvas=null,this.executableName='',this.rtenv=null,this.customLocale=null,this.resizeCanvasOnStart=!1,this.onExecute=null,this.onExit=null}return a.prototype.init=function(c){var a,i;if(b)return b;if(d==null){if(!c)return b=Promise.reject(new Error("A base path must be provided when calling `init` and the engine is not loaded.")),b;k(c)}return a={},typeof e=='function'&&(a.print=e),typeof f=='function'&&(a.printErr=f),i=this,b=new Promise(function(b,c){a.locateFile=Utils.createLocateRewrite(h),a.instantiateWasm=Utils.createInstantiatePromise(d),Godot(a).then(function(c){i.rtenv=c,g&&l(),b(),a=null})}),b},a.prototype.preloadFile=function(a,b){return c.preload(a,b)},a.prototype.start=function(){for(var e=[],d=0,a;d<arguments.length;d++)e.push(arguments[d]);return a=this,a.init().then(function(){if(!a.rtenv)return Promise.reject(new Error('The engine must be initialized before it can be started'));a.canvas instanceof HTMLCanvasElement||(a.canvas=Utils.findCanvas()),a.canvas.tabIndex<0&&(a.canvas.tabIndex=0),a.canvas.addEventListener('contextmenu',function(a){a.preventDefault()},!1),a.canvas.addEventListener('webglcontextlost',function(a){alert("WebGL context lost, please reload the page"),a.preventDefault()},!1);var d=a.customLocale;return d||(d=navigator.languages?navigator.languages[0]:navigator.language,d=d.split('.')[0]),a.rtenv.locale=d,a.rtenv.canvas=a.canvas,a.rtenv.thisProgram=a.executableName,a.rtenv.resizeCanvasOnStart=a.resizeCanvasOnStart,a.rtenv.noExitRuntime=!0,a.rtenv.onExecute=a.onExecute,a.rtenv.onExit=function(b){a.onExit&&a.onExit(b),a.rtenv=null},new Promise(function(d,f){c.preloadedFiles.forEach(function(b){a.rtenv.copyToFS(b.path,b.buffer)}),c.preloadedFiles.length=0,a.rtenv.callMain(e),b=null,d()})})},a.prototype.startGame=function(b,a,c){this.executableName=b;var d=this;return Promise.all([this.init(b),this.preloadFile(a,a)]).then(function(){var b=['--main-pack',a];return c&&(b=b.concat(c)),d.start.apply(d,b)})},a.prototype.setWebAssemblyFilenameExtension=function(a){if(String(a).length===0)throw new Error('Invalid WebAssembly filename extension override');i=String(a)},a.prototype.setUnloadAfterInit=function(a){g=a},a.prototype.setCanvas=function(a){this.canvas=a},a.prototype.setCanvasResizedOnStart=function(a){this.resizeCanvasOnStart=a},a.prototype.setLocale=function(a){this.customLocale=a},a.prototype.setExecutableName=function(a){this.executableName=a},a.prototype.setProgressFunc=function(a){j=a},a.prototype.setStdoutFunc=function(b){var a=function(a){arguments.length>1&&(a=Array.prototype.slice.call(arguments).join(" ")),b(a)};this.rtenv&&(this.rtenv.print=a),e=a},a.prototype.setStderrFunc=function(b){var a=function(a){arguments.length>1&&(a=Array.prototype.slice.call(arguments).join(" ")),b(a)};this.rtenv&&(this.rtenv.printErr=a),f=a},a.prototype.setOnExecute=function(a){this.rtenv&&(this.rtenv.onExecute=a),this.onExecute=a},a.prototype.setOnExit=function(a){this.onExit=a},a.prototype.copyToFS=function(a,b){if(this.rtenv==null)throw new Error("Engine must be inited before copying files");this.rtenv.copyToFS(a,b)},a.isWebGLAvailable=Utils.isWebGLAvailable,a.load=k,a.unload=l,a.prototype.init=a.prototype.init,a.prototype.preloadFile=a.prototype.preloadFile,a.prototype.start=a.prototype.start,a.prototype.startGame=a.prototype.startGame,a.prototype.setWebAssemblyFilenameExtension=a.prototype.setWebAssemblyFilenameExtension,a.prototype.setUnloadAfterInit=a.prototype.setUnloadAfterInit,a.prototype.setCanvas=a.prototype.setCanvas,a.prototype.setCanvasResizedOnStart=a.prototype.setCanvasResizedOnStart,a.prototype.setLocale=a.prototype.setLocale,a.prototype.setExecutableName=a.prototype.setExecutableName,a.prototype.setProgressFunc=a.prototype.setProgressFunc,a.prototype.setStdoutFunc=a.prototype.setStdoutFunc,a.prototype.setStderrFunc=a.prototype.setStderrFunc,a.prototype.setOnExecute=a.prototype.setOnExecute,a.prototype.setOnExit=a.prototype.setOnExit,a.prototype.copyToFS=a.prototype.copyToFS,a}()